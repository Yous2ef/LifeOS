import{j as e,o as Ss,p as Is,q as Ds,r as As}from"./radix-ui-CneFSYrq.js";import{r as g,d as Es,L as jt}from"./router-CJK1Z2Io.js";import{d as Ts,a as ue,e as Ms,M as Rs,c as Fs,f as Bs,g as Ps,h as Je,j as zs,k as Ls,m as y,l as Os,G as Y,u as $s}from"./GlassCard-BanqmBZf.js";import{c as j,B as M,D as Pt,d as zt,e as Lt,g as et,I as U}from"./index-Bxm5_NB2.js";import{d as se,m as Ot,av as yt,aw as Nt,b as ae,c as st,ak as $t,e as Re,p as xe,P as H,i as Fe,al as Gt,ax as Be,W as de,ay as Wt,C as qt,aq as Ut,az as Gs,aA as at,af as nt,ad as vt,aB as Ws,K as qs,q as Pe,A as Us,ab as Ke,X as J,ar as tt,ac as Vt,an as Yt,I as lt,R as Vs,a1 as Ys,y as Hs,n as Ht,am as _t,aC as wt,aD as _s,D as Ct,s as kt,B as Qt,t as St,U as It,aE as Qs,ap as Js,ae as Ks,l as Xs}from"./utils-C1zQmt0N.js";import{A as G,S as ce,a as Zs}from"./SkeletonCard-B2hvjRDr.js";import{a as ea,b as ta,c as sa,d as aa,G as na}from"./GoalWithdrawalModal-pvJSQcr7.js";import{a as la,P as ra,b as ia,c as oa,I as da}from"./PaymentModal-V6B9oBcU.js";import{L as z}from"./Label-9bh_qwHc.js";import{T as rt}from"./TextArea-CYEI4xSa.js";import{S as me}from"./switch-DcPiq9Ci.js";import"./react-vendor-pR2cKLDH.js";import"./charts-CDpzOIQv.js";import"./dnd-kit-Cy9T72DN.js";function ca(...t){const a=!Array.isArray(t[0]),n=a?0:-1,i=t[0+n],l=t[1+n],h=t[2+n],s=t[3+n],d=Ts(l,h,s);return a?d(i):d}function Jt(t){const a=ue(()=>Ms(t)),{isStatic:n}=g.useContext(Rs);if(n){const[,i]=g.useState(t);g.useEffect(()=>a.on("change",i),[])}return a}function Kt(t,a){const n=Jt(a()),i=()=>n.set(a());return i(),Fs(()=>{const l=()=>Bs.preRender(i,!1,!0),h=t.map(s=>s.on("change",l));return()=>{h.forEach(s=>s()),Ps(i)}}),n}function ma(t){Je.current=[],t();const a=Kt(Je.current,t);return Je.current=void 0,a}function xa(t,a,n,i){if(typeof t=="function")return ma(t);const l=typeof a=="function"?a:ca(a,n,i);return Array.isArray(t)?Dt(t,l):Dt([t],([h])=>l(h))}function Dt(t,a){const n=ue(()=>[]);return Kt(t,()=>{n.length=0;const i=t.length;for(let l=0;l<i;l++)n[l]=t[l].get();return a(n)})}class ua{constructor(){this.componentControls=new Set}subscribe(a){return this.componentControls.add(a),()=>this.componentControls.delete(a)}start(a,n){this.componentControls.forEach(i=>{i.start(a.nativeEvent||a,n)})}cancel(){this.componentControls.forEach(a=>{a.cancel()})}stop(){this.componentControls.forEach(a=>{a.stop()})}}const ha=()=>new ua;function ga(){return ue(ha)}const Xt=g.createContext(null);function fa(t,a,n,i){if(!i)return t;const l=t.findIndex(x=>x.value===a);if(l===-1)return t;const h=i>0?1:-1,s=t[l+h];if(!s)return t;const d=t[l],o=s.layout,r=zs(o.min,o.max,.5);return h===1&&d.layout.max+n>r||h===-1&&d.layout.min+n<r?Ls(t,l,l+h):t}function pa({children:t,as:a="ul",axis:n="y",onReorder:i,values:l,...h},s){const d=ue(()=>y[a]),o=[],r=g.useRef(!1),x={axis:n,registerItem:(b,N)=>{const D=o.findIndex(A=>b===A.value);D!==-1?o[D].layout=N[n]:o.push({value:b,layout:N[n]}),o.sort(ya)},updateOrder:(b,N,D)=>{if(r.current)return;const A=fa(o,b,N,D);o!==A&&(r.current=!0,i(A.map(ja).filter(k=>l.indexOf(k)!==-1)))}};return g.useEffect(()=>{r.current=!1}),e.jsx(d,{...h,ref:s,ignoreStrict:!0,children:e.jsx(Xt.Provider,{value:x,children:t})})}const ba=g.forwardRef(pa);function ja(t){return t.value}function ya(t,a){return t.layout.min-a.layout.min}function At(t,a=0){return Os(t)?t:Jt(a)}function Na({children:t,style:a={},value:n,as:i="li",onDrag:l,layout:h=!0,...s},d){const o=ue(()=>y[i]),r=g.useContext(Xt),x={x:At(a.x),y:At(a.y)},b=xa([x.x,x.y],([k,u])=>k||u?1:"unset"),{axis:N,registerItem:D,updateOrder:A}=r;return e.jsx(o,{drag:N,...s,dragSnapToOrigin:!0,style:{...a,x:x.x,y:x.y,zIndex:b},layout:h,onDrag:(k,u)=>{const{velocity:v}=u;v[N]&&A(n,x[N].get(),v[N]),l&&l(k,u)},onLayoutMeasure:k=>D(n,k),ref:d,ignoreStrict:!0,children:t})}const va=g.forwardRef(Na),wa=({children:t,className:a,leftColumn:n,centerColumn:i,rightColumn:l})=>{if(n||i){const h=!l;return e.jsxs("div",{className:j("min-h-screen  mt-5 pb-24 lg:pb-8",a),children:[e.jsxs("div",{className:"lg:hidden space-y-4",children:[n,l,i]}),h?e.jsxs("div",{className:"hidden lg:grid lg:grid-cols-12 gap-6 px-6",children:[e.jsx("aside",{className:"lg:col-span-4 space-y-4 sticky top-24 self-start overflow-y-auto scrollbar-none",children:n}),e.jsx("main",{className:"lg:col-span-8 space-y-4",children:i})]}):e.jsxs("div",{className:"hidden lg:grid lg:grid-cols-12 gap-6 px-6",children:[e.jsx("aside",{className:"lg:col-span-3 space-y-4 sticky top-24 self-start max-h-[calc(100vh-8rem)] overflow-y-auto scrollbar-none",children:n}),e.jsx("main",{className:"lg:col-span-6 space-y-4",children:i}),e.jsx("aside",{className:"lg:col-span-3 space-y-4 sticky top-24 self-start max-h-[calc(100vh-8rem)] overflow-y-auto scrollbar-none",children:l})]})]})}return e.jsx("div",{className:j("min-h-screen pb-24 lg:pb-8 px-4 lg:px-6",a),children:t})},Me=({title:t,subtitle:a,action:n,children:i,className:l})=>e.jsxs("section",{className:j("space-y-3",l),children:[(t||n)&&e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{children:[t&&e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:t}),a&&e.jsx("p",{className:"text-sm text-muted-foreground",children:a})]}),n]}),i]});function Ca({...t}){return e.jsx(Ss,{"data-slot":"popover",...t})}function ka({...t}){return e.jsx(Is,{"data-slot":"popover-trigger",...t})}function Sa({className:t,align:a="center",sideOffset:n=4,...i}){return e.jsx(Ds,{children:e.jsx(As,{"data-slot":"popover-content",align:a,sideOffset:n,className:j("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...i})})}const Ia=[{id:"today",label:"Today",icon:e.jsx(yt,{className:"w-4 h-4"})},{id:"yesterday",label:"Yesterday",icon:e.jsx(yt,{className:"w-4 h-4"})},{id:"this-week",label:"This Week",icon:e.jsx(Nt,{className:"w-4 h-4"})},{id:"last-week",label:"Last Week",icon:e.jsx(Nt,{className:"w-4 h-4"})},{id:"this-month",label:"This Month",icon:e.jsx(se,{className:"w-4 h-4"})},{id:"last-month",label:"Last Month",icon:e.jsx(se,{className:"w-4 h-4"})},{id:"this-year",label:"This Year",icon:e.jsx(se,{className:"w-4 h-4"})},{id:"all-time",label:"All Time",icon:e.jsx(se,{className:"w-4 h-4"})}],Zt=t=>{const a=new Date,n=new Date(a.getFullYear(),a.getMonth(),a.getDate()),i=new Date(n);i.setDate(n.getDate()-1);const l=new Date(n),h=l.getDay(),s=l.getDate()-h+(h===0?-6:1);l.setDate(s);const d=new Date(n.getFullYear(),n.getMonth(),1),o=new Date(n.getFullYear(),0,1),r=x=>{const b=new Date(x);return b.setHours(23,59,59,999),b};switch(t){case"today":return{preset:t,start:n,end:r(n),label:"Today"};case"yesterday":return{preset:t,start:i,end:r(i),label:"Yesterday"};case"this-week":{const x=new Date(l);return x.setDate(l.getDate()+6),{preset:t,start:l,end:r(x),label:"This Week"}}case"last-week":{const x=new Date(l);x.setDate(x.getDate()-7);const b=new Date(x);return b.setDate(x.getDate()+6),{preset:t,start:x,end:r(b),label:"Last Week"}}case"this-month":return{preset:t,start:d,end:r(n),label:new Date().toLocaleDateString("en-US",{month:"long"})};case"last-month":{const x=new Date(n.getFullYear(),n.getMonth()-1,1),b=new Date(n.getFullYear(),n.getMonth(),0);return{preset:t,start:x,end:r(b),label:x.toLocaleDateString("en-US",{month:"long"})}}case"this-year":return{preset:t,start:o,end:r(n),label:String(n.getFullYear())};case"all-time":return{preset:t,start:new Date(2020,0,1),end:r(n),label:"All Time"};default:return{preset:"this-month",start:d,end:r(n),label:new Date().toLocaleDateString("en-US",{month:"long"})}}},Et=({value:t,onChange:a,className:n})=>{const[i,l]=g.useState(!1),h=s=>{a(Zt(s)),l(!1)};return e.jsxs(Ca,{open:i,onOpenChange:l,children:[e.jsx(ka,{asChild:!0,children:e.jsxs(M,{variant:"ghost",className:j("h-10 px-4 gap-2","bg-muted/50 hover:bg-muted","rounded-full","font-medium","border border-border/50","transition-all duration-200",i&&"bg-muted ring-2 ring-primary/20",n),children:[e.jsx(se,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:t.label}),e.jsx(y.div,{animate:{rotate:i?180:0},transition:{duration:.2},children:e.jsx(Ot,{className:"w-4 h-4 text-muted-foreground"})})]})}),e.jsx(Sa,{className:"w-56 p-2 rounded-2xl border-border/50 bg-card/95 backdrop-blur-xl shadow-2xl",align:"center",sideOffset:8,children:e.jsx(G,{children:e.jsx(y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-1",children:Ia.map((s,d)=>e.jsxs(y.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.03},onClick:()=>h(s.id),className:j("w-full flex items-center gap-3 px-3 py-2.5 rounded-xl","text-sm font-medium","transition-all duration-150","hover:bg-primary/10","active:scale-[0.98]",t.preset===s.id?"bg-primary/15 text-primary":"text-foreground hover:text-primary"),children:[e.jsx("span",{className:j("p-1.5 rounded-lg",t.preset===s.id?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"),children:s.icon}),e.jsx("span",{children:s.label}),t.preset===s.id&&e.jsx(y.div,{layoutId:"activeIndicator",className:"ml-auto w-2 h-2 rounded-full bg-primary"})]},s.id))})})})]})},es=({amount:t,formatCurrency:a,previousAmount:n,compact:i=!1,className:l})=>{const h=n!==void 0?t-n:0,s=n&&n!==0?(t-n)/Math.abs(n)*100:0,d=()=>h>0?e.jsx(ae,{className:"w-4 h-4"}):h<0?e.jsx(st,{className:"w-4 h-4"}):e.jsx($t,{className:"w-4 h-4"}),o=()=>h>0?"text-emerald-500":h<0?"text-rose-500":"text-muted-foreground";return i?e.jsxs("div",{className:j("flex flex-col",l),children:[e.jsx("span",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wide",children:"Net Worth"}),e.jsx(y.span,{initial:{opacity:.5,y:-5},animate:{opacity:1,y:0},className:"text-xl font-bold text-foreground tabular-nums",children:a(t)},t)]}):e.jsxs("div",{className:j("flex flex-col items-center justify-center space-y-2",l),children:[e.jsx("span",{className:"text-sm text-muted-foreground font-medium uppercase tracking-wide",children:"Total Net Worth"}),e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:"relative",children:[e.jsx("span",{className:j("text-4xl sm:text-5xl font-bold tracking-tight tabular-nums",t>=0?"text-foreground":"text-rose-500"),children:a(t)}),t>0&&e.jsx("div",{className:"absolute inset-0 blur-2xl opacity-20 -z-10",style:{background:"linear-gradient(135deg, #22c55e, #10b981)"}})]},t),n!==void 0&&h!==0&&e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:j("flex items-center gap-2 px-3 py-1.5 rounded-full","text-sm font-medium",h>0?"bg-emerald-500/10":h<0?"bg-rose-500/10":"bg-muted",o()),children:[d(),e.jsxs("span",{children:[h>0?"+":"",a(h)]}),e.jsxs("span",{className:"text-xs opacity-70",children:["(",s>0?"+":"",s.toFixed(1),"%)"]})]})]})},Da=({accounts:t,calculateAccountBalance:a,formatCurrency:n,dateRange:i,onDateRangeChange:l,onSettingsClick:h,onAddClick:s,onReportsClick:d,selectedAccount:o,className:r})=>{const x=o?a(o.id):t.filter(b=>b.isActive).reduce((b,N)=>b+a(N.id),0);return e.jsxs(y.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,ease:[.25,.46,.45,.94]},className:j("lg:sticky lg:top-0 lg:border-b","fixed bottom-0 left-0 right-0 lg:relative","border-t lg:border-t-0 border-border/50","z-40","bg-background/95 backdrop-blur-xl","px-4 lg:px-6 py-3 lg:py-4","pb-safe",r),children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(es,{amount:x,formatCurrency:n,compact:!0})}),e.jsx("div",{children:e.jsx(Et,{value:i,onChange:l})}),e.jsxs("div",{className:"flex items-center gap-2",children:[d&&e.jsx(M,{variant:"ghost",size:"icon",onClick:d,className:"rounded-full w-10 h-10",title:"Reports",children:e.jsx(Re,{className:"w-5 h-5"})}),e.jsx(M,{variant:"ghost",size:"icon",onClick:h,className:"rounded-full w-10 h-10",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsxs(M,{size:"sm",onClick:s,className:"rounded-full px-4 gap-2 bg-primary hover:bg-primary/90 shadow-lg shadow-primary/25",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]})]}),e.jsxs("div",{className:"flex lg:hidden items-center justify-around gap-2",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(Et,{value:i,onChange:l})}),d&&e.jsxs(M,{variant:"ghost",size:"icon",onClick:d,className:"flex-col h-auto py-2 px-3 gap-1 hover:bg-primary/10",title:"Reports",children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[10px] font-medium",children:"Reports"})]}),e.jsxs(M,{variant:"ghost",size:"icon",onClick:h,className:"flex-col h-auto py-2 px-3 gap-1 hover:bg-primary/10",children:[e.jsx(xe,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[10px] font-medium",children:"Settings"})]})]})]})},Aa=({onAddIncome:t,onAddExpense:a,onAddTransfer:n,className:i,variant:l="fab"})=>{const[h,s]=g.useState(!1),d=[{type:"income",label:"Add Income",icon:e.jsx(Fe,{className:"w-4 h-4"}),color:"text-emerald-500",bgColor:"bg-emerald-500/10 hover:bg-emerald-500/20",onClick:t},{type:"expense",label:"Add Expense",icon:e.jsx(Gt,{className:"w-4 h-4"}),color:"text-red-500",bgColor:"bg-red-500/10 hover:bg-red-500/20",onClick:a},{type:"transfer",label:"Transfer",icon:e.jsx(Be,{className:"w-4 h-4"}),color:"text-blue-500",bgColor:"bg-blue-500/10 hover:bg-blue-500/20",onClick:n}];return l==="inline"?e.jsx("div",{className:j("flex items-center gap-2",i),children:d.map(o=>e.jsxs(M,{variant:"ghost",size:"sm",onClick:o.onClick,className:j("rounded-full gap-2",o.bgColor,o.color),children:[o.icon,e.jsx("span",{className:"hidden sm:inline",children:o.label.replace("Add ","")})]},o.type))}):e.jsx("div",{className:j("fixed bottom-24 right-4 z-50 lg:bottom-8",i),children:e.jsxs(Pt,{open:h,onOpenChange:s,children:[e.jsx(zt,{asChild:!0,children:e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:j("w-14 h-14 rounded-full","bg-primary text-primary-foreground","shadow-lg shadow-primary/30","flex items-center justify-center","transition-all duration-200","hover:shadow-xl hover:shadow-primary/40"),children:e.jsx(y.div,{animate:{rotate:h?45:0},transition:{duration:.2},children:e.jsx(H,{className:"w-6 h-6"})})})}),e.jsx(Lt,{className:"w-48 p-2 rounded-2xl",align:"end",side:"top",sideOffset:12,children:e.jsx(G,{children:d.map((o,r)=>e.jsx(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:r*.05},children:e.jsxs(et,{onClick:o.onClick,className:j("flex items-center gap-3 px-3 py-2 rounded-xl cursor-pointer my-2","transition-colors duration-150",o.bgColor),children:[e.jsx("span",{className:j("p-2 rounded-lg",o.bgColor,o.color),children:o.icon}),e.jsx("span",{className:j("font-medium",o.color),children:o.label})]})},o.type))})})]})})},Tt=t=>{switch(t){case"bank":return e.jsx(Gs,{className:"w-5 h-5"});case"mobile-wallet":return e.jsx(Ut,{className:"w-5 h-5"});case"cash":return e.jsx(de,{className:"w-5 h-5"});case"credit-card":return e.jsx(qt,{className:"w-5 h-5"});case"savings":return e.jsx(Wt,{className:"w-5 h-5"});case"investment":return e.jsx(ae,{className:"w-5 h-5"});default:return e.jsx(de,{className:"w-5 h-5"})}},Ea=(t,a)=>{const i=(d=>{const o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d);return o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:{r:59,g:130,b:246}})(t),l=Math.max(0,i.r-40),h=Math.max(0,i.g-40),s=Math.max(0,i.b-40);return`linear-gradient(135deg, 
    rgb(${i.r}, ${i.g}, ${i.b},0.25) 0%, 
    rgb(${l}, ${h}, ${s},${a?.1:1}) 100%)`},ts=({account:t,balance:a,formatCurrency:n,onClick:i,isSelected:l=!1,compact:h=!1,className:s})=>{const d=Ea(t.color,h);return h?e.jsxs(y.button,{onClick:i,whileHover:{scale:1.02},whileTap:{scale:.98},className:j("flex items-center gap-3 p-3 rounded-2xl w-full","transition-all duration-200","border-2",l?"bg-primary/10 border-primary":"bg-card border-transparent hover:border-primary/30"),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-white shrink-0",style:{background:d},children:t.icon?e.jsx("span",{className:"text-lg",children:t.icon}):Tt(t.type)}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:t.name}),e.jsx("p",{className:j("text-xs",a>=0?"text-muted-foreground":"text-red-500"),children:n(a)})]})]}):e.jsxs(y.div,{onClick:i,whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},className:j("relative overflow-hidden rounded-3xl p-5","cursor-pointer select-none","min-w-[260px] h-[160px]","shadow-xl transition-all duration-300",l?"ring-4 ring-primary ring-offset-4 ring-offset-background shadow-2xl":"ring-2 ring-transparent",s),style:{background:d,boxShadow:l?`0 30px 60px -15px ${t.color}80, 0 0 0 2px white`:`0 20px 40px -12px ${t.color}40`},children:[e.jsx("div",{className:"absolute -right-8 -top-8 w-32 h-32 rounded-full opacity-20",style:{background:"rgba(255,255,255,0.3)"}}),e.jsx("div",{className:"absolute -right-4 -bottom-4 w-24 h-24 rounded-full opacity-10",style:{background:"rgba(255,255,255,0.3)"}}),e.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between text-white",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:t.icon?e.jsx("span",{className:"text-2xl",children:t.icon}):Tt(t.type)}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:"text-xs font-medium uppercase tracking-wider opacity-80",children:t.type.replace("-"," ")}),l&&e.jsx(y.div,{initial:{scale:0},animate:{scale:1},className:"w-6 h-6 rounded-full bg-primary flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-primary-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium opacity-80 mb-1",children:t.name}),e.jsx(y.p,{initial:{opacity:.5},animate:{opacity:1},className:"text-2xl font-bold tracking-tight tabular-nums",children:n(a)},a)]})]}),e.jsx(y.div,{initial:{x:"-100%",opacity:0},whileHover:{x:"200%",opacity:.3},transition:{duration:.6,ease:"easeOut"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent skew-x-12"})]})},Ta=({accounts:t,calculateBalance:a,formatCurrency:n,onAccountClick:i,onAddAccount:l,selectedAccountId:h,className:s})=>{const d=g.useRef(null),[o,r]=g.useState(!1),[x,b]=g.useState(!0),N=()=>{if(!d.current)return;const{scrollLeft:k,scrollWidth:u,clientWidth:v}=d.current;r(k>0),b(k<u-v-10)},D=k=>{if(!d.current)return;const u=280;d.current.scrollBy({left:k==="left"?-u:u,behavior:"smooth"}),setTimeout(N,300)},A=t.filter(k=>k.isActive);return e.jsxs("div",{className:j("relative group",s),children:[o&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},className:"hidden lg:block absolute left-0 top-1/2 -translate-y-1/2 z-10",children:e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>D("left"),className:"w-10 h-10 rounded-full bg-background/80 backdrop-blur-sm shadow-lg border",children:e.jsx(at,{className:"w-5 h-5"})})}),x&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},className:"hidden lg:block absolute right-0 top-1/2 -translate-y-1/2 z-10",children:e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>D("right"),className:"w-10 h-10 rounded-full bg-background/80 backdrop-blur-sm shadow-lg border",children:e.jsx(nt,{className:"w-5 h-5"})})}),e.jsxs("div",{ref:d,onScroll:N,className:j("flex gap-4 overflow-x-auto scrollbar-none","snap-x snap-mandatory","px-4 lg:px-2 py-4","-mx-4 lg:-mx-2"),style:{scrollPaddingLeft:"1rem",scrollPaddingRight:"1rem"},children:[A.map((k,u)=>e.jsx(y.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:u*.1},className:"snap-start shrink-0",children:e.jsx(ts,{account:k,balance:a(k.id),formatCurrency:n,onClick:()=>i?.(k),isSelected:k.id===h})},k.id)),l&&e.jsxs(y.button,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:A.length*.1},onClick:l,className:j("snap-start shrink-0","min-w-[260px] h-[160px]","rounded-3xl","border-2 border-dashed border-muted-foreground/30","flex flex-col items-center justify-center gap-3","text-muted-foreground","hover:border-primary/50 hover:text-primary hover:bg-primary/5","transition-all duration-200","cursor-pointer"),children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-muted/50 flex items-center justify-center",children:e.jsx(H,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-medium",children:"Add Account"})]})]}),A.length>1&&e.jsx("div",{className:"flex justify-center gap-1.5 mt-2 lg:hidden",children:A.map(k=>e.jsx("div",{className:j("w-1.5 h-1.5 rounded-full transition-all duration-200",k.id===h?"bg-primary w-4":"bg-muted-foreground/30")},k.id))})]})},Ma=({accounts:t,calculateBalance:a,formatCurrency:n,onAccountClick:i,onAddAccount:l,selectedAccountId:h,showArchived:s=!1,className:d})=>{const r=[...s?t:t.filter(x=>x.isActive)].sort((x,b)=>x.order!==b.order?x.order-b.order:a(b.id)-a(x.id));return e.jsxs("div",{className:j("space-y-4",d),children:[e.jsxs("div",{className:"space-y-2 ",children:[e.jsx("div",{className:"flex flex-col gap-3 px-2 items-stretch",children:r.map((x,b)=>e.jsx(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:b*.05},children:e.jsx(ts,{account:x,balance:a(x.id),formatCurrency:n,onClick:()=>i?.(x),isSelected:x.id===h,compact:!0})},x.id))}),l&&e.jsx(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:r.length*.05},children:e.jsxs(M,{variant:"ghost",onClick:l,className:j("w-full justify-start gap-3 h-auto py-3 px-3","rounded-2xl","border-2 border-dashed border-muted-foreground/20","text-muted-foreground","hover:border-primary/30 hover:text-primary hover:bg-primary/5"),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-muted/50 flex items-center justify-center shrink-0",children:e.jsx(H,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-medium text-sm",children:"Add Account"})]})})]}),t.some(x=>!x.isActive)&&e.jsx("div",{className:"pt-2 text-center",children:e.jsx("button",{className:"text-xs text-muted-foreground hover:text-foreground transition-colors",onClick:()=>{},children:s?"Hide archived accounts":`Show ${t.filter(x=>!x.isActive).length} archived account(s)`})})]})},Ra=({budgetOverview:t,categories:a,formatCurrency:n,onEdit:i})=>{const l=t?.totalPlannedExpenses??0,h=t?.totalActualExpenses??0,{percentage:s,statusColor:d,statusBg:o}=g.useMemo(()=>{if(l===0)return{percentage:0,status:"not-set",statusColor:"text-muted-foreground",statusBg:"bg-muted"};const b=h/l*100;return b>=100?{percentage:b,status:"exceeded",statusColor:"text-red-500",statusBg:"bg-red-500"}:b>=80?{percentage:b,status:"warning",statusColor:"text-amber-500",statusBg:"bg-amber-500"}:b>=50?{percentage:b,status:"moderate",statusColor:"text-blue-500",statusBg:"bg-blue-500"}:{percentage:b,status:"good",statusColor:"text-emerald-500",statusBg:"bg-emerald-500"}},[l,h]),r=g.useMemo(()=>t?.categoryBudgets?t.categoryBudgets.map(b=>{const N=a.find(D=>D.id===b.categoryId);return N?{...b,name:N.name,icon:N.icon,color:N.color,percentage:b.planned>0?b.spent/b.planned*100:0}:null}).filter(Boolean).filter(b=>b.planned>0||b.spent>0).sort((b,N)=>N.spent-b.spent).slice(0,4):[],[t?.categoryBudgets,a]),x=g.useMemo(()=>{if(l===0)return null;if(s<=50)return{emoji:"ðŸ’š",text:"Great job! You're spending less than half your budget",type:"success"};if(s<=80)return{emoji:"ðŸ’™",text:"Good progress! Keep an eye on your spending",type:"info"};if(s<100)return{emoji:"ðŸ’›",text:"Careful! You're approaching your budget limit",type:"warning"};{const b=h-l;return{emoji:"â¤ï¸",text:`You've exceeded your budget by ${n(b)}`,type:"danger"}}},[s,l,h,n]);return l===0?e.jsxs(Y,{intensity:"light",className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-violet-500/20",children:e.jsx(ae,{className:"w-4 h-4 text-violet-400"})}),e.jsx("span",{className:"font-medium text-sm",children:"Budget Planning"})]}),e.jsx("button",{onClick:i,className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",title:"Edit budget settings",children:e.jsx(vt,{className:"w-4 h-4 text-muted-foreground"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Budget"}),e.jsx("span",{className:"font-semibold",children:n(0)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"Spent"}),e.jsx("span",{className:j("font-semibold",h>0&&"text-red-400"),children:n(h)})]}),e.jsx("div",{className:"h-2 bg-muted/50 rounded-full mb-4",children:e.jsx("div",{className:"h-full w-0 rounded-full bg-muted"})}),h>0&&e.jsxs("div",{className:"text-xs text-red-400 mb-3",children:[n(h)," spent without budget"]}),e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No budget set for any category"}),e.jsxs(y.button,{onClick:i,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-violet-500/20 text-violet-400 hover:bg-violet-500/30 transition-colors text-sm font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(H,{className:"w-4 h-4"}),"Set Up Budget"]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-white/5",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-amber-400",children:"ðŸ’¡ Tip:"})," Set a monthly budget to track your spending"]})})]}):e.jsxs(Y,{intensity:"light",className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-violet-500/20",children:e.jsx(ae,{className:"w-4 h-4 text-violet-400"})}),e.jsx("span",{className:"font-medium text-sm",children:"Budget Planning"})]}),e.jsx("button",{onClick:i,className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",title:"Edit budget settings",children:e.jsx(vt,{className:"w-4 h-4 text-muted-foreground"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Budget"}),e.jsx("span",{className:"font-semibold",children:n(l)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"Spent"}),e.jsx("span",{className:j("font-semibold",d),children:n(h)})]}),e.jsx("div",{className:"h-2.5 bg-muted/50 rounded-full mb-2 overflow-hidden",children:e.jsx(y.div,{className:j("h-full rounded-full",o),initial:{width:0},animate:{width:`${Math.min(s,100)}%`},transition:{duration:.5,ease:"easeOut"}})}),e.jsxs("div",{className:"flex items-center justify-between text-xs mb-4",children:[e.jsx("span",{className:d,children:s>100&&e.jsxs("span",{className:"text-red-400",children:[n(h-l)," exceeded"]})}),e.jsxs("span",{className:"text-muted-foreground",children:[s.toFixed(0),"%"]})]}),r.length>0&&e.jsx("div",{className:"space-y-2 mb-4",children:r.map(b=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{children:b.icon}),e.jsx("span",{className:"text-muted-foreground truncate max-w-[100px]",children:b.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:j("font-medium",b.percentage>=100?"text-red-400":b.percentage>=80?"text-amber-400":"text-foreground"),children:n(b.spent)}),e.jsxs("span",{className:"text-muted-foreground",children:["/ ",n(b.planned)]})]})]}),e.jsx("div",{className:"h-1 bg-muted/30 rounded-full overflow-hidden",children:e.jsx(y.div,{className:"h-full rounded-full",style:{backgroundColor:b.percentage>=100?"#ef4444":b.percentage>=80?"#f59e0b":b.color},initial:{width:0},animate:{width:`${Math.min(b.percentage,100)}%`},transition:{duration:.5,delay:.1}})})]},b.categoryId))}),r.length===0&&e.jsx("div",{className:"text-center py-2 mb-4",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"No category budgets configured"})}),x&&e.jsx("div",{className:"pt-3 border-t border-white/5",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{children:x.emoji})," ",x.text]})})]})},Fa=({transaction:t,formatCurrency:a,onClick:n,onEdit:i,onDelete:l,index:h=0})=>{const s=t.type==="income",d=t.type==="transfer",r=(x=>x.includes("T")?new Date(x).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):null)(t.date);return e.jsxs(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.02},whileHover:{backgroundColor:"var(--accent)"},whileTap:{scale:.99},onClick:n,className:j("flex items-center gap-3 px-4 py-3","cursor-pointer transition-colors duration-150","group"),children:[e.jsx("div",{className:j("w-10 h-10 rounded-2xl flex items-center justify-center shrink-0","transition-transform duration-200 group-hover:scale-105"),style:{backgroundColor:s?"rgba(34, 197, 94, 0.1)":d?"rgba(59, 130, 246, 0.1)":t.categoryColor?`${t.categoryColor}20`:"rgba(239, 68, 68, 0.1)"},children:s?e.jsx(Fe,{className:"w-5 h-5 text-emerald-500"}):d?e.jsx(Be,{className:"w-5 h-5 text-blue-500"}):e.jsx("span",{className:"text-lg",children:t.categoryIcon||"ðŸ’¸"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[t.category&&e.jsx("span",{className:"px-1.5 py-0.5 rounded-md",style:{backgroundColor:t.categoryColor?`${t.categoryColor}15`:"var(--muted)",color:t.categoryColor||"inherit"},children:t.category}),r&&e.jsx("span",{children:r}),t.location&&e.jsxs("span",{className:"truncate",children:["ðŸ“ ",t.location]})]})]}),e.jsx("div",{className:"text-right shrink-0",children:e.jsxs(y.p,{initial:{opacity:0},animate:{opacity:1},className:j("font-semibold tabular-nums",s?"text-emerald-500":d?"text-blue-500":"text-foreground"),children:[s?"+":d?"":"-"," ",a(t.amount)]})}),(i||l)&&e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-150",children:e.jsxs(Pt,{children:[e.jsx(zt,{asChild:!0,onClick:x=>x.stopPropagation(),children:e.jsx(M,{variant:"ghost",size:"icon",className:"w-8 h-8 rounded-full",children:e.jsx(Ws,{className:"w-4 h-4"})})}),e.jsxs(Lt,{align:"end",className:"w-40 rounded-xl",children:[i&&e.jsxs(et,{onClick:x=>{x.stopPropagation(),i()},className:"gap-2 rounded-lg",children:[e.jsx(qs,{className:"w-4 h-4"}),"Edit"]}),l&&e.jsxs(et,{onClick:x=>{x.stopPropagation(),l()},className:"gap-2 rounded-lg text-red-500 focus:text-red-500",children:[e.jsx(Pe,{className:"w-4 h-4"}),"Delete"]})]})]})})]})},Xe=15,Ba=({transactions:t,formatCurrency:a,dateRange:n,onTransactionClick:i,onDeleteIncome:l,onDeleteExpense:h,selectedAccount:s,onClearAccountFilter:d,className:o})=>{const[r,x]=g.useState(""),[b,N]=g.useState(!1),[D,A]=g.useState(Xe),k=g.useMemo(()=>{let S=t.filter(P=>{const c=new Date(P.date),E=c>=n.start&&c<=n.end,K=!s||P.accountId===s.id;return E&&K});if(r.trim()){const P=r.toLowerCase();S=S.filter(c=>c.title.toLowerCase().includes(P)||c.category?.toLowerCase().includes(P))}return S.sort((P,c)=>new Date(c.date).getTime()-new Date(P.date).getTime())},[t,n,r,s]);g.useMemo(()=>{A(Xe)},[n,r,s]);const u=g.useMemo(()=>k.slice(0,D),[k,D]),v=g.useMemo(()=>{const S={};return u.forEach(P=>{const c=P.date;S[c]||(S[c]=[]),S[c].push(P)}),S},[u]),f=D<k.length,I=()=>{A(S=>S+Xe)},w=S=>{const P=new Date(S),c=new Date,E=new Date(c);return E.setDate(E.getDate()-1),P.toDateString()===c.toDateString()?"Today":P.toDateString()===E.toDateString()?"Yesterday":P.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})},p=g.useMemo(()=>{let S=0,P=0,c=0;return k.forEach(E=>{E.type==="income"?S+=E.amount:E.type==="expense"?P+=E.amount:E.type==="transfer"&&(c+=E.amount)}),{income:S,expense:P,transfer:c,net:S-P}},[k]),R=Object.keys(v).sort((S,P)=>new Date(P).getTime()-new Date(S).getTime());return e.jsxs("div",{className:j("space-y-4",o),children:[s&&e.jsxs(y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-3 px-4 py-3 rounded-2xl bg-primary/10 border border-primary/20",children:[e.jsx("button",{onClick:d,className:"p-1.5 rounded-full hover:bg-primary/20 transition-colors",title:"Back to all accounts",children:e.jsx(Us,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Filtering by"}),e.jsx("p",{className:"font-medium",children:s.name})]}),e.jsxs("span",{className:"text-sm text-muted-foreground tabular-nums",children:[k.length," transaction",k.length!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx(G,{mode:"wait",children:b?e.jsxs(y.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"100%"},exit:{opacity:0,width:0},className:"relative",children:[e.jsx(Ke,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(U,{autoFocus:!0,placeholder:"Search transactions...",value:r,onChange:S=>x(S.target.value),className:"pl-9 pr-9 h-10 rounded-full bg-muted/50 border-0"}),e.jsx("button",{onClick:()=>{x(""),N(!1)},title:"Close search",className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:e.jsx(J,{className:"w-4 h-4"})})]},"search"):e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Transactions"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[k.length," transaction",k.length!==1?"s":""," ","in ",n.label]})]},"header")})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>N(!b),className:"rounded-full w-9 h-9",children:e.jsx(Ke,{className:"w-4 h-4"})})})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto scrollbar-none pb-1",children:[e.jsxs(y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 text-sm font-medium shrink-0",children:[e.jsx("span",{className:"text-xs opacity-70",children:"Income"}),e.jsx("span",{className:"tabular-nums",children:a(p.income)})]}),e.jsxs(y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-red-500/10 text-red-600 dark:text-red-400 text-sm font-medium shrink-0",children:[e.jsx("span",{className:"text-xs opacity-70",children:"Expenses"}),e.jsx("span",{className:"tabular-nums",children:a(p.expense)})]}),e.jsxs(y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:j("flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium shrink-0",p.net>=0?"bg-blue-500/10 text-blue-600 dark:text-blue-400":"bg-orange-500/10 text-orange-600 dark:text-orange-400"),children:[e.jsx("span",{className:"text-xs opacity-70",children:"Net"}),e.jsxs("span",{className:"tabular-nums",children:[p.net>=0?"+":"",a(p.net)]})]})]}),R.length===0?e.jsx(Y,{intensity:"light",padding:"lg",className:"text-center",children:e.jsxs("div",{className:"py-8",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Ke,{className:"w-7 h-7 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium mb-1",children:"No transactions found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Try a different search term":`No transactions in ${n.label.toLowerCase()}`})]})}):e.jsxs("div",{className:"space-y-6",children:[R.map((S,P)=>e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:P*.05},className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:w(S)}),e.jsxs("span",{className:"text-xs text-muted-foreground tabular-nums",children:[v[S].length," ","transaction",v[S].length!==1?"s":""]})]}),e.jsx(Y,{intensity:"light",padding:"none",className:"divide-y divide-border/50",children:v[S].map((c,E)=>e.jsx(Fa,{transaction:c,formatCurrency:a,onClick:()=>i?.(c),onDelete:()=>{c.type==="income"?l?.(c.id):h?.(c.id)},index:E},c.id))})]},S)),f&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},className:"pt-2",children:e.jsxs(M,{variant:"ghost",onClick:I,className:"w-full h-12 rounded-2xl bg-muted/30 hover:bg-muted/50 border border-border/50",children:[e.jsx(Ot,{className:"w-4 h-4 mr-2"}),"Show More (",k.length-D," ","remaining)"]})})]})]})},Pa=({incomes:t,expenses:a,transfers:n,dateRange:i,formatCurrency:l,className:h,selectedAccount:s,onClearAccountFilter:d,onTransfer:o})=>{const r=g.useMemo(()=>{let x=t.filter(f=>{const I=new Date(f.actualDate||f.createdAt);return I>=i.start&&I<=i.end}),b=a.filter(f=>{const I=new Date(f.date);return I>=i.start&&I<=i.end}),N=n.filter(f=>{const I=new Date(f.date);return I>=i.start&&I<=i.end});s&&(x=x.filter(f=>f.accountId===s.id),b=b.filter(f=>f.accountId===s.id),N=N.filter(f=>f.fromAccountId===s.id||f.toAccountId===s.id));const D=x.reduce((f,I)=>f+I.amount,0),A=b.reduce((f,I)=>f+I.amount,0),k=N.reduce((f,I)=>f+I.amount,0),u=D-A,v=Math.max(D,A,k,1);return{income:D,expense:A,transfer:k,net:u,incomePercent:D/v*100,expensePercent:A/v*100,transferPercent:k/v*100}},[t,a,n,i,s]);return e.jsxs(Y,{intensity:"light",padding:"md",className:j("space-y-4",h),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:"Cash Flow"}),s&&e.jsxs("button",{onClick:d,className:"flex items-center gap-1 px-2 py-0.5 rounded-full bg-primary/10 text-primary text-xs font-medium hover:bg-primary/20 transition-colors",children:[s.name,e.jsx(J,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsxs("button",{onClick:o,className:"flex items-center gap-1 px-2 py-1 rounded-lg bg-blue-500/10 text-blue-500 text-xs font-medium hover:bg-blue-500/20 transition-colors",children:[e.jsx(Be,{className:"w-3 h-3"}),"Transfer"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:i.label})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4 text-emerald-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Income"})]}),e.jsx("span",{className:"font-semibold text-emerald-500 tabular-nums",children:l(r.income)})]}),e.jsx("div",{className:"h-3 bg-muted/50 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${r.incomePercent}%`},transition:{duration:.8,ease:"easeOut"},className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 rounded-full",style:{boxShadow:"0 0 20px rgba(34, 197, 94, 0.4)"}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Expenses"})]}),e.jsx("span",{className:"font-semibold text-red-500 tabular-nums",children:l(r.expense)})]}),e.jsx("div",{className:"h-3 bg-muted/50 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${r.expensePercent}%`},transition:{duration:.8,ease:"easeOut",delay:.1},className:"h-full bg-gradient-to-r from-red-500 to-red-400 rounded-full",style:{boxShadow:"0 0 20px rgba(239, 68, 68, 0.4)"}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Transfers"})]}),e.jsx("span",{className:"font-semibold text-blue-500 tabular-nums",children:l(r.transfer)})]}),e.jsx("div",{className:"h-3 bg-muted/50 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${r.transferPercent}%`},transition:{duration:.8,ease:"easeOut",delay:.2},className:"h-full bg-gradient-to-r from-blue-500 to-blue-400 rounded-full",style:{boxShadow:"0 0 20px rgba(59, 130, 246, 0.4)"}})})]})]}),e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:j("flex items-center justify-between p-3 rounded-2xl",r.net>=0?"bg-emerald-500/10":"bg-red-500/10"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:j("w-10 h-10 rounded-xl flex items-center justify-center",r.net>=0?"bg-emerald-500/20":"bg-red-500/20"),children:e.jsx(tt,{className:j("w-5 h-5",r.net>=0?"text-emerald-500":"text-red-500")})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Net Cash Flow"}),e.jsxs("p",{className:j("font-bold tabular-nums",r.net>=0?"text-emerald-500":"text-red-500"),children:[r.net>=0?"+":"",l(r.net)]})]})]}),r.income>0&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Savings Rate"}),e.jsxs("p",{className:j("font-semibold tabular-nums",r.net>=0?"text-emerald-500":"text-red-500"),children:[(r.net/r.income*100).toFixed(0),"%"]})]})]})]})},za=({isOpen:t,onClose:a,title:n,children:i,className:l})=>(g.useEffect(()=>{const h=s=>{s.key==="Escape"&&a()};return t&&(window.addEventListener("keydown",h),document.body.style.overflow="hidden"),()=>{window.removeEventListener("keydown",h),document.body.style.overflow=""}},[t,a]),e.jsx(G,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:a,className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm"}),e.jsxs(y.div,{initial:{x:"100%",opacity:.5},animate:{x:0,opacity:1},exit:{x:"100%",opacity:.5},transition:{type:"spring",damping:30,stiffness:300},className:j("fixed top-0 right-0 bottom-0 z-50","w-full max-w-md","bg-background/95 backdrop-blur-xl","border-l border-border/50","shadow-2xl","flex flex-col",l),children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border/50",children:[e.jsx("h2",{className:"text-lg font-semibold",children:n||"Transaction"}),e.jsx(y.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"w-10 h-10 rounded-full bg-muted/50 flex items-center justify-center hover:bg-muted transition-colors",children:e.jsx(J,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain px-6 py-4",children:i})]})]})})),La=["#22c55e","#3b82f6","#f59e0b","#ec4899","#8b5cf6","#06b6d4"],Oa=(t,a)=>({id:t,x:Math.random()*100,y:-10-Math.random()*20,rotation:Math.random()*360,scale:.5+Math.random()*.5,color:a[Math.floor(Math.random()*a.length)],shape:["circle","square","star"][Math.floor(Math.random()*3)]}),$a=({isActive:t,onComplete:a,duration:n=3e3,particleCount:i=50,colors:l=La})=>{const[h,s]=g.useState([]),d=g.useCallback(()=>{const r=Array.from({length:i},(x,b)=>Oa(b,l));s(r),setTimeout(()=>{s([]),a?.()},n)},[i,l,n,a]);g.useEffect(()=>{t&&d()},[t,d]);const o=r=>{const x=10*r.scale;switch(r.shape){case"circle":return e.jsx("div",{className:"rounded-full",style:{width:x,height:x,backgroundColor:r.color}});case"square":return e.jsx("div",{className:"rounded-sm",style:{width:x,height:x,backgroundColor:r.color}});case"star":return e.jsx("div",{style:{fontSize:x,color:r.color},children:"âœ¦"});default:return null}};return e.jsx("div",{className:"fixed inset-0 z-[100] pointer-events-none overflow-hidden",children:e.jsx(G,{children:h.map(r=>e.jsx(y.div,{initial:{x:`${r.x}vw`,y:`${r.y}vh`,rotate:r.rotation,opacity:1},animate:{y:"110vh",rotate:r.rotation+Math.random()*720,opacity:[1,1,0]},exit:{opacity:0},transition:{duration:2+Math.random()*2,ease:[.25,.46,.45,.94]},className:"absolute",children:o(r)},r.id))})})},Ga=({isVisible:t,title:a,subtitle:n,emoji:i="ðŸŽ‰",onClose:l})=>(g.useEffect(()=>{if(t&&l){const h=setTimeout(l,4e3);return()=>clearTimeout(h)}},[t,l]),e.jsx(G,{children:t&&e.jsx(y.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-20},transition:{type:"spring",damping:20,stiffness:300},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[101] pointer-events-none",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-xl rounded-3xl px-8 py-6 shadow-2xl border border-border/50 text-center",children:[e.jsx(y.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring"},className:"text-6xl mb-4",children:i}),e.jsx(y.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-2xl font-bold mb-2",children:a}),n&&e.jsx(y.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-muted-foreground",children:n})]})})})),Mt=({isOpen:t,onClose:a,title:n,children:i,className:l,showHandle:h=!0})=>{const s=ga();g.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]);const d=(o,r)=>{(r.velocity.y>500||r.offset.y>200)&&a()};return e.jsx(G,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:a,className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm"}),e.jsxs(y.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},drag:"y",dragControls:s,dragConstraints:{top:0},dragElastic:{top:0,bottom:.2},onDragEnd:d,className:j("fixed bottom-0 left-0 right-0 z-50","bg-background","rounded-t-[32px]","shadow-2xl","max-h-[90vh]","flex flex-col",l),children:[h&&e.jsx("div",{onPointerDown:o=>s.start(o),className:"flex justify-center pt-3 pb-2 cursor-grab active:cursor-grabbing touch-none",children:e.jsx("div",{className:"w-10 h-1 rounded-full bg-muted-foreground/30"})}),n&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-b border-border/50",children:[e.jsx("h2",{className:"text-lg font-semibold",children:n}),e.jsx("button",{onClick:a,title:"Close",className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center hover:bg-muted/80 transition-colors",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain px-6 py-4",children:i}),e.jsx("div",{className:"h-safe-area-inset-bottom"})]})]})})},Wa=[{value:"fixed",label:"Fixed"},{value:"variable",label:"Variable"},{value:"emergency",label:"Emergency"}],qa=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"bi-weekly",label:"Bi-weekly"},{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"yearly",label:"Yearly"}],Ua=({isOpen:t,onClose:a,onSubmit:n,accounts:i,categories:l,defaultCurrency:h})=>{const[s,d]=g.useState({title:"",amount:0,currency:h,categoryId:l[0]?.id||"",accountId:i.find(w=>w.isDefault)?.id||i[0]?.id||"",type:"variable",paymentMethod:"card",date:new Date().toISOString().split("T")[0],isRecurring:!1,tags:[],notes:""}),[o,r]=g.useState("amount"),[x,b]=g.useState(!1),[N,D]=g.useState(!0),A=g.useRef(null);g.useEffect(()=>{t&&(d({title:"",amount:0,currency:h,categoryId:l[0]?.id||"",accountId:i.find(w=>w.isDefault)?.id||i[0]?.id||"",type:"variable",paymentMethod:"card",date:new Date().toISOString().split("T")[0],isRecurring:!1,tags:[],notes:""}),r("amount"))},[t,h,l,i]);const k=()=>{const w=A.current;if(!w)return;const{scrollLeft:p,scrollWidth:R,clientWidth:S}=w;b(p>0),D(p<R-S-1)},u=w=>{const p=A.current;if(!p)return;const R=200;p.scrollBy({left:w==="left"?-R:R,behavior:"smooth"})};g.useEffect(()=>{const w=A.current;if(w){const p=setTimeout(()=>{k()},100);return w.addEventListener("scroll",k),window.addEventListener("resize",k),()=>{clearTimeout(p),w.removeEventListener("scroll",k),window.removeEventListener("resize",k)}}},[l,t]);const v=()=>{!s.title||s.amount<=0||!s.categoryId||!s.accountId||(n(s),a())},f=l.find(w=>w.id===s.categoryId),I=i.find(w=>w.id===s.accountId);return e.jsx(G,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),e.jsx(y.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},onClick:w=>w.stopPropagation(),className:"fixed inset-x-4 top-[10%] md:inset-x-auto md:left-1/2 md:-translate-x-1/2 md:w-full md:max-w-lg z-[51]",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-xl border border-border/50 rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-red-700/20 flex items-center justify-center",children:e.jsx($t,{className:"w-5 h-5 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Add Expense"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o==="amount"?"Enter amount":"Add details"})]})]}),e.jsx("button",{onClick:a,title:"Close",className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center hover:bg-muted/80 transition-colors",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"p-4 space-y-4 max-h-[70vh] overflow-y-auto",children:o==="amount"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-6",children:[e.jsxs("div",{className:"text-4xl font-bold text-red-500 mb-2 flex justify-center items-center",children:[e.jsx("span",{className:"text-2xl text-muted-foreground",children:s.currency}),e.jsx("input",{type:"number",value:s.amount||"",onChange:w=>d(p=>({...p,amount:parseFloat(w.target.value)||0})),placeholder:"0.00",className:"bg-transparent text-center outline-none text-4xl font-bold min-w-[3ch] max-w-full",style:{width:`${Math.max(3,String(s.amount||"0.00").length+1)}ch`},autoFocus:!0})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"How much did you spend?"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-2 block",children:"Category"}),e.jsxs("div",{className:"relative ",children:[x&&e.jsx("button",{type:"button",onClick:()=>u("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-20 w-8 h-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center hover:bg-primary/80 transition-colors shadow-lg",children:e.jsx(at,{className:"w-5 h-5"})}),N&&e.jsx("button",{type:"button",onClick:()=>u("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-20 w-8 h-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center hover:bg-primary/80 transition-colors shadow-lg",children:e.jsx(nt,{className:"w-5 h-5"})}),x&&e.jsx("div",{className:"absolute left-10 top-0 bottom-0 w-6 bg-gradient-to-r from-background to-transparent z-10 pointer-events-none"}),N&&e.jsx("div",{className:"absolute right-10 top-0 bottom-0 w-6 bg-gradient-to-l from-background to-transparent z-10 pointer-events-none"}),e.jsx("div",{ref:A,className:"grid gap-2 pt-2 overflow-x-auto pb-3 px-1 max-h-[190px] ",style:{gridAutoFlow:"column",gridTemplateRows:"repeat(2, minmax(0, 1fr))",gridAutoColumns:"90px"},children:l.map(w=>e.jsxs("button",{onClick:()=>d(p=>({...p,categoryId:w.id})),className:j("flex flex-col items-center gap-1 p-3 rounded-2xl transition-all",s.categoryId===w.id?"bg-red-300/20 ring-2 ring-red-500":"bg-muted/50 hover:bg-muted"),children:[e.jsx("span",{className:"text-xl",children:w.icon}),e.jsx("span",{className:"text-xs truncate w-full text-center",children:w.name})]},w.id))})]})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-2 block",children:"From Account"}),e.jsx("div",{className:" py-5 px-1 flex gap-2 overflow-x-auto pb-2",children:i.filter(w=>w.isActive).map(w=>e.jsxs("button",{onClick:()=>d(p=>({...p,accountId:w.id})),className:j("flex items-center gap-2 px-4 py-2 rounded-xl whitespace-nowrap transition-all",s.accountId===w.id?"bg-red-300/20 ring-2 ring-red-500":"bg-muted/50 hover:bg-muted"),children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:w.color}}),e.jsx("span",{className:"text-sm font-medium",children:w.name})]},w.id))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs(z,{className:"text-xs text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(Vt,{className:"w-3 h-3"}),"Title"]}),e.jsx(U,{value:s.title,onChange:w=>d(p=>({...p,title:w.target.value})),placeholder:"What was this for?",className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsxs(z,{className:"text-xs text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(se,{className:"w-3 h-3"}),"Date"]}),e.jsx(U,{type:"date",value:s.date,onChange:w=>d(p=>({...p,date:w.target.value})),className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-2 block",children:"Type"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Wa.map(w=>e.jsx("button",{onClick:()=>d(p=>({...p,type:w.value})),className:j("px-3 py-1.5 rounded-lg text-sm transition-all",s.type===w.value?"bg-red-500 text-white":"bg-muted/50 hover:bg-muted"),children:w.label},w.value))})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Recurring expense"})]}),e.jsx("button",{onClick:()=>d(w=>({...w,isRecurring:!w.isRecurring})),className:j("w-12 h-6 rounded-full transition-all",s.isRecurring?"bg-red-500":"bg-muted"),children:e.jsx("div",{className:j("w-5 h-5 rounded-full bg-white shadow-md transition-transform",s.isRecurring?"translate-x-6":"translate-x-0.5")})})]}),s.isRecurring&&e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-2 block",children:"Frequency"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:qa.map(w=>e.jsx("button",{onClick:()=>d(p=>({...p,recurringFrequency:w.value})),className:j("px-3 py-1.5 rounded-lg text-sm transition-all",s.recurringFrequency===w.value?"bg-red-500 text-white":"bg-muted/50 hover:bg-muted"),children:w.label},w.value))})]}),e.jsxs("div",{children:[e.jsxs(z,{className:"text-xs text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(lt,{className:"w-3 h-3"}),"Notes (optional)"]}),e.jsx(rt,{value:s.notes||"",onChange:w=>d(p=>({...p,notes:w.target.value})),placeholder:"Add any notes...",className:"rounded-xl min-h-[80px]"})]})]})}),e.jsx("div",{className:"p-4 border-t border-border/50 flex gap-3",children:o==="amount"?e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"outline",onClick:a,className:"flex-1 rounded-xl",children:"Cancel"}),e.jsx(M,{onClick:()=>r("details"),disabled:s.amount<=0||!s.categoryId,className:"flex-1 rounded-xl bg-red-500 hover:bg-red-600",children:"Continue"})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"outline",onClick:()=>r("amount"),className:"flex-1 rounded-xl",children:"Back"}),e.jsx(M,{onClick:v,disabled:!s.title,className:"flex-1 rounded-xl bg-red-500 hover:bg-red-600",children:"Add Expense"})]})}),s.amount>0&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-500/10 rounded-xl text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[f&&e.jsx("span",{children:f.icon}),e.jsx("span",{className:"text-muted-foreground",children:f?.name||"Select category"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[I&&e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:I.color}}),e.jsxs("span",{className:"font-semibold text-red-500",children:["-",s.currency," ",s.amount.toFixed(2)]})]})]})})]})})]})})},Rt=[{value:"fixed",label:"Fixed",icon:"ðŸ“Œ"},{value:"variable",label:"Variable",icon:"ðŸ“Š"},{value:"emergency",label:"Emergency",icon:"ðŸš¨"}],Va=[{value:"received",label:"Received"},{value:"pending",label:"Pending"},{value:"expected",label:"Expected"}],Ya=[{value:"weekly",label:"Weekly"},{value:"bi-weekly",label:"Bi-Weekly"},{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"yearly",label:"Yearly"},{value:"one-time",label:"One-Time"}],Ha=({isOpen:t,onClose:a,onSubmit:n,accounts:i,incomeCategories:l,defaultCurrency:h})=>{const[s,d]=g.useState({title:"",amount:0,currency:h,accountId:i.find(p=>p.isDefault)?.id||i[0]?.id||"",categoryId:l[0]?.id||"",type:"variable",status:"received",frequency:"one-time",actualDate:new Date().toISOString().split("T")[0],expectedDate:new Date().toISOString().split("T")[0],isRecurring:!1,tags:[],notes:""}),[o,r]=g.useState("amount"),[x,b]=g.useState(!1),[N,D]=g.useState(!0),A=g.useRef(null);g.useEffect(()=>{t&&(d({title:"",amount:0,currency:h,accountId:i.find(p=>p.isDefault)?.id||i[0]?.id||"",categoryId:l[0]?.id||"",type:"variable",status:"received",frequency:"one-time",actualDate:new Date().toISOString().split("T")[0],expectedDate:new Date().toISOString().split("T")[0],isRecurring:!1,tags:[],notes:""}),r("amount"))},[t,h,i,l]);const k=()=>{const p=A.current;if(!p)return;const{scrollLeft:R,scrollWidth:S,clientWidth:P}=p;b(R>0),D(R<S-P-1)},u=p=>{const R=A.current;if(!R)return;const S=200;R.scrollBy({left:p==="left"?-S:S,behavior:"smooth"})};g.useEffect(()=>{const p=A.current;if(p){const R=setTimeout(()=>{k()},100);return p.addEventListener("scroll",k),window.addEventListener("resize",k),()=>{clearTimeout(R),p.removeEventListener("scroll",k),window.removeEventListener("resize",k)}}},[l,t]);const v=()=>{!s.title||s.amount<=0||!s.accountId||(n(s),a())},f=i.find(p=>p.id===s.accountId),I=Rt.find(p=>p.value===s.type),w=l.find(p=>p.id===s.categoryId);return e.jsx(G,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),e.jsx(y.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},onClick:p=>p.stopPropagation(),className:"fixed inset-x-4 top-[10%] md:inset-x-auto md:left-1/2 md:-translate-x-1/2 md:w-full md:max-w-lg z-[51]",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-xl border border-border/50 rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-500/20 flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Add Income"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o==="amount"?"Enter amount":"Add details"})]})]}),e.jsx("button",{onClick:a,title:"Close",className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center hover:bg-muted/80 transition-colors",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"p-4 space-y-4 max-h-[70vh] overflow-y-auto",children:o==="amount"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-6",children:[e.jsxs("div",{className:"text-4xl font-bold text-emerald-500 mb-2 flex justify-center items-center",children:[e.jsx("span",{className:"text-2xl text-muted-foreground",children:s.currency}),e.jsx("input",{type:"number",value:s.amount||"",onChange:p=>d(R=>({...R,amount:parseFloat(p.target.value)||0})),placeholder:"0.00",className:"bg-transparent text-center outline-none text-4xl font-bold min-w-[3ch] max-w-full",style:{width:`${Math.max(3,String(s.amount||"0.00").length+1)}ch`},autoFocus:!0})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"How much did you earn?"})]}),l.length>0&&e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-2 block",children:"Category"}),e.jsxs("div",{className:"relative ",children:[x&&e.jsx("button",{type:"button",onClick:()=>u("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-20 w-8 h-8 rounded-full bg-emerald-500 text-white flex items-center justify-center hover:bg-emerald-600 transition-colors shadow-lg",children:e.jsx(at,{className:"w-5 h-5"})}),N&&e.jsx("button",{type:"button",onClick:()=>u("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-20 w-8 h-8 rounded-full bg-emerald-500 text-white flex items-center justify-center hover:bg-emerald-600 transition-colors shadow-lg",children:e.jsx(nt,{className:"w-5 h-5"})}),x&&e.jsx("div",{className:"absolute left-10 top-0 bottom-0 w-6 bg-gradient-to-r from-background to-transparent z-10 pointer-events-none"}),N&&e.jsx("div",{className:"absolute right-10 top-0 bottom-0 w-6 bg-gradient-to-l from-background to-transparent z-10 pointer-events-none"}),e.jsx("div",{ref:A,className:"grid gap-2 overflow-x-auto pb-2 pt-3 px-1 max-h-[190px]",style:{gridAutoFlow:"column",gridTemplateRows:"repeat(2, minmax(0, 1fr))",gridAutoColumns:"90px"},children:l.map(p=>e.jsxs("button",{onClick:()=>d(R=>({...R,categoryId:p.id})),className:j("flex flex-col items-center gap-1 p-3 rounded-2xl transition-all",s.categoryId===p.id?"bg-emerald-500/20 ring-2 ring-emerald-500":"bg-muted/50 hover:bg-muted"),children:[e.jsx("span",{className:"text-xl",children:p.icon}),e.jsx("span",{className:"text-xs truncate w-full text-center",children:p.name})]},p.id))})]})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-2 block",children:"To Account"}),e.jsx("div",{className:"py-5 px-1 flex gap-2 overflow-x-auto",children:i.filter(p=>p.isActive).map(p=>e.jsxs("button",{onClick:()=>d(R=>({...R,accountId:p.id})),className:j("flex items-center gap-2 px-4 py-2 rounded-xl whitespace-nowrap transition-all",s.accountId===p.id?"bg-emerald-500/20 ring-2 ring-emerald-500":"bg-muted/50 hover:bg-muted"),children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:p.color}}),e.jsx("span",{className:"text-sm font-medium",children:p.name})]},p.id))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs(z,{className:"text-xs text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(Vt,{className:"w-3 h-3"}),"Title"]}),e.jsx(U,{value:s.title,onChange:p=>d(R=>({...R,title:p.target.value})),placeholder:"What is this income from?",className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-2 block",children:"Status"}),e.jsx("div",{className:"flex gap-2",children:Va.map(p=>e.jsx("button",{onClick:()=>d(R=>({...R,status:p.value})),className:j("flex-1 px-3 py-2 rounded-xl text-sm transition-all",s.status===p.value?"bg-emerald-500 text-white":"bg-muted/50 hover:bg-muted"),children:p.label},p.value))})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-2 block",children:"Transaction Type"}),e.jsx("div",{className:"flex gap-2",children:Rt.map(p=>e.jsxs("button",{onClick:()=>d(R=>({...R,type:p.value})),className:j("flex-1 px-3 py-2 rounded-xl text-sm transition-all flex items-center justify-center gap-1",s.type===p.value?"bg-emerald-500 text-white":"bg-muted/50 hover:bg-muted"),children:[e.jsx("span",{children:p.icon}),p.label]},p.value))})]}),e.jsxs("div",{children:[e.jsxs(z,{className:"text-xs text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(se,{className:"w-3 h-3"}),s.status==="received"?"Date Received":"Expected Date"]}),e.jsx(U,{type:"date",value:s.status==="received"?s.actualDate||"":s.expectedDate||"",onChange:p=>d(R=>({...R,[s.status==="received"?"actualDate":"expectedDate"]:p.target.value})),className:"rounded-xl"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Recurring income"})]}),e.jsx("button",{onClick:()=>d(p=>({...p,isRecurring:!p.isRecurring,frequency:p.isRecurring?"one-time":"monthly"})),className:j("w-12 h-6 rounded-full transition-all",s.isRecurring?"bg-emerald-500":"bg-muted"),children:e.jsx("div",{className:j("w-5 h-5 rounded-full bg-white shadow-md transition-transform",s.isRecurring?"translate-x-6":"translate-x-0.5")})})]}),s.isRecurring&&e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-2 block",children:"Repeat Every"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Ya.map(p=>e.jsx("button",{onClick:()=>d(R=>({...R,frequency:p.value})),className:j("px-3 py-1.5 rounded-lg text-sm transition-all",s.frequency===p.value?"bg-emerald-500 text-white":"bg-muted/50 hover:bg-muted"),children:p.label},p.value))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"A new income will be created automatically on schedule"})]}),e.jsxs("div",{children:[e.jsxs(z,{className:"text-xs text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(lt,{className:"w-3 h-3"}),"Notes (optional)"]}),e.jsx(rt,{value:s.notes||"",onChange:p=>d(R=>({...R,notes:p.target.value})),placeholder:"Add any notes...",className:"rounded-xl min-h-[80px]"})]})]})}),e.jsx("div",{className:"p-4 border-t border-border/50 flex gap-3",children:o==="amount"?e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"outline",onClick:a,className:"flex-1 rounded-xl",children:"Cancel"}),e.jsx(M,{onClick:()=>r("details"),disabled:s.amount<=0||!s.accountId,className:"flex-1 rounded-xl bg-emerald-500 hover:bg-emerald-600",children:"Continue"})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"outline",onClick:()=>r("amount"),className:"flex-1 rounded-xl",children:"Back"}),e.jsx(M,{onClick:v,disabled:!s.title,className:"flex-1 rounded-xl bg-emerald-500 hover:bg-emerald-600",children:"Add Income"})]})}),s.amount>0&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-500/10 rounded-xl text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[w&&e.jsx("span",{children:w.icon}),e.jsx("span",{className:"text-muted-foreground",children:w?.name||"Income"}),I&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-emerald-500/20",children:I.label})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[f&&e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:f.color}}),e.jsxs("span",{className:"font-semibold text-emerald-500",children:["+",s.currency," ",s.amount.toFixed(2)]})]})]})})]})})]})})},_a=({isOpen:t,onClose:a,onSubmit:n,accounts:i,defaultCurrency:l,calculateBalance:h,formatCurrency:s})=>{const d=i.filter(f=>f.isActive),[o,r]=g.useState({fromAccountId:d[0]?.id||"",toAccountId:d[1]?.id||"",amount:0,date:new Date().toISOString().split("T")[0],notes:""}),[x,b]=g.useState(!1);g.useEffect(()=>{if(t){const f=i.filter(I=>I.isActive);r({fromAccountId:f[0]?.id||"",toAccountId:f[1]?.id||"",amount:0,date:new Date().toISOString().split("T")[0],notes:""}),b(!1)}},[t]);const N=async()=>{!o.fromAccountId||!o.toAccountId||o.amount<=0||o.fromAccountId!==o.toAccountId&&(b(!0),await new Promise(f=>setTimeout(f,800)),n(o),a())},D=i.find(f=>f.id===o.fromAccountId),A=i.find(f=>f.id===o.toAccountId),k=D?h(D.id):0,u=A?h(A.id):0,v=o.fromAccountId&&o.toAccountId&&o.fromAccountId!==o.toAccountId&&o.amount>0&&o.amount<=k;return e.jsx(G,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),e.jsx(y.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},onClick:f=>f.stopPropagation(),className:"fixed inset-x-4 top-[10%] md:inset-x-auto md:left-1/2 md:-translate-x-1/2 md:w-full md:max-w-lg z-[51]",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-xl border border-border/50 rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-blue-500/20 flex items-center justify-center",children:e.jsx(tt,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Transfer Money"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Move money between accounts"})]})]}),e.jsx("button",{onClick:a,title:"Close",className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center hover:bg-muted/80 transition-colors",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsxs("div",{className:"text-4xl font-bold text-blue-500 mb-2",children:[e.jsx("span",{className:"text-2xl text-muted-foreground mr-1",children:l}),e.jsx("input",{type:"number",value:o.amount||"",onChange:f=>r(I=>({...I,amount:parseFloat(f.target.value)||0})),placeholder:"0.00",className:"bg-transparent text-center w-40 outline-none text-4xl font-bold",autoFocus:!0})]}),D&&o.amount>k&&e.jsxs("p",{className:"text-sm text-rose-500",children:["Insufficient balance (Available:"," ",s(k),")"]})]}),e.jsxs("div",{className:"relative flex items-center justify-center gap-4 py-6",children:[e.jsxs(y.div,{animate:x?{scale:.95}:{scale:1},className:j("flex-1 p-4 rounded-2xl border-2 transition-all",o.fromAccountId?"border-blue-500/50 bg-blue-500/10":"border-dashed border-muted-foreground/30"),children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-2 block",children:"From"}),e.jsxs("select",{value:o.fromAccountId,onChange:f=>r(I=>({...I,fromAccountId:f.target.value})),className:"w-full bg-transparent text-sm font-medium outline-none cursor-pointer",children:[e.jsx("option",{value:"",children:"Select account"}),d.map(f=>e.jsx("option",{value:f.id,disabled:f.id===o.toAccountId,children:f.name},f.id))]}),D&&e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:D.color}}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s(k)})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(y.button,{type:"button",onClick:()=>{r(f=>({...f,fromAccountId:f.toAccountId,toAccountId:f.fromAccountId}))},whileHover:{scale:1.1},whileTap:{scale:.95},animate:x?{x:[0,20,40,60],opacity:[1,1,1,0]}:{},transition:{duration:.6,ease:"easeOut"},className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center cursor-pointer hover:bg-blue-600 transition-colors",children:e.jsx(tt,{className:"w-5 h-5 text-white"})}),x&&e.jsx(e.Fragment,{children:[...Array(5)].map((f,I)=>e.jsx(y.div,{initial:{x:0,opacity:0,scale:0},animate:{x:[0,30,60],opacity:[0,1,0],scale:[.5,1,.5]},transition:{duration:.6,delay:I*.08,ease:"easeOut"},className:"absolute top-1/2 left-1/2 -translate-y-1/2 w-2 h-2 rounded-full bg-blue-400"},I))})]}),e.jsxs(y.div,{animate:x?{scale:1.05}:{scale:1},className:j("flex-1 p-4 rounded-2xl border-2 transition-all",o.toAccountId?"border-blue-500/50 bg-blue-500/10":"border-dashed border-muted-foreground/30"),children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-2 block",children:"To"}),e.jsxs("select",{value:o.toAccountId,onChange:f=>r(I=>({...I,toAccountId:f.target.value})),className:"w-full bg-transparent text-sm font-medium outline-none cursor-pointer",children:[e.jsx("option",{value:"",children:"Select account"}),d.map(f=>e.jsx("option",{value:f.id,disabled:f.id===o.fromAccountId,children:f.name},f.id))]}),A&&e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:A.color}}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s(u)})]})]})]}),e.jsxs("div",{children:[e.jsxs(z,{className:"text-xs text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(se,{className:"w-3 h-3"}),"Date"]}),e.jsx(U,{type:"date",value:o.date,onChange:f=>r(I=>({...I,date:f.target.value})),className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsxs(z,{className:"text-xs text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(lt,{className:"w-3 h-3"}),"Notes (optional)"]}),e.jsx(rt,{value:o.notes||"",onChange:f=>r(I=>({...I,notes:f.target.value})),placeholder:"Add any notes...",className:"rounded-xl min-h-[60px]"})]})]}),e.jsxs("div",{className:"p-4 border-t border-border/50 flex gap-3",children:[e.jsx(M,{variant:"outline",onClick:a,className:"flex-1 rounded-xl",disabled:x,children:"Cancel"}),e.jsx(M,{onClick:N,disabled:!v||x,className:"flex-1 rounded-xl bg-blue-500 hover:bg-blue-600",children:x?e.jsx(y.span,{animate:{opacity:[1,.5,1]},transition:{repeat:1/0,duration:1},children:"Transferring..."}):"Transfer"})]}),v&&!x&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"p-3 bg-blue-500/10 rounded-xl text-sm text-center",children:[e.jsx("span",{className:"text-muted-foreground",children:D?.name}),e.jsx("span",{className:"mx-2 text-blue-500",children:"â†’"}),e.jsx("span",{className:"text-muted-foreground",children:A?.name}),e.jsxs("span",{className:"ml-2 font-semibold text-blue-500",children:[l," ",o.amount.toFixed(2)]})]})})]})})]})})},Qa=({isOpen:t,onClose:a,budgetOverview:n,categories:i,formatCurrency:l,onSave:h,currentMonth:s})=>{const[d,o]=g.useState({}),[r,x]=g.useState(!1);g.useEffect(()=>{if(t){const u={};i.forEach(v=>{const f=n?.categoryBudgets?.find(I=>I.categoryId===v.id);u[v.id]=f?.planned??(v.monthlyBudget||0)}),o(u),x(!1)}},[t,i,n]);const b=g.useMemo(()=>{const u=Object.values(d).reduce((f,I)=>f+I,0),v=n?.totalActualExpenses??0;return{totalPlanned:u,totalSpent:v}},[d,n?.totalActualExpenses]),N=(u,v)=>{const f=parseFloat(v)||0;o(I=>({...I,[u]:f})),x(!0)},D=()=>{const u={};i.forEach(v=>{u[v.id]=0}),o(u),x(!0)},A=()=>{const u=Object.entries(d).map(([v,f])=>({categoryId:v,planned:f}));h(u),a()},k=g.useMemo(()=>{const[u,v]=s.split("-");return new Date(parseInt(u),parseInt(v)-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})},[s]);return t?e.jsx(G,{children:e.jsxs(y.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(y.div,{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),e.jsxs(y.div,{className:"relative w-full max-w-lg max-h-[85vh] overflow-hidden rounded-2xl bg-background border border-white/10 shadow-2xl",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:25,stiffness:300},children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between p-4 border-b border-white/10 bg-background/95 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-violet-500/20",children:e.jsx(de,{className:"w-5 h-5 text-violet-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg",children:"Budget Planning"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:k})]})]}),e.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-white/10 transition-colors",title:"Close budget modal",children:e.jsx(J,{className:"w-5 h-5 text-muted-foreground"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto max-h-[calc(85vh-140px)]",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsxs("div",{className:"p-3 rounded-xl bg-violet-500/10 border border-violet-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ae,{className:"w-4 h-4 text-violet-400"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Total Budget"})]}),e.jsx("p",{className:"text-lg font-bold text-violet-400",children:l(b.totalPlanned)})]}),e.jsxs("div",{className:j("p-3 rounded-xl border",b.totalSpent>b.totalPlanned&&b.totalPlanned>0?"bg-red-500/10 border-red-500/20":"bg-emerald-500/10 border-emerald-500/20"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(de,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Spent"})]}),e.jsx("p",{className:j("text-lg font-bold",b.totalSpent>b.totalPlanned&&b.totalPlanned>0?"text-red-400":"text-emerald-400"),children:l(b.totalSpent)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Category Budgets"}),e.jsxs("button",{onClick:D,className:"flex items-center gap-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Vs,{className:"w-3 h-3"}),"Reset All"]})]}),i.map(u=>{const v=n?.categoryBudgets?.find(p=>p.categoryId===u.id)?.spent||0,f=d[u.id]||0,I=f>0?v/f*100:0,w=v>f&&f>0;return e.jsxs(y.div,{className:"p-3 rounded-xl bg-white/5 border border-white/5",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:u.icon}),e.jsx("span",{className:"font-medium text-sm",children:u.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:j("text-xs",w?"text-red-400":"text-muted-foreground"),children:["Spent:"," ",l(v)]}),w&&e.jsx(Ys,{className:"w-3.5 h-3.5 text-red-400"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{type:"number",value:d[u.id]||"",onChange:p=>N(u.id,p.target.value),placeholder:"0",min:"0",step:"10",className:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 focus:border-violet-500/50 focus:outline-none text-sm"})}),f>0&&e.jsxs("span",{className:j("text-xs font-medium min-w-[50px] text-right",I>=100?"text-red-400":I>=80?"text-amber-400":"text-emerald-400"),children:[I.toFixed(0),"%"]})]}),f>0&&e.jsx("div",{className:"mt-2 h-1 bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:j("h-full rounded-full transition-all",I>=100?"bg-red-500":I>=80?"bg-amber-500":"bg-emerald-500"),style:{width:`${Math.min(I,100)}%`}})})]},u.id)})]})]}),e.jsxs("div",{className:"sticky bottom-0 flex items-center justify-between gap-3 p-4 border-t border-white/10 bg-background/95 backdrop-blur-sm",children:[e.jsx(M,{variant:"ghost",onClick:a,className:"flex-1",children:"Cancel"}),e.jsxs(M,{onClick:A,className:"flex-1 bg-violet-600 hover:bg-violet-700",disabled:!r,children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Save Budget"]})]})]})]})}):null},Ze=[{value:"cash",label:"Cash",icon:e.jsx(de,{className:"w-4 h-4"})},{value:"bank",label:"Bank",icon:e.jsx(_s,{className:"w-4 h-4"})},{value:"mobile-wallet",label:"Mobile Wallet",icon:e.jsx(Ut,{className:"w-4 h-4"})},{value:"credit-card",label:"Credit Card",icon:e.jsx(qt,{className:"w-4 h-4"})},{value:"savings",label:"Savings",icon:e.jsx(Wt,{className:"w-4 h-4"})},{value:"investment",label:"Investment",icon:e.jsx(ae,{className:"w-4 h-4"})}],ee=["#3b82f6","#10b981","#8b5cf6","#f59e0b","#ec4899","#06b6d4","#f97316","#84cc16","#6366f1","#14b8a6"],Ja=["#fca5a5","#f87171","#ef4444","#dc2626","#b91c1c","#991b1b","#fdba74","#fb923c","#f97316","#ea580c","#c2410c","#9a3412","#fcd34d","#fbbf24","#f59e0b","#d97706","#b45309","#92400e","#86efac","#4ade80","#22c55e","#16a34a","#15803d","#166534","#5eead4","#2dd4bf","#14b8a6","#0d9488","#0f766e","#115e59","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8","#1e40af","#c4b5fd","#a78bfa","#8b5cf6","#7c3aed","#6d28d9","#5b21b6","#f9a8d4","#f472b6","#ec4899","#db2777","#be185d","#9d174d","#d1d5db","#9ca3af","#6b7280","#4b5563","#374151","#1f2937"],Ka=["ðŸ’³","ðŸ¦","ðŸ’°","ðŸ’µ","ðŸ“±","ðŸ§","ðŸ’Ž","ðŸª™"],Ft=({accounts:t,onAddAccount:a,onUpdateAccount:n,onDeleteAccount:i,hasTransactions:l,defaultCurrency:h,formatCurrency:s,calculateBalance:d})=>{const[o,r]=g.useState(!1),[x,b]=g.useState(null),[N,D]=g.useState(null),[A,k]=g.useState(null),[u,v]=g.useState({name:"",type:"bank",color:ee[0],icon:"ðŸ’³",initialBalance:0,currency:h,isDefault:!1}),[f,I]=g.useState({}),w=()=>{u.name.trim()&&(a({name:u.name,type:u.type,color:u.color,icon:u.icon,initialBalance:u.initialBalance,currency:u.currency,isDefault:u.isDefault||t.length===0,isActive:!0,order:t.length}),v({name:"",type:"bank",color:ee[0],icon:"ðŸ’³",initialBalance:0,currency:h,isDefault:!1}),r(!1))},p=c=>{b(c.id),I({name:c.name,type:c.type,color:c.color,icon:c.icon,isDefault:c.isDefault})},R=c=>{f.name?.trim()&&n(c,f),b(null),I({})},S=c=>{l(c)?n(c,{isActive:!1}):i(c),D(null)},P=c=>Ze.find(E=>E.value===c)?.icon||e.jsx(de,{className:"w-4 h-4"});return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:t.map(c=>{const E=x===c.id,K=d(c.id);return e.jsx(y.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:j("relative overflow-hidden rounded-2xl p-4 transition-all",!c.isActive&&"opacity-60"),style:{background:`linear-gradient(135deg, ${c.color}20 0%, ${c.color}10 100%)`,borderLeft:`4px solid ${c.color}`},children:E?e.jsxs("div",{className:"space-y-3",children:[e.jsx(U,{value:f.name||"",onChange:W=>I(Z=>({...Z,name:W.target.value})),placeholder:"Account name",className:"rounded-lg bg-background/50",autoFocus:!0}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Ze.map(W=>e.jsxs("button",{onClick:()=>I(Z=>({...Z,type:W.value})),className:j("flex items-center gap-1.5 px-2 py-1 rounded-lg text-xs transition-all",f.type===W.value?"bg-primary text-primary-foreground":"bg-muted/50 hover:bg-muted"),children:[W.icon,W.label]},W.value))}),e.jsxs("div",{className:"flex gap-1 flex-wrap items-center",children:[ee.map(W=>e.jsx("button",{onClick:()=>I(Z=>({...Z,color:W})),className:j("w-6 h-6 rounded-full transition-all",f.color===W&&"ring-2 ring-offset-2 ring-offset-background"),style:{backgroundColor:W}},W)),e.jsx("button",{onClick:()=>k("edit"),className:j("w-6 h-6 rounded-full transition-all border-2 border-dashed border-muted-foreground/50 flex items-center justify-center text-muted-foreground hover:border-primary hover:text-primary",f.color&&!ee.includes(f.color)&&"ring-2 ring-offset-2 ring-offset-background ring-primary"),style:{backgroundColor:f.color&&!ee.includes(f.color)?f.color:void 0},title:"More colors",children:e.jsx(H,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{size:"sm",variant:"ghost",onClick:()=>b(null),className:"flex-1",children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),"Cancel"]}),e.jsxs(M,{size:"sm",onClick:()=>R(c.id),className:"flex-1",children:[e.jsx(Ht,{className:"w-4 h-4 mr-1"}),"Save"]})]})]}):N===c.id?e.jsxs("div",{className:"text-center py-2",children:[e.jsx("p",{className:"text-sm mb-3",children:l(c.id)?"This account has transactions. It will be archived.":"Delete this account?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>D(null),className:"flex-1",children:"Cancel"}),e.jsx(M,{size:"sm",variant:"destructive",onClick:()=>S(c.id),className:"flex-1",children:l(c.id)?"Archive":"Delete"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-xl",style:{backgroundColor:`${c.color}30`},children:c.icon}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:c.name}),c.isDefault&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-primary/20 text-primary",children:"Default"}),!c.isActive&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-muted text-muted-foreground",children:"Archived"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[P(c.type),e.jsx("span",{className:"capitalize",children:c.type.replace("-"," ")})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold tabular-nums",style:{color:K>=0?c.color:"#ef4444"},children:s(K)}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>p(c),title:"Edit account",className:"p-1.5 rounded-lg hover:bg-muted/50 transition-colors",children:e.jsx(_t,{className:"w-4 h-4 text-muted-foreground"})}),c.isActive?!c.isDefault&&e.jsx("button",{onClick:()=>D(c.id),title:l(c.id)?"Archive account":"Delete account",className:"p-1.5 rounded-lg hover:bg-muted/50 transition-colors",children:l(c.id)?e.jsx(wt,{className:"w-4 h-4 text-muted-foreground"}):e.jsx(Pe,{className:"w-4 h-4 text-muted-foreground"})}):e.jsx("button",{onClick:()=>n(c.id,{isActive:!0}),title:"Unarchive account",className:"p-1.5 rounded-lg hover:bg-emerald-500/20 hover:text-emerald-500 transition-colors",children:e.jsx(wt,{className:"w-4 h-4 text-muted-foreground"})})]})]})]})},c.id)})}),e.jsx(G,{children:o?e.jsx(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:e.jsxs("div",{className:"p-4 bg-muted/30 rounded-2xl border border-dashed border-border space-y-4",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"New Account"]}),e.jsxs("div",{className:"relative h-32 rounded-2xl p-4 overflow-hidden",style:{background:`linear-gradient(135deg, ${u.color} 0%, ${u.color}cc 100%)`},children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsxs("div",{className:"relative text-white",children:[e.jsx("div",{className:"text-2xl mb-2",children:u.icon}),e.jsx("div",{className:"font-medium",children:u.name||"Account Name"}),e.jsx("div",{className:"text-sm opacity-75 capitalize",children:u.type.replace("-"," ")})]})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-1 block",children:"Name"}),e.jsx(U,{value:u.name,onChange:c=>v(E=>({...E,name:c.target.value})),placeholder:"e.g., Main Bank, Vodafone Cash",className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-1 block",children:"Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Ze.map(c=>e.jsxs("button",{onClick:()=>v(E=>({...E,type:c.value})),className:j("flex items-center gap-2 p-2 rounded-xl text-sm transition-all",u.type===c.value?"bg-primary text-primary-foreground":"bg-muted/50 hover:bg-muted"),children:[c.icon,e.jsx("span",{className:"truncate",children:c.label})]},c.value))})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-1 block",children:"Color"}),e.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[ee.map(c=>e.jsx("button",{onClick:()=>v(E=>({...E,color:c})),className:j("w-8 h-8 rounded-full transition-all",u.color===c&&"ring-2 ring-offset-2 ring-offset-background"),style:{backgroundColor:c}},c)),e.jsx("button",{onClick:()=>k("new"),className:j("w-8 h-8 rounded-full transition-all border-2 border-dashed border-muted-foreground/50 flex items-center justify-center text-muted-foreground hover:border-primary hover:text-primary",!ee.includes(u.color)&&"ring-2 ring-offset-2 ring-offset-background ring-primary"),style:{backgroundColor:ee.includes(u.color)?void 0:u.color},title:"More colors",children:e.jsx(H,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-1 block",children:"Icon"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Ka.map(c=>e.jsx("button",{onClick:()=>v(E=>({...E,icon:c})),className:j("w-10 h-10 rounded-xl text-xl transition-all flex items-center justify-center",u.icon===c?"bg-primary/20 ring-2 ring-primary":"bg-muted/50 hover:bg-muted"),children:c},c))})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-1 block",children:"Initial Balance"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",children:u.currency}),e.jsx(U,{type:"number",value:u.initialBalance||"",onChange:c=>v(E=>({...E,initialBalance:parseFloat(c.target.value)||0})),placeholder:"0.00",className:"rounded-xl pl-14"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-xl",children:[e.jsx("span",{className:"text-sm",children:"Set as default account"}),e.jsx("button",{onClick:()=>v(c=>({...c,isDefault:!c.isDefault})),className:j("w-12 h-6 rounded-full transition-all",u.isDefault?"bg-primary":"bg-muted"),children:e.jsx("div",{className:j("w-5 h-5 rounded-full bg-white shadow-md transition-transform",u.isDefault?"translate-x-6":"translate-x-0.5")})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>r(!1),className:"flex-1 rounded-xl",children:"Cancel"}),e.jsx(M,{onClick:w,disabled:!u.name.trim(),className:"flex-1 rounded-xl",style:{backgroundColor:u.color},children:"Create Account"})]})]})}):e.jsxs(y.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>r(!0),className:"w-full p-4 rounded-2xl border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-primary/5 transition-all flex items-center justify-center gap-2 text-muted-foreground hover:text-primary",children:[e.jsx(H,{className:"w-5 h-5"}),"Add New Account"]})}),e.jsx(G,{children:A&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:()=>k(null),children:e.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},onClick:c=>c.stopPropagation(),className:"bg-background rounded-2xl p-6 shadow-2xl border border-border/50 max-w-sm w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Choose Color"}),e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl border-2 border-border overflow-hidden relative",style:{backgroundColor:A==="new"?u.color:f.color||"#3b82f6"},children:e.jsx("input",{type:"color",value:A==="new"?u.color:f.color||"#3b82f6",onChange:c=>{A==="new"?v(E=>({...E,color:c.target.value})):I(E=>({...E,color:c.target.value}))},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Custom Color"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Click to pick any color"})]}),e.jsx(M,{size:"sm",onClick:()=>k(null),className:"rounded-xl",children:"Done"})]}),e.jsxs("div",{className:"border-t border-border/50 pt-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Or choose from presets:"}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:Ja.map(c=>e.jsx("button",{onClick:()=>{A==="new"?v(E=>({...E,color:c})):I(E=>({...E,color:c})),k(null)},className:j("w-10 h-10 rounded-xl transition-all hover:scale-110",(A==="new"&&u.color===c||A==="edit"&&f.color===c)&&"ring-2 ring-offset-2 ring-offset-background ring-primary"),style:{backgroundColor:c}},c))})]})]})})})]})},Xa=[{id:"general",label:"General",icon:e.jsx(xe,{className:"w-4 h-4"})},{id:"accounts",label:"Accounts",icon:e.jsx(de,{className:"w-4 h-4"})},{id:"categories",label:"Categories",icon:e.jsx(Qs,{className:"w-4 h-4"})},{id:"alerts",label:"Alerts",icon:e.jsx(Qt,{className:"w-4 h-4"})},{id:"data",label:"Data",icon:e.jsx(Js,{className:"w-4 h-4"})}],Za=[{code:"EGP",name:"Egyptian Pound",symbol:"EÂ£"},{code:"USD",name:"US Dollar",symbol:"$"},{code:"EUR",name:"Euro",symbol:"â‚¬"},{code:"GBP",name:"British Pound",symbol:"Â£"},{code:"SAR",name:"Saudi Riyal",symbol:"ï·¼"},{code:"AED",name:"UAE Dirham",symbol:"Ø¯.Ø¥"}],en=({settings:t,onUpdateSettings:a,onExport:n,onImport:i,onResetData:l,accountsContent:h,categoriesContent:s})=>{const[d,o]=g.useState("general"),[r,x]=g.useState(!1),b=N=>{const D=N.target.files?.[0];if(D){const A=new FileReader;A.onload=k=>{try{const u=JSON.parse(k.target?.result);i(u)}catch{console.error("Invalid file format")}},A.readAsText(D)}};return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 h-full",children:[e.jsx("div",{className:"flex lg:flex-col gap-1 overflow-x-auto lg:overflow-visible pb-2 lg:pb-0 lg:w-48 shrink-0",children:Xa.map(N=>e.jsxs("button",{onClick:()=>o(N.id),className:j("flex items-center gap-2 px-4 py-2.5 rounded-xl whitespace-nowrap transition-all",d===N.id?"bg-primary text-primary-foreground":"hover:bg-muted"),children:[N.icon,e.jsx("span",{className:"text-sm font-medium",children:N.label})]},N.id))}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(G,{mode:"wait",children:e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[d==="general"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"General Settings"}),e.jsxs("div",{className:"p-4 bg-muted/30 rounded-2xl space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(Ct,{className:"w-4 h-4 text-primary"}),"Currency"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Za.map(N=>e.jsxs("button",{onClick:()=>a({defaultCurrency:N.code}),className:j("flex items-center gap-2 p-3 rounded-xl transition-all text-left",t.defaultCurrency===N.code?"bg-primary text-primary-foreground":"bg-muted/50 hover:bg-muted"),children:[e.jsx("span",{className:"text-lg",children:N.symbol}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:N.code}),e.jsx("div",{className:"text-xs opacity-75",children:N.name})]})]},N.code))})]}),e.jsxs("div",{className:"p-4 bg-muted/30 rounded-2xl space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(xe,{className:"w-4 h-4 text-primary"}),"Financial Month Starts On"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(U,{type:"number",min:1,max:28,value:t.monthStartDay,onChange:N=>a({monthStartDay:Math.min(28,Math.max(1,parseInt(N.target.value)||1))}),className:"w-20 rounded-xl text-center"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"of each month"})]})]}),e.jsx("div",{className:"p-4 bg-muted/30 rounded-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(Ct,{className:"w-4 h-4 text-primary"}),"Show Decimal Places (Cents)"]}),e.jsx(me,{checked:t.showCents,onCheckedChange:N=>a({showCents:N})})]})})]}),d==="accounts"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Manage Accounts"}),h]}),d==="categories"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Manage Categories"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and customize expense categories. Drag to reorder."}),s]}),d==="alerts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Alert Settings"}),e.jsxs("div",{className:"p-4 bg-muted/30 rounded-2xl space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(kt,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"font-medium",children:"Budget Alerts"})]}),e.jsx(me,{checked:t.enableBudgetAlerts,onCheckedChange:N=>a({enableBudgetAlerts:N})})]}),t.enableBudgetAlerts&&e.jsxs(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-3",children:[e.jsx(z,{className:"text-xs text-muted-foreground",children:"Alert when spending reaches % of budget"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"50",max:"100",step:"5",value:t.budgetWarningThreshold,onChange:N=>a({budgetWarningThreshold:parseInt(N.target.value)}),className:"flex-1 accent-primary"}),e.jsxs("span",{className:"text-sm font-mono w-12 text-right",children:[t.budgetWarningThreshold,"%"]})]})]})]}),e.jsxs("div",{className:"p-4 bg-muted/30 rounded-2xl space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4 text-violet-500"}),e.jsx("span",{className:"font-medium",children:"Installment Due Reminders"})]}),e.jsx(me,{checked:t.enableInstallmentReminders,onCheckedChange:N=>a({enableInstallmentReminders:N})})]}),t.enableInstallmentReminders&&e.jsxs(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-3",children:[e.jsx(z,{className:"text-xs text-muted-foreground",children:"Remind days before due date"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(U,{type:"number",min:1,max:14,value:t.installmentReminderDays,onChange:N=>a({installmentReminderDays:parseInt(N.target.value)||3}),className:"w-20 rounded-xl text-center"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"days"})]})]})]}),e.jsxs("div",{className:"p-4 bg-muted/30 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Smart Insights"})]}),e.jsx(me,{checked:t.enableInsights,onCheckedChange:N=>a({enableInsights:N})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"AI-powered spending analysis and recommendations"})]}),e.jsxs("div",{className:"p-4 bg-muted/30 rounded-2xl space-y-3",children:[e.jsx("div",{className:"font-medium",children:"Automated Reports"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Weekly Summary"}),e.jsx(me,{checked:t.weeklyReportEnabled,onCheckedChange:N=>a({weeklyReportEnabled:N})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Monthly Report"}),e.jsx(me,{checked:t.monthlyReportEnabled,onCheckedChange:N=>a({monthlyReportEnabled:N})})]})]})]}),d==="data"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Data Management"}),e.jsx("div",{className:"p-4 bg-muted/30 rounded-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[e.jsx(St,{className:"w-4 h-4 text-blue-500"}),"Export Data"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Download all your finance data as JSON"})]}),e.jsxs(M,{onClick:n,variant:"outline",className:"rounded-xl",children:[e.jsx(St,{className:"w-4 h-4 mr-2"}),"Export"]})]})}),e.jsx("div",{className:"p-4 bg-muted/30 rounded-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[e.jsx(It,{className:"w-4 h-4 text-emerald-500"}),"Import Data"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Restore from a previously exported file"})]}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:".json",onChange:b,className:"hidden"}),e.jsx(M,{variant:"outline",className:"rounded-xl",asChild:!0,children:e.jsxs("span",{children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),"Import"]})})]})]})}),e.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-2xl",children:e.jsx(G,{mode:"wait",children:r?e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center space-y-4",children:[e.jsx(kt,{className:"w-10 h-10 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-600 dark:text-red-400",children:"Are you absolutely sure?"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"This will permanently delete all your finance data."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>x(!1),className:"flex-1 rounded-xl",children:"Cancel"}),e.jsx(M,{variant:"destructive",onClick:()=>{l(),x(!1)},className:"flex-1 rounded-xl",children:"Yes, Delete Everything"})]})]}):e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium text-red-600 dark:text-red-400",children:[e.jsx(Pe,{className:"w-4 h-4"}),"Reset All Data"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Permanently delete all finance data. Cannot be undone."})]}),e.jsx(M,{variant:"destructive",onClick:()=>x(!0),className:"rounded-xl",children:"Reset"})]})})})]})]},d)})})]})},Bt=["ðŸ’°","ðŸ’µ","ðŸ’´","ðŸ’¶","ðŸ’·","ðŸ’³","ðŸ’¸","ðŸ¦","ðŸ ","ðŸ¡","ðŸ¢","ðŸª","ðŸ«","ðŸ¬","ðŸ­","ðŸ—ï¸","ðŸš—","ðŸš•","ðŸš™","ðŸšŒ","ðŸšŽ","ðŸŽï¸","ðŸš“","ðŸš‘","ðŸ›’","ðŸ›ï¸","ðŸŽ","ðŸŽ€","ðŸŽ‚","ðŸ”","ðŸ•","ðŸ±","â˜•","ðŸº","ðŸ»","ðŸ¥‚","ðŸ·","ðŸ¥¤","ðŸ§ƒ","ðŸ§‹","âš¡","ðŸ’¡","ðŸ”¥","ðŸ’§","â˜Žï¸","ðŸ“±","ðŸ’»","âŒ¨ï¸","ðŸ“š","ðŸ“–","âœï¸","ðŸ“","ðŸŽ“","ðŸŽ’","ðŸ«","ðŸ“","ðŸ’Š","ðŸ’‰","ðŸ©º","ðŸ¥","âš•ï¸","ðŸ§¬","ðŸ”¬","ðŸ§ª","âœˆï¸","ðŸš","ðŸ›«","ðŸ–ï¸","ðŸ—½","ðŸ—¼","ðŸ°","ðŸŽ¡","ðŸŽ®","ðŸŽ¯","ðŸŽ²","ðŸŽ°","ðŸŽ­","ðŸŽª","ðŸŽ¨","ðŸŽ¬","âš½","ðŸ€","ðŸˆ","âš¾","ðŸŽ¾","ðŸ","ðŸ‰","ðŸ¥Š","ðŸ‘”","ðŸ‘•","ðŸ‘–","ðŸ‘—","ðŸ‘˜","ðŸ‘™","ðŸ‘š","ðŸ§¥","ðŸ”§","ðŸ”¨","âš™ï¸","ðŸ› ï¸","ðŸ”©","âš’ï¸","ðŸ›¡ï¸","ðŸŽ¯","ðŸ“¦","ðŸ“®","ðŸ“ª","ðŸ“«","ðŸ“¬","ðŸ“­","ðŸ“„","ðŸ“ƒ","ðŸš¨","âš ï¸","ðŸ†˜","ðŸ†™","ðŸ”´","ðŸŸ ","ðŸŸ¡","ðŸŸ¢"],te=["#ef4444","#f97316","#f59e0b","#84cc16","#22c55e","#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899","#f43f5e"],tn=({expenseCategories:t,incomeCategories:a,onAddExpenseCategory:n,onUpdateExpenseCategory:i,onDeleteExpenseCategory:l,onReorderExpenseCategories:h,onAddIncomeCategory:s,onUpdateIncomeCategory:d,onDeleteIncomeCategory:o,onReorderIncomeCategories:r,getCategoryUsage:x,formatCurrency:b,defaultCurrency:N})=>{const[D,A]=g.useState("expense"),[k,u]=g.useState(!1),[v,f]=g.useState(null),[I,w]=g.useState(null),[p,R]=g.useState(null),[S,P]=g.useState({name:"",icon:"ðŸ’°",color:te[0],monthlyBudget:void 0,isEssential:!1}),[c,E]=g.useState({}),K=D==="expense"?t:a,W=g.useMemo(()=>[...K].sort((C,$)=>(C.order||0)-($.order||0)),[K]),Z=()=>{S.name.trim()&&(D==="expense"?n({name:S.name,icon:S.icon,color:S.color,monthlyBudget:S.monthlyBudget,isEssential:S.isEssential||!1,isDefault:!1,order:t.length}):s({name:S.name,icon:S.icon,color:S.color,isDefault:!1,order:a.length}),P({name:"",icon:"ðŸ’°",color:te[0],monthlyBudget:void 0,isEssential:!1}),u(!1))},he=C=>{f(C.id),E({name:C.name,icon:C.icon,color:C.color,...D==="expense"&&{monthlyBudget:C.monthlyBudget,isEssential:C.isEssential}})},ze=C=>{c.name?.trim()&&(D==="expense"?i(C,c):d(C,c)),f(null),E({})},Le=C=>{const $=C.map((_,ne)=>({..._,order:ne}));D==="expense"?h($):r($)},Oe=C=>{if(K.find(_=>_.id===C)?.isDefault){w(null);return}D==="expense"?l(C):o(C),w(null)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 p-1 bg-muted/30 rounded-xl",children:[e.jsxs("button",{onClick:()=>{A("expense"),u(!1),f(null),w(null)},className:j("flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-all",D==="expense"?"bg-background shadow-sm":"text-muted-foreground hover:text-foreground"),children:["Expense Categories (",t.length,")"]}),e.jsxs("button",{onClick:()=>{A("income"),u(!1),f(null),w(null)},className:j("flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-all",D==="income"?"bg-background shadow-sm":"text-muted-foreground hover:text-foreground"),children:["Income Categories (",a.length,")"]})]}),e.jsx(ba,{axis:"y",values:W,onReorder:Le,className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:W.map(C=>{const $=v===C.id,_=x(C.id),ne=D==="expense"&&C.monthlyBudget?Math.min(_.total/C.monthlyBudget*100,100):0;return e.jsx(va,{value:C,dragListener:!$&&I!==C.id,children:e.jsx(y.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"relative overflow-hidden rounded-xl p-3 transition-all",style:{background:`linear-gradient(135deg, ${C.color}15 0%, ${C.color}05 100%)`},children:$?e.jsxs("div",{className:"space-y-3",children:[e.jsx(U,{value:c.name||"",onChange:L=>E(V=>({...V,name:L.target.value})),placeholder:"Category name",className:"rounded-lg bg-background/50",autoFocus:!0}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-1 block",children:"Icon (Emoji)"}),e.jsx("div",{className:"grid grid-cols-10 gap-1",children:Bt.slice(0,30).map(L=>e.jsx("button",{onClick:()=>E(V=>({...V,icon:L})),className:j("p-1.5 rounded-lg text-xl transition-all hover:scale-110",c.icon===L?"bg-primary/20 ring-2 ring-primary":"hover:bg-muted"),children:L},L))}),e.jsx(U,{value:c.icon||"",onChange:L=>E(V=>({...V,icon:L.target.value})),placeholder:"Or type your own emoji",className:"rounded-lg bg-background/50 mt-2 text-center text-2xl",maxLength:2})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-1 block",children:"Color"}),e.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[te.map(L=>e.jsx("button",{onClick:()=>E(V=>({...V,color:L})),className:j("w-8 h-8 rounded-full transition-all",c.color===L&&"ring-2 ring-offset-2 ring-offset-background"),style:{backgroundColor:L}},L)),e.jsx("button",{onClick:()=>R("edit"),className:j("w-8 h-8 rounded-full transition-all border-2 border-dashed border-muted-foreground/50 flex items-center justify-center text-muted-foreground hover:border-primary hover:text-primary",c.color&&!te.includes(c.color)&&"ring-2 ring-offset-2 ring-offset-background ring-primary"),style:{backgroundColor:c.color&&!te.includes(c.color)?c.color:void 0},title:"More colors",children:e.jsx(H,{className:"w-4 h-4"})})]}),e.jsx(G,{children:p==="edit"&&e.jsx(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden mt-3",children:e.jsxs("div",{className:"p-4 bg-background/80 backdrop-blur-sm rounded-xl border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(z,{className:"text-sm font-medium",children:"Select Color"}),e.jsx("button",{onClick:()=>R(null),className:"p-1 hover:bg-muted rounded-lg transition-colors",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mb-4 flex items-center gap-3 p-2 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg border-2 border-border overflow-hidden relative cursor-pointer",style:{backgroundColor:c.color||"#3b82f6"},children:e.jsx("input",{type:"color",value:c.color||"#3b82f6",onChange:L=>{E(V=>({...V,color:L.target.value}))},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium",children:"Custom Color"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Click to pick any color"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Popular Colors:"}),e.jsx("div",{className:"grid grid-cols-12 gap-1.5",children:["#ef4444","#f97316","#f59e0b","#84cc16","#22c55e","#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899","#f43f5e","#64748b","#78716c","#1f2937","#0f172a","#fca5a5","#fdba74","#fde047","#bef264"].map(L=>e.jsx("button",{onClick:()=>{E(V=>({...V,color:L}))},className:j("w-full aspect-square rounded-md transition-all hover:scale-110",c.color===L&&"ring-2 ring-offset-1 ring-offset-background ring-white"),style:{backgroundColor:L}},L))})]})})})]}),D==="expense"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Budget:"}),e.jsx(U,{type:"number",value:c.monthlyBudget||"",onChange:L=>E(V=>({...V,monthlyBudget:L.target.value?parseFloat(L.target.value):void 0})),placeholder:"No limit",className:"h-8 w-32 rounded-lg text-sm"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[N,"/month"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>E(L=>({...L,isEssential:!L.isEssential})),className:j("px-3 py-1.5 rounded-lg text-sm transition-all",c.isEssential?"bg-primary text-primary-foreground":"bg-muted/50"),children:c.isEssential?"Essential âœ“":"Mark as Essential"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{size:"sm",variant:"ghost",onClick:()=>f(null),className:"flex-1",children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),"Cancel"]}),e.jsxs(M,{size:"sm",onClick:()=>ze(C.id),className:"flex-1",children:[e.jsx(Ht,{className:"w-4 h-4 mr-1"}),"Save"]})]})]}):I===C.id?e.jsxs("div",{className:"text-center py-2",children:[e.jsx("p",{className:"text-sm mb-3",children:C.isDefault?"Cannot delete default categories.":_.count>0?`This category has ${_.count} transactions. Delete anyway?`:"Delete this category?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>w(null),className:"flex-1",children:"Cancel"}),!C.isDefault&&e.jsx(M,{size:"sm",variant:"destructive",onClick:()=>Oe(C.id),className:"flex-1",children:"Delete"})]})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"cursor-grab active:cursor-grabbing text-muted-foreground",children:e.jsx(Ks,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center shrink-0 text-2xl",style:{backgroundColor:`${C.color}30`},children:C.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-medium truncate",children:C.name}),D==="expense"&&C.isEssential&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-600 dark:text-amber-400",children:"Essential"}),C.isDefault&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-muted text-muted-foreground",children:"System"})]}),D==="expense"&&C.monthlyBudget?e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-0.5",children:[e.jsx("span",{children:b(_.total)}),e.jsx("span",{children:b(C.monthlyBudget)})]}),e.jsx("div",{className:"h-1.5 bg-muted rounded-full overflow-hidden",children:e.jsx(y.div,{className:"h-full rounded-full",style:{backgroundColor:ne>90?"#ef4444":C.color,width:`${ne}%`},initial:{width:0},animate:{width:`${ne}%`},transition:{duration:.5}})})]}):e.jsxs("span",{className:"text-xs text-muted-foreground",children:[_.count," transactions â€¢"," ",b(_.total)]})]}),e.jsxs("div",{className:"flex gap-1 shrink-0",children:[e.jsx("button",{onClick:()=>he(C),title:"Edit category",className:"p-1.5 rounded-lg hover:bg-muted/50 transition-colors",children:e.jsx(_t,{className:"w-4 h-4 text-muted-foreground"})}),!C.isDefault&&e.jsx("button",{onClick:()=>w(C.id),title:"Delete category",className:"p-1.5 rounded-lg hover:bg-muted/50 transition-colors",children:e.jsx(Pe,{className:"w-4 h-4 text-muted-foreground"})})]})]})})},C.id)})}),e.jsx(G,{children:k?e.jsx(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:e.jsxs("div",{className:"p-4 bg-muted/30 rounded-2xl border border-dashed border-border space-y-4",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"New"," ",D==="expense"?"Expense":"Income"," ","Category"]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl",style:{background:`linear-gradient(135deg, ${S.color}20 0%, ${S.color}10 100%)`},children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl",style:{backgroundColor:`${S.color}30`},children:S.icon}),e.jsx("span",{className:"font-medium",children:S.name||"Category Name"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-1 block",children:"Name"}),e.jsx(U,{value:S.name,onChange:C=>P($=>({...$,name:C.target.value})),placeholder:D==="expense"?"e.g., Food & Dining":"e.g., Freelance Work",className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-1 block",children:"Icon (Emoji)"}),e.jsx("div",{className:"grid grid-cols-10 gap-1",children:Bt.slice(0,30).map(C=>e.jsx("button",{onClick:()=>P($=>({...$,icon:C})),className:j("p-1.5 rounded-lg text-xl transition-all hover:scale-110",S.icon===C?"bg-primary/20 ring-2 ring-primary":"hover:bg-muted"),children:C},C))}),e.jsx(U,{value:S.icon,onChange:C=>P($=>({...$,icon:C.target.value})),placeholder:"Or type your own emoji",className:"rounded-xl mt-2 text-center text-2xl",maxLength:2})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-1 block",children:"Color"}),e.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[te.map(C=>e.jsx("button",{onClick:()=>P($=>({...$,color:C})),className:j("w-8 h-8 rounded-full transition-all",S.color===C&&"ring-2 ring-offset-2 ring-offset-background"),style:{backgroundColor:C}},C)),e.jsx("button",{onClick:()=>R("new"),className:j("w-8 h-8 rounded-full transition-all border-2 border-dashed border-muted-foreground/50 flex items-center justify-center text-muted-foreground hover:border-primary hover:text-primary",!te.includes(S.color)&&"ring-2 ring-offset-2 ring-offset-background ring-primary"),style:{backgroundColor:te.includes(S.color)?void 0:S.color},title:"More colors",children:e.jsx(H,{className:"w-4 h-4"})})]}),e.jsx(G,{children:p==="new"&&e.jsx(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden mt-3",children:e.jsxs("div",{className:"p-4 bg-background/80 backdrop-blur-sm rounded-xl border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(z,{className:"text-sm font-medium",children:"Select Color"}),e.jsx("button",{onClick:()=>R(null),className:"p-1 hover:bg-muted rounded-lg transition-colors",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mb-4 flex items-center gap-3 p-2 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg border-2 border-border overflow-hidden relative cursor-pointer",style:{backgroundColor:S.color},children:e.jsx("input",{type:"color",value:S.color,onChange:C=>{P($=>({...$,color:C.target.value}))},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium",children:"Custom Color"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Click to pick any color"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Popular Colors:"}),e.jsx("div",{className:"grid grid-cols-12 gap-1.5",children:["#ef4444","#f97316","#f59e0b","#84cc16","#22c55e","#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899","#f43f5e","#64748b","#78716c","#1f2937","#0f172a","#fca5a5","#fdba74","#fde047","#bef264"].map(C=>e.jsx("button",{onClick:()=>{P($=>({...$,color:C}))},className:j("w-full aspect-square rounded-md transition-all hover:scale-110",S.color===C&&"ring-2 ring-offset-1 ring-offset-background ring-white"),style:{backgroundColor:C}},C))})]})})})]}),D==="expense"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(z,{className:"text-xs text-muted-foreground mb-1 block",children:"Monthly Budget (optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",children:N}),e.jsx(U,{type:"number",value:S.monthlyBudget||"",onChange:C=>P($=>({...$,monthlyBudget:C.target.value?parseFloat(C.target.value):void 0})),placeholder:"No limit",className:"rounded-xl pl-14"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-xl",children:[e.jsx("span",{className:"text-sm",children:"Mark as essential expense"}),e.jsx("button",{onClick:()=>P(C=>({...C,isEssential:!C.isEssential})),className:j("w-12 h-6 rounded-full transition-all",S.isEssential?"bg-amber-500":"bg-muted"),children:e.jsx("div",{className:j("w-5 h-5 rounded-full bg-white shadow-md transition-transform",S.isEssential?"translate-x-6":"translate-x-0.5")})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>u(!1),className:"flex-1 rounded-xl",children:"Cancel"}),e.jsx(M,{onClick:Z,disabled:!S.name.trim(),className:"flex-1 rounded-xl text-white",style:{backgroundColor:S.color},children:"Create Category"})]})]})}):e.jsxs(y.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>u(!0),className:"w-full p-4 rounded-2xl border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 hover:bg-primary/5 transition-all flex items-center justify-center gap-2 text-muted-foreground hover:text-primary",children:[e.jsx(H,{className:"w-5 h-5"}),"Add New ",D==="expense"?"Expense":"Income"," ","Category"]})})]})},sn=({isOpen:t,onClose:a,incomes:n,expenses:i,categories:l,dateRange:h,formatCurrency:s})=>{const d=g.useMemo(()=>{const o=n.filter(u=>{const v=new Date(u.actualDate||u.createdAt);return v>=h.start&&v<=h.end}),r=i.filter(u=>{const v=new Date(u.date);return v>=h.start&&v<=h.end}),x=o.reduce((u,v)=>u+v.amount,0),b=r.reduce((u,v)=>u+v.amount,0),N=new Map;r.forEach(u=>{const v=N.get(u.categoryId)||{amount:0,count:0};N.set(u.categoryId,{amount:v.amount+u.amount,count:v.count+1})});const D=l.map(u=>{const v=N.get(u.id)||{amount:0,count:0};return{category:u,amount:v.amount,count:v.count,percentage:b>0?v.amount/b*100:0}}).filter(u=>u.amount>0).sort((u,v)=>v.amount-u.amount),A=new Map;o.forEach(u=>{const v=A.get(u.type)||0;A.set(u.type,v+u.amount)});const k=Array.from(A.entries()).map(([u,v])=>({type:u,amount:v,percentage:x>0?v/x*100:0})).sort((u,v)=>v.amount-u.amount);return{totalIncome:x,totalExpense:b,netFlow:x-b,categorySpending:D,incomeSources:k,transactionCount:o.length+r.length,avgDailyExpense:r.length>0?b/Math.max(1,Math.ceil((h.end.getTime()-h.start.getTime())/864e5)):0}},[n,i,l,h]);return t?e.jsx(G,{children:e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:a,children:e.jsxs(y.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:o=>o.stopPropagation(),className:"w-full max-w-2xl max-h-[85vh] overflow-y-auto bg-background rounded-3xl shadow-2xl border border-border/50",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur-xl px-6 py-4 border-b border-border/50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-primary/10",children:e.jsx(Re,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Financial Report"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.label})]})]}),e.jsx(M,{variant:"ghost",size:"icon",onClick:a,className:"rounded-full",children:e.jsx(J,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(Y,{intensity:"light",padding:"md",className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-500",children:[e.jsx(Fe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total Income"})]}),e.jsx("p",{className:"text-xl font-bold tabular-nums",children:s(d.totalIncome)})]}),e.jsxs(Y,{intensity:"light",padding:"md",className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[e.jsx(Gt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total Expenses"})]}),e.jsx("p",{className:"text-xl font-bold tabular-nums",children:s(d.totalExpense)})]}),e.jsxs(Y,{intensity:"light",padding:"md",className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Xs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Transactions"})]}),e.jsx("p",{className:"text-xl font-bold tabular-nums",children:d.transactionCount})]}),e.jsxs(Y,{intensity:"light",padding:"md",className:j("space-y-1",d.netFlow>=0?"ring-1 ring-emerald-500/20":"ring-1 ring-red-500/20"),children:[e.jsxs("div",{className:j("flex items-center gap-2",d.netFlow>=0?"text-emerald-500":"text-red-500"),children:[d.netFlow>=0?e.jsx(ae,{className:"w-4 h-4"}):e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Net Flow"})]}),e.jsxs("p",{className:"text-xl font-bold tabular-nums",children:[d.netFlow>=0?"+":"",s(d.netFlow)]})]})]}),e.jsx(Y,{intensity:"light",padding:"md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Average Daily Spending"}),e.jsx("p",{className:"text-lg font-semibold tabular-nums",children:s(d.avgDailyExpense)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Projected Monthly"}),e.jsx("p",{className:"text-lg font-semibold tabular-nums text-muted-foreground",children:s(d.avgDailyExpense*30)})]})]})}),d.categorySpending.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Spending by Category"}),e.jsx("div",{className:"space-y-2",children:d.categorySpending.map((o,r)=>e.jsx(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:r*.05},children:e.jsx(Y,{intensity:"light",padding:"sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-lg",style:{backgroundColor:`${o.category.color}20`},children:o.category.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium truncate",children:o.category.name}),e.jsx("span",{className:"font-bold tabular-nums",children:s(o.amount)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-muted/50 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${o.percentage}%`},transition:{delay:r*.05+.2,duration:.5},className:"h-full rounded-full",style:{backgroundColor:o.category.color}})}),e.jsxs("span",{className:"text-xs text-muted-foreground tabular-nums w-12 text-right",children:[o.percentage.toFixed(1),"%"]})]})]})]})})},o.category.id))})]}),d.incomeSources.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Income Sources"}),e.jsx("div",{className:"space-y-2",children:d.incomeSources.map((o,r)=>e.jsx(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:r*.05},children:e.jsx(Y,{intensity:"light",padding:"sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-emerald-500/10",children:e.jsx(Fe,{className:"w-5 h-5 text-emerald-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium capitalize",children:o.type.replace(/-/g," ")}),e.jsx("span",{className:"font-bold tabular-nums text-emerald-600 dark:text-emerald-400",children:s(o.amount)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-muted/50 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${o.percentage}%`},transition:{delay:r*.05+.2,duration:.5},className:"h-full rounded-full bg-emerald-500"})}),e.jsxs("span",{className:"text-xs text-muted-foreground tabular-nums w-12 text-right",children:[o.percentage.toFixed(1),"%"]})]})]})]})})},o.type))})]}),d.transactionCount===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Re,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium mb-1",children:"No Data Available"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["No transactions found for"," ",h.label.toLowerCase()]})]})]})]})})}):null},an=()=>{const[t,a]=g.useState(!1),[n,i]=g.useState(null);return{showConfetti:t,celebrationMessage:n,celebrate:(s,d,o)=>{a(!0),i({title:s,subtitle:d,emoji:o})},endCelebration:()=>{a(!1),i(null)}}},nn=()=>{const{accounts:t,transfers:a,incomes:n,expenses:i,categories:l,incomeCategories:h,installments:s,goals:d,settings:o,formatCurrency:r,calculateAccountBalance:x,addExpense:b,deleteExpense:N,addIncome:D,deleteIncome:A,addInstallment:k,updateInstallment:u,addInstallmentPayment:v,addInstallmentRefund:f,transferBetweenAccounts:I,addGoal:w,updateGoal:p,addGoalContribution:R,addAccount:S,updateAccount:P,deleteAccount:c,addCategory:E,updateCategory:K,deleteCategory:W,addIncomeCategory:Z,updateIncomeCategory:he,deleteIncomeCategory:ze,updateSettings:Le,exportData:Oe,importData:C,resetData:$,getBudgetOverview:_,createBudget:ne,updateBudget:L,getCurrentMonth:V}=$s(),ss=Es(),[ge,as]=g.useState(()=>Zt("this-month")),[ns,$e]=g.useState(!1),[ls,it]=g.useState(!1),[rs,fe]=g.useState(!1),[is,pe]=g.useState(!1),[os,ot]=g.useState(!1),[ds,Ge]=g.useState(!1),[cs,be]=g.useState(!1),[ms,je]=g.useState(!1),[xs,ye]=g.useState(!1),[us,We]=g.useState(!1),[hs,dt]=g.useState(!1),[gs,ct]=g.useState(!1),[fs,qe]=g.useState(!1),[ps,bs]=g.useState(!1),[js,Ne]=g.useState(!1),[Ue,ve]=g.useState(null),[le,mt]=g.useState(null),[we,Ve]=g.useState(null),[ys,Ce]=g.useState(null),[ke,Se]=g.useState(null),[Ye,Ie]=g.useState(null),[He,_e]=g.useState(null),[re,xt]=g.useState(null),[B,ut]=g.useState(null),[X,De]=g.useState(null),[Ae,Ns]=g.useState(!0),{showConfetti:vs,celebrationMessage:Ee,celebrate:ht,endCelebration:gt}=an(),[Qe,ws]=g.useState(()=>{const m=localStorage.getItem("lifeos-celebrated-goals");return m?new Set(JSON.parse(m)):new Set}),ft=g.useMemo(()=>{const m=n.map(F=>{const Q=h.find(q=>q.id===F.categoryId);return{id:F.id,type:"income",title:F.title,amount:F.amount,date:F.actualDate||F.createdAt.split("T")[0],accountId:F.accountId,category:Q?.name,categoryId:F.categoryId,categoryIcon:Q?.icon,categoryColor:Q?.color,notes:F.notes,tags:F.tags,status:F.status,frequency:F.frequency,isRecurring:F.isRecurring,transactionNature:F.type}}),T=i.map(F=>{const Q=l.find(q=>q.id===F.categoryId);return{id:F.id,type:"expense",title:F.title,amount:F.amount,date:F.date,accountId:F.accountId,location:F.location,category:Q?.name,categoryId:F.categoryId,categoryIcon:Q?.icon,categoryColor:Q?.color,notes:F.notes,tags:F.tags,frequency:F.recurringFrequency,isRecurring:F.isRecurring,transactionNature:F.type}}),O=a.map(F=>{const Q=t.find(oe=>oe.id===F.fromAccountId),q=t.find(oe=>oe.id===F.toAccountId);return{id:F.id,type:"transfer",title:F.notes||`${Q?.name||"Account"} â†’ ${q?.name||"Account"}`,amount:F.amount,date:F.date,accountId:F.fromAccountId,toAccountId:F.toAccountId,category:"Transfer",notes:F.notes}});return[...m,...T,...O].sort((F,Q)=>new Date(Q.date).getTime()-new Date(F.date).getTime())},[n,i,a,l,t]),Cs=g.useMemo(()=>X?x(X.id):t.filter(m=>m.isActive).reduce((m,T)=>m+x(T.id),0),[t,x,a,n,i,X]),Te=g.useMemo(()=>V(),[V]),ie=g.useMemo(()=>_(Te),[_,Te,i,l]);g.useEffect(()=>{const m=setTimeout(()=>Ns(!1),500);return()=>clearTimeout(m)},[]),g.useEffect(()=>{const T=d.filter(O=>O.currentAmount>=O.targetAmount).find(O=>!Qe.has(O.id));if(T){ht("Goal Achieved! ðŸŽ¯",`You reached your "${T.title}" goal!`,"ðŸ†");const O=new Set(Qe);O.add(T.id),ws(O),localStorage.setItem("lifeos-celebrated-goals",JSON.stringify([...O]))}},[d,Qe,ht]);const pt=m=>ft.some(T=>T.accountId===m),bt=()=>e.jsxs(e.Fragment,{children:[e.jsx(Y,{intensity:"medium",glow:!0,glowColor:"#22c55e",padding:"lg",className:"text-center",children:e.jsx(es,{amount:Cs,formatCurrency:r})}),e.jsx(Me,{title:"Accounts",className:"max-lg:hidden mt-5",children:Ae?e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{variant:"account"}),e.jsx(ce,{variant:"account"})]}):e.jsx(Ma,{accounts:t,calculateBalance:x,formatCurrency:r,onAccountClick:m=>De(X?.id===m.id?null:m),onAddAccount:()=>qe(!0),selectedAccountId:X?.id})}),e.jsx(Me,{title:"Budget Planning",className:"mt-5",action:e.jsx("button",{onClick:()=>Ne(!0),className:"text-sm text-emerald-400 hover:text-emerald-300 transition-colors",children:ie?"Edit":"Set Up"}),children:e.jsx(Ra,{budgetOverview:ie,categories:l,formatCurrency:r,onEdit:()=>Ne(!0)})})]}),ks=()=>e.jsxs(e.Fragment,{children:[e.jsx(Pa,{incomes:n,expenses:i,transfers:a,dateRange:ge,formatCurrency:r,selectedAccount:X,onClearAccountFilter:()=>De(null),onTransfer:()=>fe(!0)}),e.jsx(Me,{title:"Goals",action:d.length>0?e.jsxs(jt,{to:"/finance/goals",className:"text-sm text-emerald-400 hover:text-emerald-300 transition-colors",children:["See All (",d.length,")"]}):void 0,children:Ae?e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(ce,{variant:"goal"}),e.jsx(ce,{variant:"goal"})]}):e.jsx(na,{goals:d,maxGoals:1,formatCurrency:r,onGoalClick:m=>{xt(m),dt(!0)},onContribute:m=>{const T=d.find(O=>O.id===m);T&&(Ie(T),ye(!0))},onAddGoal:()=>{Se(null),je(!0)}})}),e.jsx(Me,{title:"Installments",action:s.length>0?e.jsxs(jt,{to:"/finance/installments",className:"text-sm text-emerald-400 hover:text-emerald-300 transition-colors",children:["See All (",s.length,")"]}):void 0,children:Ae?e.jsxs("div",{className:"space-y-3",children:[e.jsx(ce,{}),e.jsx(ce,{})]}):e.jsx(da,{installments:s,maxInstallments:1,formatCurrency:r,onInstallmentClick:m=>{mt(m),ot(!0)},onPay:m=>{const T=s.find(O=>O.id===m);T&&(Ce(T),be(!0))},onAddInstallment:()=>{ve(null),pe(!0)}})}),Ae?e.jsx(Y,{intensity:"light",padding:"none",children:e.jsx(Zs,{count:5,variant:"transaction"})}):e.jsx(Ba,{transactions:ft,formatCurrency:r,dateRange:ge,onTransactionClick:m=>ut(m),onDeleteIncome:A,onDeleteExpense:N,selectedAccount:X,onClearAccountFilter:()=>De(null)})]});return e.jsxs("div",{className:"min-h-screen bg-background text-primary pb-20 lg:pb-0",children:[e.jsx($a,{isActive:vs,onComplete:gt}),e.jsx(Ga,{isVisible:!!Ee,title:Ee?.title||"",subtitle:Ee?.subtitle,emoji:Ee?.emoji,onClose:gt}),e.jsx(Da,{accounts:t,calculateAccountBalance:x,formatCurrency:r,dateRange:ge,onDateRangeChange:as,onSettingsClick:()=>ct(!0),onAddClick:()=>$e(!0),onReportsClick:()=>ss("/finance/reports"),selectedAccount:X}),e.jsxs("div",{className:"lg:hidden px-4 py-4",children:[bt(),e.jsx(Ta,{accounts:t,calculateBalance:x,formatCurrency:r,onAccountClick:m=>De(X?.id===m.id?null:m),onAddAccount:()=>qe(!0),selectedAccountId:X?.id})]}),e.jsx(wa,{leftColumn:e.jsx("div",{className:"max-lg:hidden",children:bt()}),centerColumn:ks()}),e.jsx(Aa,{onAddIncome:()=>it(!0),onAddExpense:()=>$e(!0),onAddTransfer:()=>fe(!0)}),e.jsx(Ua,{isOpen:ns,onClose:()=>$e(!1),onSubmit:m=>{b({title:m.title,amount:m.amount,currency:m.currency,categoryId:m.categoryId,type:m.type,paymentMethod:m.paymentMethod,accountId:m.accountId,date:m.date,isRecurring:m.isRecurring,recurringFrequency:m.recurringFrequency,tags:m.tags,notes:m.notes})},accounts:t,categories:l,defaultCurrency:o.defaultCurrency}),e.jsx(Ha,{isOpen:ls,onClose:()=>it(!1),onSubmit:m=>{D({title:m.title,amount:m.amount,currency:m.currency,type:m.type,categoryId:m.categoryId,status:m.status,frequency:m.frequency,accountId:m.accountId,actualDate:m.actualDate,isRecurring:m.isRecurring,tags:m.tags,notes:m.notes})},accounts:t,incomeCategories:h,defaultCurrency:o.defaultCurrency}),e.jsx(la,{isOpen:is,onClose:()=>{pe(!1),ve(null)},onSubmit:m=>{const T={title:m.title,totalAmount:m.totalAmount,paidAmount:m.paidAmount,installmentAmount:m.installmentAmount,totalInstallments:m.totalInstallments,paidInstallments:m.paidInstallments,frequency:m.frequency,linkedAccountId:m.linkedAccountId||t[0]?.id||"",startDate:m.startDate,nextPaymentDate:m.nextDueDate,description:m.notes,categoryId:l[0]?.id||"",endDate:m.startDate,status:"active",autoPayment:!1,remindDaysBefore:3,payments:[]};Ue?u(Ue.id,T):k(T),pe(!1),ve(null)},accounts:t,defaultCurrency:o.defaultCurrency,installment:Ue}),e.jsx(ea,{isOpen:ms,onClose:()=>{je(!1),Se(null)},onSubmit:m=>{const T={title:m.title,targetAmount:m.targetAmount,currentAmount:m.currentAmount,currency:m.currency,category:m.category,priority:m.priority,deadline:m.deadline,color:m.color,icon:m.icon,monthlyContribution:0,autoAllocate:!1,status:"active",milestones:[],contributions:[]};ke?p(ke.id,T):w(T),je(!1),Se(null)},defaultCurrency:o.defaultCurrency,goal:ke},ke?.id||"new-goal"),e.jsx(ta,{isOpen:xs,onClose:()=>{ye(!1),Ie(null)},onSubmit:m=>{Ye&&(R(Ye.id,m.amount,m.notes),ye(!1),Ie(null))},goal:Ye,accounts:t,defaultCurrency:o.defaultCurrency,formatCurrency:r,calculateBalance:x}),e.jsx(sa,{isOpen:hs,onClose:()=>{dt(!1),xt(null)},goal:re,formatCurrency:r,onEdit:()=>{re&&(Se(re),je(!0))},onContribute:()=>{re&&(Ie(re),ye(!0))},onWithdraw:()=>{re&&(_e(re),We(!0))}}),e.jsx(aa,{isOpen:us,onClose:()=>{We(!1),_e(null)},onSubmit:m=>{He&&(R(He.id,-m.amount,m.reason),We(!1),_e(null))},goal:He,formatCurrency:r}),e.jsx(_a,{isOpen:rs,onClose:()=>fe(!1),onSubmit:m=>{I(m.fromAccountId,m.toAccountId,m.amount,m.notes),fe(!1)},accounts:t,defaultCurrency:o.defaultCurrency,calculateBalance:x,formatCurrency:r}),e.jsx(ra,{isOpen:cs,onClose:()=>{be(!1),Ce(null)},onSubmit:m=>{v(m.installmentId,{amount:m.amount,date:m.date,status:"paid",notes:m.notes},{accountId:m.accountId,paymentMethod:m.paymentMethod}),be(!1),Ce(null)},installment:ys,accounts:t,defaultCurrency:o.defaultCurrency,formatCurrency:r,calculateBalance:x}),e.jsx(ia,{isOpen:os,onClose:()=>{ot(!1),mt(null)},installment:le,formatCurrency:r,onEdit:()=>{le&&(ve(le),pe(!0))},onPay:()=>{le&&(Ce(le),be(!0))},onRefund:()=>{le&&(Ve(le),Ge(!0))}}),e.jsx(oa,{isOpen:ds,onClose:()=>{Ge(!1),Ve(null)},onSubmit:m=>{if(we){const T=we.linkedAccountId||t.find(O=>O.isActive)?.id;f(we.id,m.amount,m.reason,T?{accountId:T}:void 0),Ge(!1),Ve(null)}},installment:we,formatCurrency:r}),e.jsx(Mt,{isOpen:gs,onClose:()=>ct(!1),title:"Settings",children:e.jsx("div",{className:"space-y-6 pb-8",children:e.jsx(en,{settings:o,onUpdateSettings:Le,onExport:Oe,onImport:m=>C(m),onResetData:$,accountsContent:e.jsx(Ft,{accounts:t,onAddAccount:S,onUpdateAccount:P,onDeleteAccount:c,hasTransactions:pt,defaultCurrency:o.defaultCurrency,formatCurrency:r,calculateBalance:x}),categoriesContent:e.jsx(tn,{expenseCategories:l,incomeCategories:h,onAddExpenseCategory:E,onUpdateExpenseCategory:K,onDeleteExpenseCategory:W,onReorderExpenseCategories:m=>m.forEach((T,O)=>K(T.id,{order:O})),onAddIncomeCategory:Z,onUpdateIncomeCategory:he,onDeleteIncomeCategory:ze,onReorderIncomeCategories:m=>m.forEach((T,O)=>he(T.id,{order:O})),getCategoryUsage:m=>{const T=i.filter(q=>q.categoryId===m).length,O=i.filter(q=>q.categoryId===m).reduce((q,oe)=>q+oe.amount,0),F=n.filter(q=>q.categoryId===m).length,Q=n.filter(q=>q.categoryId===m).reduce((q,oe)=>q+oe.amount,0);return{count:T+F,total:O+Q}},formatCurrency:r,defaultCurrency:o.defaultCurrency})})})}),e.jsx(Mt,{isOpen:fs,onClose:()=>qe(!1),title:"Manage Accounts",children:e.jsx(Ft,{accounts:t,onAddAccount:S,onUpdateAccount:P,onDeleteAccount:c,hasTransactions:pt,defaultCurrency:o.defaultCurrency,formatCurrency:r,calculateBalance:x})}),e.jsx(za,{className:"text-primary",isOpen:!!B,onClose:()=>ut(null),title:B?.type==="income"?"Income Details":B?.type==="transfer"?"Transfer Details":"Expense Details",children:B&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:`w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center text-2xl ${B.type==="income"?"bg-emerald-500/10":"bg-muted"}`,style:{backgroundColor:B.type==="expense"&&B.categoryColor?`${B.categoryColor}20`:void 0},children:B.type==="income"?"ðŸ’°":B.type==="transfer"?"ðŸ”„":B.categoryIcon||"ðŸ’¸"}),e.jsx("h3",{className:"text-xl font-bold",children:B.title}),e.jsx("p",{className:"text-muted-foreground",children:B.category}),e.jsxs("p",{className:`text-3xl font-bold mt-4 ${B.type==="income"?"text-emerald-500":"text-foreground"}`,children:[B.type==="income"?"+":B.type==="transfer"?"":"-",r(B.amount)]})]}),e.jsxs("div",{className:"space-y-3",children:[B.type!=="income"&&B.accountId&&(()=>{const m=t.find(T=>T.id===B.accountId);return m?e.jsxs("div",{className:"flex justify-between py-2 border-b border-border/50",children:[e.jsx("span",{className:"text-muted-foreground",children:"From Account"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:m.color}}),e.jsx("span",{className:"font-medium",children:m.name})]})]}):null})(),(B.type==="income"||B.toAccountId)&&(()=>{const m=B.type==="income"?B.accountId:B.toAccountId,T=t.find(O=>O.id===m);return T?e.jsxs("div",{className:"flex justify-between py-2 border-b border-border/50",children:[e.jsx("span",{className:"text-muted-foreground",children:"To Account"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:T.color}}),e.jsx("span",{className:"font-medium",children:T.name})]})]}):null})(),B.transactionNature&&e.jsxs("div",{className:"flex justify-between py-2 border-b border-border/50",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type"}),e.jsx("span",{className:"font-medium capitalize",children:B.transactionNature})]}),B.status&&e.jsxs("div",{className:"flex justify-between py-2 border-b border-border/50",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx("span",{className:"font-medium capitalize",children:B.status})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-border/50",children:[e.jsx("span",{className:"text-muted-foreground",children:"Date"}),e.jsx("span",{className:"font-medium",children:new Date(B.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),B.isRecurring&&B.frequency&&e.jsxs("div",{className:"flex justify-between py-2 border-b border-border/50",children:[e.jsx("span",{className:"text-muted-foreground",children:"Frequency"}),e.jsx("span",{className:"font-medium capitalize",children:B.frequency.replace("-"," ")})]}),B.location&&e.jsxs("div",{className:"flex justify-between py-2 border-b border-border/50",children:[e.jsx("span",{className:"text-muted-foreground",children:"Location"}),e.jsx("span",{className:"font-medium",children:B.location})]}),B.tags&&B.tags.length>0&&e.jsxs("div",{className:"py-2 border-b border-border/50",children:[e.jsx("span",{className:"text-muted-foreground block mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:B.tags.map((m,T)=>e.jsxs("span",{className:"px-2 py-1 rounded-lg text-xs bg-muted",children:["#",m]},T))})]}),B.notes&&e.jsxs("div",{className:"py-2",children:[e.jsx("span",{className:"text-muted-foreground block mb-2",children:"Notes"}),e.jsx("p",{className:"text-sm",children:B.notes})]})]})]})}),e.jsx(sn,{isOpen:ps,onClose:()=>bs(!1),incomes:n,expenses:i,categories:l,dateRange:ge,formatCurrency:r}),e.jsx(Qa,{isOpen:js,onClose:()=>Ne(!1),categories:l,budgetOverview:ie,formatCurrency:r,currentMonth:Te,onSave:m=>{if(ie&&!ie.isVirtual)L(ie.id,{categoryBudgets:m.map(T=>({...T,spent:ie.categoryBudgets.find(O=>O.categoryId===T.categoryId)?.spent||0}))});else{const T=ne(Te);T&&L(T.id,{categoryBudgets:m.map(O=>({...O,spent:0}))})}Ne(!1)}})]})},yn=()=>e.jsx(nn,{});export{yn as Finance,yn as default};
