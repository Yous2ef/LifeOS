import{j as e}from"./radix-ui-CneFSYrq.js";import{c as D,B as w,I as F}from"./index-CO4gCy-A.js";import{m as p,G as Q}from"./GlassCard-HXv5_UBv.js";import{S as O,T,P,af as V,X as W,ac as Z,d as Y,b as _,ak as q,al as U,am as ee,s as te}from"./utils-C1zQmt0N.js";import{L as se,r as y}from"./router-CJK1Z2Io.js";import{L as k}from"./Label-yKW-Cje-.js";import{T as R}from"./TextArea-CHJ4Ga5k.js";import{A as E}from"./SkeletonCard-Bl2HcFYU.js";const H=({goal:m,formatCurrency:h,onClick:c,onContribute:s,size:o="md",className:v})=>{const t=Math.min(m.currentAmount/m.targetAmount*100,100),l=t>=100,j={sm:{ring:80,stroke:6,iconSize:20},md:{ring:120,stroke:8,iconSize:28},lg:{ring:160,stroke:10,iconSize:36}},{ring:r,stroke:f,iconSize:b}=j[o],x=(r-f)/2,n=2*Math.PI*x,g=n-t/100*n,i=(()=>{if(m.color)return m.color;switch(m.category){case"emergency-fund":return"#ef4444";case"savings":return"#22c55e";case"investment":return"#8b5cf6";case"purchase":return"#f59e0b";case"travel":return"#06b6d4";case"education":return"#3b82f6";default:return"#6366f1"}})();return e.jsxs(p.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,className:D("relative flex flex-col items-center p-4 rounded-3xl","bg-card/50 border border-border/50","cursor-pointer transition-all duration-200","hover:shadow-lg hover:border-primary/30",l&&"bg-gradient-to-br from-emerald-500/10 to-emerald-500/5",v),style:l?{boxShadow:"0 0 40px rgba(34, 197, 94, 0.2)"}:void 0,children:[l&&e.jsx(p.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center shadow-lg",children:e.jsx(O,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"relative",style:{width:r,height:r},children:[e.jsxs("svg",{className:"transform -rotate-90",width:r,height:r,children:[e.jsx("circle",{cx:r/2,cy:r/2,r:x,fill:"none",stroke:"currentColor",strokeWidth:f,className:"text-muted/30"}),e.jsx(p.circle,{cx:r/2,cy:r/2,r:x,fill:"none",stroke:i,strokeWidth:f,strokeLinecap:"round",strokeDasharray:n,initial:{strokeDashoffset:n},animate:{strokeDashoffset:g},transition:{duration:1,ease:"easeOut"},style:{filter:`drop-shadow(0 0 8px ${i}60)`}})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[m.icon?e.jsx("span",{style:{fontSize:b},children:m.icon}):e.jsx(T,{className:"text-muted-foreground",style:{width:b,height:b}}),e.jsxs(p.span,{initial:{scale:.8},animate:{scale:1},className:"text-lg font-bold tabular-nums mt-1",style:{color:i},children:[t.toFixed(0),"%"]},t)]})]}),e.jsxs("div",{className:"mt-3 text-center space-y-1",children:[e.jsx("h4",{className:"font-semibold text-sm truncate max-w-[120px]",children:m.title}),e.jsxs("p",{className:"text-xs text-muted-foreground tabular-nums",children:[h(m.currentAmount)," /"," ",h(m.targetAmount)]})]}),!l&&s&&e.jsxs(w,{size:"sm",variant:"ghost",onClick:a=>{a.stopPropagation(),s()},className:"mt-2 h-8 px-3 rounded-full text-xs gap-1",style:{color:i},children:[e.jsx(P,{className:"w-3 h-3"}),"Add"]}),m.deadline&&!l&&e.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:new Date(m.deadline)>new Date?e.jsxs("span",{children:[Math.ceil((new Date(m.deadline).getTime()-Date.now())/(1e3*60*60*24))," ","days left"]}):e.jsx("span",{className:"text-rose-500",children:"Overdue"})})]})},ue=({goals:m,formatCurrency:h,onGoalClick:c,onContribute:s,onAddGoal:o,className:v,maxGoals:t})=>{const l=m.filter(n=>n.status==="active"),j=m.filter(n=>n.status==="completed"),r=t?l.slice(0,t):l,f=t&&l.length>t,b=l.reduce((n,g)=>n+g.targetAmount,0),x=l.reduce((n,g)=>n+g.currentAmount,0);return m.length===0?e.jsx(Q,{intensity:"light",padding:"lg",className:D("text-center",v),children:e.jsxs("div",{className:"py-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 mx-auto mb-4 flex items-center justify-center",children:e.jsx(T,{className:"w-8 h-8 text-primary"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Set Your First Goal"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Start saving towards something meaningful"}),o&&e.jsxs(w,{onClick:o,className:"rounded-full gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Create Goal"]})]})}):e.jsxs("div",{className:D("space-y-4",v),children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:"Goals"}),e.jsxs("span",{className:"text-xs text-muted-foreground bg-muted/50 px-2 py-0.5 rounded-full",children:[l.length," active"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[b>0&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"Progress:"}),e.jsx("span",{className:"font-semibold text-emerald-500 tabular-nums",children:h(x)}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"/"}),e.jsx("span",{className:"font-medium tabular-nums",children:h(b)})]})}),o&&!f&&e.jsxs(w,{size:"sm",variant:"ghost",onClick:o,className:"rounded-full gap-1 h-7 px-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Add"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.map((n,g)=>e.jsx(p.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:g*.05},children:e.jsx(H,{goal:n,formatCurrency:h,onClick:()=>c?.(n),onContribute:()=>s?.(n.id),size:"sm"})},n.id)),f&&e.jsx(p.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:r.length*.05},children:e.jsxs(se,{to:"/finance/goals",className:D("flex flex-col items-center justify-center p-4 rounded-3xl","border-2 border-dashed border-emerald-500/30","text-emerald-500","hover:border-emerald-500/50 hover:bg-emerald-500/5","transition-all duration-200","min-h-[180px]"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-500/10 flex items-center justify-center mb-2",children:e.jsx(V,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-medium",children:"See All"}),e.jsxs("span",{className:"text-xs text-emerald-500/70",children:[l.length," goals"]})]})}),o&&!f&&e.jsxs(p.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:r.length*.05},onClick:o,className:D("flex flex-col items-center justify-center p-4 rounded-3xl","border-2 border-dashed border-muted-foreground/20","text-muted-foreground","hover:border-primary/30 hover:text-primary hover:bg-primary/5","transition-all duration-200","min-h-[180px]"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-muted/50 flex items-center justify-center mb-2",children:e.jsx(P,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-medium",children:"New Goal"})]})]}),j.length>0&&e.jsx("div",{className:"pt-2",children:e.jsxs("details",{className:"group",children:[e.jsxs("summary",{className:"text-sm text-muted-foreground cursor-pointer hover:text-foreground transition-colors list-none flex items-center gap-2",children:[e.jsxs("span",{children:["ðŸ† ",j.length," completed goal",j.length!==1?"s":""]}),e.jsx("span",{className:"text-xs group-open:rotate-90 transition-transform",children:"â–¶"})]}),e.jsx("div",{className:"mt-3 grid grid-cols-2 gap-3",children:j.map(n=>e.jsx(H,{goal:n,formatCurrency:h,onClick:()=>c?.(n),size:"sm"},n.id))})]})})]})},ae=[{value:"savings",label:"Savings",icon:"ðŸ’°"},{value:"emergency-fund",label:"Emergency Fund",icon:"ðŸ†˜"},{value:"travel",label:"Travel",icon:"âœˆï¸"},{value:"purchase",label:"Purchase",icon:"ðŸ›ï¸"},{value:"investment",label:"Investment",icon:"ðŸ“ˆ"},{value:"education",label:"Education",icon:"ðŸ“š"},{value:"other",label:"Other",icon:"ðŸŽ¯"}],re=[{value:"low",label:"Low",color:"text-blue-500"},{value:"medium",label:"Medium",color:"text-amber-500"},{value:"high",label:"High",color:"text-orange-500"},{value:"critical",label:"Critical",color:"text-rose-500"}],$=["#10b981","#3b82f6","#8b5cf6","#f59e0b","#ec4899","#06b6d4","#f97316","#84cc16"],he=({isOpen:m,onClose:h,onSubmit:c,defaultCurrency:s,goal:o})=>{const v=!!o,[t,l]=y.useState({title:"",description:"",targetAmount:0,currentAmount:0,currency:s,category:"savings",priority:"medium",deadline:"",icon:"ðŸŽ¯",color:$[0]}),[j,r]=y.useState("basic");y.useEffect(()=>{m&&(l(o?{title:o.title,description:o.description||"",targetAmount:o.targetAmount,currentAmount:o.currentAmount,currency:o.currency,category:o.category,priority:o.priority,deadline:o.deadline||"",icon:o.icon||"ðŸŽ¯",color:o.color||$[0]}:{title:"",description:"",targetAmount:0,currentAmount:0,currency:s,category:"savings",priority:"medium",deadline:"",icon:"ðŸŽ¯",color:$[0]}),r("basic"))},[m,s,o]);const f=()=>{!t.title||t.targetAmount<=0||(c(t),h())},b=t.targetAmount>0?Math.min(t.currentAmount/t.targetAmount*100,100):0,x=120,n=8,g=(x-n)/2,N=g*2*Math.PI,i=N-b/100*N;return e.jsx(E,{children:m&&e.jsxs(e.Fragment,{children:[e.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:h,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),e.jsx(p.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},onClick:a=>a.stopPropagation(),className:"fixed inset-x-4 top-[3%] md:inset-x-auto md:left-1/2 md:-translate-x-1/2 md:w-full md:max-w-lg z-[51]",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-xl border border-border/50 rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl flex items-center justify-center",style:{backgroundColor:`${t.color}20`},children:e.jsx(T,{className:"w-5 h-5",style:{color:t.color}})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:v?"Edit Goal":"New Goal"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:j==="basic"?"Set your target":"Add details"})]})]}),e.jsx("button",{onClick:h,title:"Close",className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center hover:bg-muted/80 transition-colors",children:e.jsx(W,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"p-4 space-y-4 max-h-[70vh] overflow-y-auto",children:j==="basic"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center py-4",children:e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{width:x,height:x,className:"transform -rotate-90",children:[e.jsx("circle",{cx:x/2,cy:x/2,r:g,fill:"none",stroke:"currentColor",strokeWidth:n,className:"text-muted/30"}),e.jsx(p.circle,{cx:x/2,cy:x/2,r:g,fill:"none",stroke:t.color,strokeWidth:n,strokeLinecap:"round",strokeDasharray:N,initial:{strokeDashoffset:N},animate:{strokeDashoffset:i},transition:{duration:.5,ease:"easeOut"}})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-3xl",children:t.icon}),e.jsxs("span",{className:"text-sm font-bold mt-1",children:[b.toFixed(0),"%"]})]})]})}),e.jsxs("div",{children:[e.jsxs(k,{className:"text-xs text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(Z,{className:"w-3 h-3"}),"Goal Name"]}),e.jsx(F,{value:t.title,onChange:a=>l(d=>({...d,title:a.target.value})),placeholder:"e.g., Emergency Fund, New MacBook",className:"rounded-xl",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-xs text-muted-foreground mb-2 block",children:"Target Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",children:t.currency}),e.jsx(F,{type:"number",value:t.targetAmount||"",onChange:a=>l(d=>({...d,targetAmount:parseFloat(a.target.value)||0})),placeholder:"0.00",className:"rounded-xl pl-14"})]})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-xs text-muted-foreground mb-2 block",children:"Current Progress (optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",children:t.currency}),e.jsx(F,{type:"number",value:t.currentAmount||"",onChange:a=>l(d=>({...d,currentAmount:parseFloat(a.target.value)||0})),placeholder:"0.00",className:"rounded-xl pl-14"})]})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-xs text-muted-foreground mb-2 block",children:"Category"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:ae.map(a=>e.jsxs("button",{onClick:()=>l(d=>({...d,category:a.value,icon:a.icon})),className:D("flex flex-col items-center gap-1 p-3 rounded-2xl transition-all",t.category===a.value?"ring-2":"bg-muted/50 hover:bg-muted"),style:t.category===a.value?{backgroundColor:`${t.color}20`,borderColor:t.color}:{},children:[e.jsx("span",{className:"text-xl",children:a.icon}),e.jsx("span",{className:"text-xs truncate w-full text-center",children:a.label})]},a.value))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs(k,{className:"text-xs text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(O,{className:"w-3 h-3"}),"Color"]}),e.jsx("div",{className:"flex gap-2",children:$.map(a=>e.jsx("button",{onClick:()=>l(d=>({...d,color:a})),className:D("w-8 h-8 rounded-full transition-all",t.color===a&&"ring-2 ring-offset-2 ring-offset-background"),style:{backgroundColor:a}},a))})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-xs text-muted-foreground mb-2 block",children:"Priority"}),e.jsx("div",{className:"flex gap-2",children:re.map(a=>e.jsx("button",{onClick:()=>l(d=>({...d,priority:a.value})),className:D("flex-1 px-3 py-2 rounded-xl text-sm transition-all",t.priority===a.value?"bg-muted ring-2":"bg-muted/50 hover:bg-muted",a.color),style:t.priority===a.value?{borderColor:t.color}:{},children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsxs(k,{className:"text-xs text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(Y,{className:"w-3 h-3"}),"Target Date (optional)"]}),e.jsx(F,{type:"date",value:t.deadline||"",onChange:a=>l(d=>({...d,deadline:a.target.value})),className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-xs text-muted-foreground mb-2 block",children:"Description (optional)"}),e.jsx(R,{value:t.description||"",onChange:a=>l(d=>({...d,description:a.target.value})),placeholder:"Why is this goal important to you?",className:"rounded-xl min-h-[80px]"})]})]})}),e.jsx("div",{className:"p-4 border-t border-border/50 flex gap-3",children:j==="basic"?e.jsxs(e.Fragment,{children:[e.jsx(w,{variant:"outline",onClick:h,className:"flex-1 rounded-xl",children:"Cancel"}),e.jsx(w,{onClick:()=>r("details"),disabled:!t.title||t.targetAmount<=0,className:"flex-1 rounded-xl",style:{backgroundColor:t.color},children:"Continue"})]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{variant:"outline",onClick:()=>r("basic"),className:"flex-1 rounded-xl",children:"Back"}),e.jsx(w,{onClick:f,className:"flex-1 rounded-xl",style:{backgroundColor:t.color},children:"Create Goal"})]})}),t.title&&t.targetAmount>0&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl text-sm",style:{backgroundColor:`${t.color}15`},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:t.icon}),e.jsx("span",{className:"font-medium",children:t.title})]}),e.jsxs("span",{style:{color:t.color},className:"font-semibold",children:[t.currency," ",t.targetAmount.toLocaleString()]})]})})]})})]})})},fe=({isOpen:m,onClose:h,onSubmit:c,goal:s,accounts:o,defaultCurrency:v,formatCurrency:t,calculateBalance:l})=>{const j=o.filter(u=>u.isActive),[r,f]=y.useState({goalId:"",amount:0,accountId:j[0]?.id||"",date:new Date().toISOString().split("T")[0],notes:""}),[b,x]=y.useState(!1);y.useEffect(()=>{if(m&&s){const u=s.targetAmount-s.currentAmount;f({goalId:s.id,amount:Math.min(u,100),accountId:j[0]?.id||"",date:new Date().toISOString().split("T")[0],notes:""}),x(!1)}},[m,s,j]);const n=async()=>{!r.accountId||r.amount<=0||!s||(x(!0),await new Promise(u=>setTimeout(u,500)),c(r),x(!1))};if(!s)return null;const g=s.currentAmount/s.targetAmount*100,N=s.currentAmount+r.amount,i=Math.min(N/s.targetAmount*100,100),a=s.targetAmount-s.currentAmount,d=N>=s.targetAmount,A=j.find(u=>u.id===r.accountId),S=A?l(A.id):0,G=r.amount>S,C=100,z=8,L=(C-z)/2,M=L*2*Math.PI,B=M-g/100*M,X=M-i/100*M;return e.jsx(E,{children:m&&e.jsxs(e.Fragment,{children:[e.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:h,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),e.jsx(p.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:u=>u.stopPropagation(),className:"fixed inset-x-4 top-[10%] md:inset-auto md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-full md:max-w-md z-[51]",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-xl rounded-2xl border border-emerald-500/20 shadow-2xl shadow-emerald-500/10 overflow-hidden",children:[e.jsx("div",{className:"px-6 pt-6 pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{backgroundColor:`${s.color||"#10b981"}20`},children:e.jsx("span",{className:"text-xl",children:s.icon||"ðŸŽ¯"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Add to Goal"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.title})]})]}),e.jsx("button",{onClick:h,className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center hover:bg-muted/80 transition-colors",children:e.jsx(W,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/10 to-teal-500/10 rounded-xl p-4 border border-emerald-500/20",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs("svg",{width:C,height:C,className:"transform -rotate-90",children:[e.jsx("circle",{cx:C/2,cy:C/2,r:L,fill:"none",stroke:"currentColor",strokeWidth:z,className:"text-muted/30"}),e.jsx("circle",{cx:C/2,cy:C/2,r:L,fill:"none",stroke:"currentColor",strokeWidth:z,strokeLinecap:"round",strokeDasharray:M,strokeDashoffset:B,className:"text-emerald-500/40"}),e.jsx(p.circle,{cx:C/2,cy:C/2,r:L,fill:"none",stroke:"currentColor",strokeWidth:z,strokeLinecap:"round",strokeDasharray:M,initial:{strokeDashoffset:B},animate:{strokeDashoffset:X},transition:{duration:.5},className:"text-emerald-500"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-lg font-bold",children:[Math.round(i),"%"]})})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Current"}),e.jsx("span",{className:"font-medium",children:t(s.currentAmount)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Adding"}),e.jsxs("span",{className:"font-medium text-emerald-400",children:["+",t(r.amount)]})]}),e.jsxs("div",{className:"border-t border-white/10 pt-2 flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"New Total"}),e.jsx("span",{className:"font-bold text-emerald-400",children:t(Math.min(N,s.targetAmount))})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Target"}),e.jsx("span",{children:t(s.targetAmount)})]})]})]}),d&&e.jsxs(p.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 flex items-center gap-2 text-sm text-amber-400 bg-amber-500/10 rounded-lg px-3 py-2",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"This contribution will complete your goal! ðŸŽ‰"})]})]})}),e.jsxs("div",{className:"px-6 pb-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Contribution Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{type:"number",value:r.amount||"",onChange:u=>f(I=>({...I,amount:parseFloat(u.target.value)||0})),placeholder:"0.00",className:"text-lg font-semibold pl-8",min:0,step:.01}),e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:v==="EGP"?"Â£":"$"})]}),a>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>f(u=>({...u,amount:Math.min(a,50)})),className:"text-xs px-2 py-1 rounded bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20",children:"+50"}),e.jsx("button",{type:"button",onClick:()=>f(u=>({...u,amount:Math.min(a,100)})),className:"text-xs px-2 py-1 rounded bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20",children:"+100"}),e.jsxs("button",{type:"button",onClick:()=>f(u=>({...u,amount:a})),className:"text-xs px-2 py-1 rounded bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20",children:["Complete (",t(a),")"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"From Account"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:j.map(u=>{const I=l(u.id),J=r.accountId===u.id;return e.jsxs("button",{type:"button",onClick:()=>f(K=>({...K,accountId:u.id})),className:D("p-3 rounded-xl border text-left transition-all",J?"border-emerald-500/50 bg-emerald-500/10":"border-white/10 hover:border-white/20"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{children:u.icon}),e.jsx("span",{className:"text-sm font-medium truncate",children:u.name})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t(I)})]},u.id)})}),G&&e.jsx("p",{className:"text-xs text-red-400",children:"Insufficient funds in this account"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Notes (optional)"}),e.jsx(R,{value:r.notes||"",onChange:u=>f(I=>({...I,notes:u.target.value})),placeholder:"Add a note...",rows:2})]}),e.jsx(w,{onClick:n,disabled:!r.accountId||r.amount<=0||G||b,className:"w-full bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white",children:b?e.jsx(p.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full"}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Add"," ",t(r.amount)," to Goal"]})})]})]})})]})})},pe=({isOpen:m,onClose:h,goal:c,formatCurrency:s,onEdit:o,onContribute:v,onWithdraw:t})=>{if(!c)return null;const l=Math.min(c.currentAmount/c.targetAmount*100,100),j=c.targetAmount-c.currentAmount,r=l>=100,f=[...c.contributions||[]].sort((d,A)=>new Date(A.date).getTime()-new Date(d.date).getTime()),b=d=>{const A=new Date(d);return A.toLocaleDateString("en-US",{day:"numeric",month:"short",year:A.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},x=140,n=10,g=(x-n)/2,N=g*2*Math.PI,i=N-l/100*N,a=c.color||"#10b981";return e.jsx(E,{children:m&&e.jsxs(e.Fragment,{children:[e.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:h,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),e.jsx(p.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:d=>d.stopPropagation(),className:"fixed inset-x-4 top-[5%] md:inset-auto md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-full md:max-w-md z-[51] max-h-[90vh] overflow-hidden flex flex-col",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-xl rounded-2xl border border-emerald-500/20 shadow-2xl shadow-emerald-500/10 overflow-hidden flex flex-col max-h-full",children:[e.jsx("div",{className:"px-6 pt-6 pb-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl",style:{backgroundColor:`${a}20`},children:c.icon||"ðŸŽ¯"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:c.title}),e.jsxs("p",{className:"text-xs text-muted-foreground capitalize",children:[c.category.replace("-"," ")," ","â€¢ ",c.priority," priority"]})]})]}),e.jsx("button",{onClick:h,className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center hover:bg-muted/80 transition-colors",children:e.jsx(W,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"px-6 pb-4 flex-shrink-0",children:e.jsxs("div",{className:"rounded-xl p-4 border",style:{background:`linear-gradient(135deg, ${a}10, ${a}05)`,borderColor:`${a}30`},children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs("svg",{width:x,height:x,className:"transform -rotate-90",children:[e.jsx("circle",{cx:x/2,cy:x/2,r:g,fill:"none",stroke:"currentColor",strokeWidth:n,className:"text-muted/30"}),e.jsx(p.circle,{cx:x/2,cy:x/2,r:g,fill:"none",stroke:a,strokeWidth:n,strokeLinecap:"round",strokeDasharray:N,initial:{strokeDashoffset:N},animate:{strokeDashoffset:i},transition:{duration:1},style:{filter:`drop-shadow(0 0 10px ${a}60)`}})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-3xl",children:c.icon||"ðŸŽ¯"}),e.jsxs("span",{className:"text-xl font-bold tabular-nums",style:{color:a},children:[l.toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Current"}),e.jsx("div",{className:"text-xl font-bold",style:{color:a},children:s(c.currentAmount)})]}),e.jsxs("div",{className:"border-t border-white/10 pt-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Target"}),e.jsx("div",{className:"text-lg font-semibold",children:s(c.targetAmount)})]}),!r&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s(j)," ","remaining"]})]})]}),c.deadline&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10 flex items-center gap-2 text-sm",children:[e.jsx(Y,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Deadline:"}),e.jsx("span",{children:b(c.deadline)}),!r&&new Date(c.deadline)>new Date&&e.jsxs("span",{className:"ml-auto text-xs px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-400",children:[Math.ceil((new Date(c.deadline).getTime()-Date.now())/(1e3*60*60*24))," ","days left"]})]})]})}),e.jsxs("div",{className:"px-6 pb-4 flex-1 overflow-hidden flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4",style:{color:a}}),"Contribution History"]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[f.length," ","contribution",f.length!==1?"s":""]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 scrollbar-thin",children:f.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(T,{className:"w-10 h-10 mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"No transactions yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Start adding money to reach your goal!"})]}):f.map((d,A)=>{const S=d.amount<0,G=Math.abs(d.amount);return e.jsxs(p.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:A*.05},className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:S?"rgba(239, 68, 68, 0.2)":`${a}20`},children:S?e.jsx(q,{className:"w-4 h-4 text-red-400"}):e.jsx(P,{className:"w-4 h-4",style:{color:a}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`font-medium ${S?"text-red-400":""}`,style:S?{}:{color:a},children:[S?"-":"+",s(G)]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:b(d.date)})]}),d.notes&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 truncate",children:d.notes})]})]},d.id)})})]}),e.jsxs("div",{className:"px-6 pb-6 pt-2 flex-shrink-0 border-t border-white/10 space-y-2",children:[e.jsxs("div",{className:"flex gap-3",children:[v&&!r&&e.jsxs(w,{onClick:()=>{h(),v()},className:"flex-1 gap-2",style:{background:`linear-gradient(135deg, ${a}, ${a}cc)`},children:[e.jsx(P,{className:"w-4 h-4"}),"Add Money"]}),t&&c.currentAmount>0&&e.jsxs(w,{variant:"outline",onClick:()=>{h(),t()},className:"flex-1 gap-2 border-amber-500/30 text-amber-400 hover:bg-amber-500/10",children:[e.jsx(U,{className:"w-4 h-4"}),"Withdraw"]})]}),o&&e.jsxs(w,{variant:"ghost",onClick:()=>{h(),o()},className:"w-full gap-2 text-muted-foreground hover:text-foreground",children:[e.jsx(ee,{className:"w-4 h-4"}),"Edit Goal"]})]})]})})]})})};function je({isOpen:m,onClose:h,onSubmit:c,goal:s,formatCurrency:o}){const[v,t]=y.useState(""),[l,j]=y.useState("");y.useEffect(()=>{s&&(t(""),j(""))},[s?.id]);const r=y.useMemo(()=>{const i=parseFloat(v);return isNaN(i)?0:i},[v]),f=y.useMemo(()=>s?Math.max(0,s.currentAmount-r):0,[s,r]),b=y.useMemo(()=>!s||s.targetAmount===0?0:Math.min(100,f/s.targetAmount*100),[s,f]),x=y.useMemo(()=>!s||s.targetAmount===0?0:Math.min(100,s.currentAmount/s.targetAmount*100),[s]),n=r>(s?.currentAmount||0),g=i=>{i.preventDefault(),r>0&&r<=(s?.currentAmount||0)&&c({amount:r,reason:l.trim()||void 0})},N=y.useMemo(()=>{if(!s)return[];const i=s.currentAmount,a=[];return i>=50&&a.push({label:"-50",value:50}),i>=100&&a.push({label:"-100",value:100}),i>=500&&a.push({label:"-500",value:500}),a.push({label:"All",value:i}),a.slice(0,4)},[s]);return s?e.jsx(E,{children:m&&e.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:h,children:e.jsxs(p.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",duration:.5},className:"w-full max-w-md bg-card/95 backdrop-blur-xl rounded-2xl border border-amber-500/20 shadow-2xl shadow-amber-500/10 overflow-hidden",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"relative px-6 py-4 border-b border-border",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500/10 via-orange-500/10 to-red-500/10"}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-amber-500/20",children:e.jsx(U,{className:"w-5 h-5 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Withdraw from Goal"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.title})]})]}),e.jsx("button",{onClick:h,className:"p-2 rounded-xl hover:bg-muted transition-colors",children:e.jsx(W,{className:"w-5 h-5 text-muted-foreground"})})]})]}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{className:"w-32 h-32 -rotate-90",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"42",fill:"none",className:"stroke-muted",strokeWidth:"8"}),e.jsx(p.circle,{cx:"50",cy:"50",r:"42",fill:"none",stroke:"rgba(16, 185, 129, 0.3)",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${x*2.64} 264`}),e.jsx(p.circle,{cx:"50",cy:"50",r:"42",fill:"none",stroke:n?"#ef4444":r>0?"#f59e0b":"#10b981",strokeWidth:"8",strokeLinecap:"round",initial:!1,animate:{strokeDasharray:`${b*2.64} 264`},transition:{duration:.3,ease:"easeOut"}})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs(p.span,{className:`text-2xl font-bold ${n?"text-red-500":"text-foreground"}`,initial:{scale:1.1},animate:{scale:1},children:[Math.round(b),"%"]},b),e.jsx("span",{className:"text-xs text-muted-foreground",children:"after withdrawal"})]})]})}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-emerald-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Balance"})]}),e.jsx("span",{className:"text-sm font-medium text-emerald-500",children:o(s.currentAmount,s.currency)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Withdrawal Amount"}),e.jsx(F,{type:"number",value:v,onChange:i=>t(i.target.value),placeholder:"0.00",min:"0",max:s.currentAmount,step:"0.01",className:"text-lg",autoFocus:!0}),e.jsx("div",{className:"flex gap-2",children:N.map(i=>e.jsx("button",{type:"button",onClick:()=>t(i.value.toString()),className:"flex-1 px-3 py-2 text-sm font-medium rounded-lg bg-amber-500/20 text-amber-600 dark:text-amber-400 hover:bg-amber-500/30 transition-colors",children:i.label},i.label))})]}),n&&e.jsxs(p.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-3 rounded-xl bg-red-500/20 border border-red-500/30",children:[e.jsx(te,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-red-600 dark:text-red-300",children:"Amount exceeds current balance"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Reason (Optional)"}),e.jsx(R,{value:l,onChange:i=>j(i.target.value),placeholder:"Why are you withdrawing?",rows:2})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(w,{type:"button",variant:"outline",onClick:h,className:"flex-1",children:"Cancel"}),e.jsxs(w,{type:"submit",disabled:r<=0||n,className:"flex-1 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600",children:["Withdraw"," ",r>0&&o(r,s.currency)]})]})]})]})})}):null}export{ue as G,he as a,fe as b,pe as c,je as d};
