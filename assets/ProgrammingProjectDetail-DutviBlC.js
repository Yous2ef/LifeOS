import{j as e}from"./radix-ui-CneFSYrq.js";import{r as j,u as de,d as ce}from"./router-CJK1Z2Io.js";import{C as P}from"./Card-CES3Mh8O.js";import{M as Z,B as m,z as T,c as z,b as S,q as U,p as L}from"./index-CO4gCy-A.js";import{P as me}from"./progress-QUB5Sg2T.js";import{P as ue,u as xe}from"./ProjectModal-YhKTWNTF.js";import{F as K}from"./FormSelect-BRooFS65.js";import{T as ee}from"./TextArea-CHJ4Ga5k.js";import{z as D,q as I,ag as he,K as V,A as pe,d as ge,a as fe,a1 as je,ah as Ne,a0 as B,_ as ve,$ as be,P as Q}from"./utils-C1zQmt0N.js";import{d as ye,e as X,D as Te,f as we,S as Me,v as Se,a as Ce,s as De,K as ke,P as Pe,u as Ee,b as Ae,C as ze}from"./dnd-kit-Cy9T72DN.js";import"./react-vendor-pR2cKLDH.js";import"./charts-CDpzOIQv.js";const Ie=({isOpen:s,onClose:l,onSave:g,onUpdate:p,task:n})=>{const[a,o]=j.useState({title:"",description:"",status:"todo",priority:5,estimatedMinutes:"",completed:!1});j.useEffect(()=>{o(n?{title:n.title,description:n.description||"",status:n.status,priority:n.priority,estimatedMinutes:n.estimatedMinutes?.toString()||"",completed:n.completed}:{title:"",description:"",status:"todo",priority:5,estimatedMinutes:"",completed:!1})},[n,s]);const u=d=>{if(d.preventDefault(),!a.title.trim()){T.error("Please enter a task title");return}const N={title:a.title.trim(),description:a.description.trim()||void 0,status:a.status,priority:a.priority,estimatedMinutes:a.estimatedMinutes?parseInt(a.estimatedMinutes):void 0,actualMinutes:n?.actualMinutes||0,timeEntries:n?.timeEntries||[],completed:a.completed,completedAt:a.completed?new Date().toISOString():void 0};n&&p?p(n.id,N):g(N),l()};return e.jsx(Z,{isOpen:s,onClose:l,title:n?"Edit Task":"Add New Task",children:e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsx(K,{label:"Task Title",value:a.title,onChange:d=>o({...a,title:d.target.value}),placeholder:"e.g., Implement user authentication",required:!0}),e.jsx(ee,{label:"Description",value:a.description,onChange:d=>o({...a,description:d.target.value}),placeholder:"Describe the task in detail...",rows:4}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Priority: ",a.priority]}),e.jsx("input",{type:"range",min:"1",max:"10",value:a.priority,onChange:d=>o({...a,priority:parseInt(d.target.value)}),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsx("span",{children:"Low"}),e.jsx("span",{children:"Medium"}),e.jsx("span",{children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Status"}),e.jsxs("select",{value:a.status,onChange:d=>o({...a,status:d.target.value}),className:"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"todo",children:"To Do"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Done"})]})]}),e.jsx(K,{label:"Estimated Time (minutes)",type:"number",min:"0",step:"15",value:a.estimatedMinutes,onChange:d=>o({...a,estimatedMinutes:d.target.value}),placeholder:"e.g., 120 (2 hours)"}),n&&n.actualMinutes>0&&e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Time spent: ",Math.floor(n.actualMinutes/60),"h"," ",n.actualMinutes%60,"m",n.timeEntries.length>0&&` (${n.timeEntries.length} sessions)`]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Use the "Track Time" button in the task list to add work sessions'})]}),n&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"completed",checked:a.completed,onChange:d=>o({...a,completed:d.target.checked}),className:"w-4 h-4 rounded border-border text-primary focus:ring-primary"}),e.jsx("label",{htmlFor:"completed",className:"text-sm font-medium text-foreground cursor-pointer",children:"Mark as completed"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(m,{type:"button",variant:"outline",onClick:l,children:"Cancel"}),e.jsx(m,{type:"submit",children:n?"Update Task":"Add Task"})]})]})})},$e=({isOpen:s,onClose:l,taskTitle:g,timeEntries:p,onAddTimeEntry:n,onDeleteTimeEntry:a})=>{const[o,u]=j.useState(""),[d,N]=j.useState(""),v=p.reduce((r,f)=>r+f.minutes,0),b=Math.floor(v/60),x=v%60,i=()=>{const r=parseInt(o);if(!r||r<=0){T.error("Please enter a valid number of minutes");return}n(r,d.trim()||void 0),u(""),N(""),T.success(`Added ${r} minutes`)},c=r=>{const f=new Date(r);return f.toLocaleDateString()+" "+f.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return e.jsx(Z,{isOpen:s,onClose:l,title:`Time Tracking: ${g}`,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-primary/10 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Time Spent"}),e.jsxs("div",{className:"text-3xl font-bold text-primary",children:[b,"h ",x,"m"]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[v," minutes total"]})]}),e.jsxs("div",{className:"space-y-3 border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Add Work Session"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(K,{label:"Minutes Worked",type:"number",min:"1",value:o,onChange:r=>u(r.target.value),placeholder:"e.g., 30"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>u("15"),className:"mt-6",children:"15m"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>u("30"),className:"mt-6",children:"30m"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>u("60"),className:"col-span-1",children:"1h"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>u("90"),className:"col-span-1",children:"1.5h"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>u("120"),className:"col-span-1",children:"2h"})]}),e.jsx(ee,{label:"Note (Optional)",value:d,onChange:r=>N(r.target.value),placeholder:"What did you work on?",rows:2}),e.jsxs(m,{onClick:i,className:"w-full gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"Add Time Entry"]})]}),p.length>0&&e.jsxs("div",{className:"space-y-2 border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Work Sessions"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[...p].reverse().map(r=>e.jsxs("div",{className:"flex items-start justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-primary"}),e.jsxs("span",{className:"font-medium text-foreground",children:[Math.floor(r.minutes/60)>0&&`${Math.floor(r.minutes/60)}h `,r.minutes%60,"m"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:c(r.date)})]}),r.note&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 ml-6",children:r.note})]}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>a(r.id),className:"ml-2 h-8 px-2 hover:bg-red-50 hover:text-red-600 hover:border-red-200",children:e.jsx(I,{className:"h-3 w-3"})})]},r.id))})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx(m,{variant:"outline",onClick:l,children:"Close"})})]})})},He=({id:s,title:l,color:g,tasks:p,children:n})=>{const{setNodeRef:a,isOver:o}=Ee({id:s});return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold text-foreground flex items-center gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full bg-gradient-to-r ${g}`}),l]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:p.length})]}),e.jsx("div",{ref:a,className:z("space-y-3 min-h-[200px] p-3 rounded-lg border-2 border-dashed transition-colors",o?"bg-primary/10 border-primary":"bg-muted/30 border-border"),children:n})]})},Oe=({task:s,onEdit:l,onDelete:g,onTrackTime:p})=>{const{attributes:n,listeners:a,setNodeRef:o,transform:u,transition:d,isDragging:N}=Ae({id:s.id}),v={transform:ze.Transform.toString(u),transition:d},b=Math.floor(s.actualMinutes/60),x=s.actualMinutes%60;return e.jsx(P,{ref:o,style:v,...n,className:z("p-4 hover:shadow-md transition-shadow",N&&"opacity-50"),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{...a,className:"font-medium text-foreground flex-1 cursor-move",children:s.title}),e.jsxs(S,{variant:U(s.priority),className:"text-xs",children:["P",s.priority]})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[s.estimatedMinutes&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"h-3 w-3"}),"Est: ",Math.floor(s.estimatedMinutes/60),"h"," ",s.estimatedMinutes%60,"m"]}),s.actualMinutes>0&&e.jsxs("span",{className:"flex items-center gap-1 text-primary font-medium",children:[e.jsx(he,{className:"h-3 w-3"}),b>0&&`${b}h `,x,"m"]}),s.timeEntries.length>0&&e.jsxs("span",{children:["• ",s.timeEntries.length," sessions"]})]}),e.jsxs("div",{className:"flex items-center gap-1 pt-2 border-t",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:i=>{i.stopPropagation(),p()},className:"h-7 px-2 text-xs flex-1",children:[e.jsx(D,{className:"h-3 w-3 mr-1"}),"Track Time"]}),e.jsx(m,{variant:"outline",size:"sm",onClick:i=>{i.stopPropagation(),l()},className:"h-7 px-2",children:e.jsx(V,{className:"h-3 w-3"})}),e.jsx(m,{variant:"outline",size:"sm",onClick:i=>{i.stopPropagation(),g()},className:"h-7 px-2 hover:bg-red-50 hover:text-red-600 hover:border-red-200",children:e.jsx(I,{className:"h-3 w-3"})})]})]})})},Fe=({tasks:s,onEditTask:l,onDeleteTask:g,onUpdateTask:p,onTrackTime:n})=>{const[a,o]=j.useState(null),u=ye(X(Pe),X(ke,{coordinateGetter:De})),d=[{id:"todo",title:"To Do",color:"from-blue-500 to-cyan-500"},{id:"in-progress",title:"In Progress",color:"from-yellow-500 to-orange-500"},{id:"done",title:"Done",color:"from-green-500 to-emerald-500"}],N=x=>s.filter(i=>i.status===x),v=x=>{const i=s.find(c=>c.id===x.active.id);o(i||null)},b=x=>{const{active:i,over:c}=x;if(o(null),!c)return;const r=s.find(k=>k.id===i.id);if(!r)return;const f=c.id.toString(),y=d.find(k=>k.id===f)?.id;y&&y!==r.status&&p(r.id,{status:y,completed:y==="done",completedAt:y==="done"?new Date().toISOString():void 0})};return e.jsxs(Te,{sensors:u,collisionDetection:we,onDragStart:v,onDragEnd:b,children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:d.map(x=>{const i=N(x.id);return e.jsx(He,{id:x.id,title:x.title,color:x.color,tasks:i,children:e.jsx(Me,{items:i.map(c=>c.id),strategy:Se,children:i.length===0?e.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No tasks"}):i.map(c=>e.jsx(Oe,{task:c,onEdit:()=>l(c),onDelete:()=>g(c.id),onTrackTime:()=>n(c)},c.id))})},x.id)})}),e.jsx(Ce,{children:a?e.jsx(P,{className:"p-4 shadow-lg opacity-90",children:e.jsx("div",{className:"font-medium text-foreground",children:a.title})}):null})]})},Le=({project:s,tasks:l,onBack:g,onUpdate:p,onDelete:n,onAddTask:a,onUpdateTask:o,onDeleteTask:u,onToggleTask:d})=>{const[N,v]=j.useState(!1),[b,x]=j.useState(!1),[i,c]=j.useState(),[r,f]=j.useState(!1),[y,k]=j.useState("kanban"),[se,q]=j.useState(!1),[E,G]=j.useState(),R=l.filter(t=>t.completed).length,W=l.length>0?R/l.length*100:0,$=l.reduce((t,h)=>t+(h.estimatedMinutes||0),0),H=l.reduce((t,h)=>t+h.actualMinutes,0),_=Math.floor($/60),te=$%60,ae=Math.floor(H/60),re=H%60,ie=()=>s.status==="to-do"?e.jsx(S,{variant:"secondary",children:"To Do"}):s.status==="in-progress"?e.jsx(S,{variant:"default",children:"In Progress"}):e.jsx(S,{className:"bg-green-500/10 text-green-500 border-green-500/20",children:"Completed"}),Y=t=>{c(t),x(!0)},O=()=>{x(!1),c(void 0)},J=t=>{G(t),q(!0)},ne=(t,h,w)=>{const M=l.find(oe=>oe.id===t);if(!M)return;const A={id:`time-${Date.now()}`,minutes:h,note:w,date:new Date().toISOString()},F=[...M.timeEntries,A],C=M.actualMinutes+h;o(t,{timeEntries:F,actualMinutes:C})},le=(t,h)=>{const w=l.find(C=>C.id===t);if(!w)return;const M=w.timeEntries.find(C=>C.id===h);if(!M)return;const A=w.timeEntries.filter(C=>C.id!==h),F=w.actualMinutes-M.minutes;o(t,{timeEntries:A,actualMinutes:Math.max(0,F)}),T.success("Time entry deleted")};return e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(m,{variant:"outline",size:"default",onClick:g,className:"gap-2 hover:bg-primary/10 hover:border-primary text-primary transition-all duration-200 font-medium shadow-sm",children:[e.jsx(pe,{className:"h-4 w-4"}),"Back to Projects"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{variant:"outline",size:"default",onClick:()=>v(!0),className:"gap-2 hover:bg-blue-50 hover:border-blue-500 hover:text-blue-600 transition-all duration-200 shadow-sm text-primary",children:[e.jsx(V,{className:"h-4 w-4"}),"Edit Project"]}),e.jsxs(m,{variant:"outline",size:"default",onClick:()=>f(!0),className:"gap-2 hover:bg-red-50 hover:border-red-500 hover:text-red-600 transition-all duration-200 shadow-sm text-primary",children:[e.jsx(I,{className:"h-4 w-4"}),"Delete"]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Programming > Projects >"," ",e.jsx("span",{className:"text-foreground font-medium",children:s.title})]}),e.jsx(P,{className:"p-6 border-border",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:s.title}),e.jsxs("p",{className:"text-lg text-muted-foreground",children:[s.type.charAt(0).toUpperCase()+s.type.slice(1)," ","Project"]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[ie(),e.jsxs(S,{variant:U(s.priority),children:["Priority ",s.priority]})]})]}),s.description&&e.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:s.description})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.technologies.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Technologies"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.technologies.map(t=>e.jsx(S,{variant:"outline",children:t},t))})]}),s.startDate&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"Start Date"]}),e.jsx("p",{className:"text-sm text-foreground",children:L(s.startDate)})]}),s.completedDate&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Completed Date"]}),e.jsx("p",{className:"text-sm text-foreground",children:L(s.completedDate)})]}),s.dueDate&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),"Due Date"]}),e.jsx("p",{className:"text-sm text-foreground",children:L(s.dueDate)})]}),(_>0||s.actualHours>0)&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"Time Spent"]}),e.jsxs("p",{className:"text-sm text-foreground",children:[s.actualHours,"h",s.estimatedHours&&` / ${s.estimatedHours}h estimated`]})]}),s.repositoryUrl&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),"Repository"]}),e.jsxs("a",{href:s.repositoryUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline flex items-center gap-1",children:["View on GitHub",e.jsx(B,{className:"h-3 w-3"})]})]}),s.liveUrl&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Live Demo"]}),e.jsxs("a",{href:s.liveUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline flex items-center gap-1",children:["View Live Site",e.jsx(B,{className:"h-3 w-3"})]})]})]}),s.features&&s.features.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Key Features"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:s.features.map((t,h)=>e.jsx("li",{className:"text-sm text-foreground",children:t},h))})]})]})}),e.jsx(P,{className:"p-6 border-border",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Project Tasks"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[R," of ",l.length," tasks completed",H>0&&` • ${ae}h ${re}m spent`,$>0&&` / ${_}h ${te}m estimated`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 border rounded-md p-1",children:[e.jsx(m,{variant:y==="kanban"?"default":"ghost",size:"sm",onClick:()=>k("kanban"),className:"h-7 px-2",children:e.jsx(ve,{className:"h-3 w-3"})}),e.jsx(m,{variant:y==="list"?"default":"ghost",size:"sm",onClick:()=>k("list"),className:"h-7 px-2",children:e.jsx(be,{className:"h-3 w-3"})})]}),e.jsxs(m,{onClick:()=>x(!0),className:"gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"Add Task"]})]})]}),l.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(me,{value:W,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[W.toFixed(0),"% complete"]})]}),l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No tasks yet"}),e.jsxs(m,{onClick:()=>x(!0),variant:"outline",children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Add Your First Task"]})]}):y==="kanban"?e.jsx(Fe,{tasks:l,onEditTask:Y,onDeleteTask:u,onUpdateTask:o,onTrackTime:J}):e.jsx("div",{className:"space-y-3",children:l.map(t=>{const h=Math.floor(t.actualMinutes/60),w=t.actualMinutes%60,M=Math.floor((t.estimatedMinutes||0)/60),A=(t.estimatedMinutes||0)%60;return e.jsx(P,{className:z("p-4 border-border hover:border-primary/50 transition-colors",t.completed&&"opacity-60"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.completed,onChange:()=>d(t.id),className:"w-5 h-5 mt-0.5 rounded border-border text-primary focus:ring-primary cursor-pointer",title:"Mark as complete"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:z("font-medium text-foreground",t.completed&&"line-through text-muted-foreground"),children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[e.jsxs(S,{variant:U(t.priority),className:"text-xs",children:["P",t.priority]}),e.jsxs(S,{variant:"outline",className:"text-xs",children:[t.status==="todo"&&"To Do",t.status==="in-progress"&&"In Progress",t.status==="done"&&"Done"]}),t.estimatedMinutes&&e.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(D,{className:"h-3 w-3"}),"Est:"," ",M,"h"," ",A,"m"]}),t.actualMinutes>0&&e.jsxs("span",{className:"text-xs text-primary font-medium flex items-center gap-1",children:["Spent:"," ",h,"h"," ",w,"m"]}),t.timeEntries.length>0&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.timeEntries.length," ","sessions)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>J(t),className:"h-8 px-2",title:"Track time",children:e.jsx(D,{className:"h-3 w-3"})}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>Y(t),className:"h-8 px-2",children:e.jsx(V,{className:"h-3 w-3"})}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>u(t.id),className:"h-8 px-2 hover:bg-red-50 hover:text-red-600 hover:border-red-200",children:e.jsx(I,{className:"h-3 w-3"})})]})]})})]})},t.id)})})]})}),e.jsx(ue,{isOpen:N,onClose:()=>v(!1),onSave:()=>{},onUpdate:(t,h)=>{p(h),v(!1)},project:s}),e.jsx(Ie,{isOpen:b,onClose:O,onSave:t=>{a(t),O()},onUpdate:(t,h)=>{o(t,h),O()},task:i}),E&&e.jsx($e,{isOpen:se,onClose:()=>{q(!1),G(void 0)},taskTitle:E.title,timeEntries:E.timeEntries,onAddTimeEntry:(t,h)=>{ne(E.id,t,h)},onDeleteTimeEntry:t=>{le(E.id,t)}}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(P,{className:"p-6 max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Delete Project?"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Are you sure you want to delete this project? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(m,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(m,{variant:"destructive",onClick:()=>{n(),f(!1)},children:"Delete Project"})]})]})})]})},Xe=()=>{const{projectId:s}=de(),l=ce(),{projects:g,updateProject:p,deleteProject:n}=xe(),a=j.useMemo(()=>s&&g.find(i=>i.id===s)||null,[g,s]),o=j.useMemo(()=>a?.tasks||[],[a]),u=i=>{a&&p(a.id,i)},d=()=>{a&&n(a.id)},N=i=>{if(!a)return;const c={...i,id:`task-${Date.now()}`,createdAt:new Date().toISOString()},r=[...o,c];u({tasks:r}),T.success("Task added successfully")},v=(i,c)=>{const r=o.map(f=>f.id===i?{...f,...c}:f);u({tasks:r}),T.success("Task updated successfully")},b=i=>{const c=o.filter(r=>r.id!==i);u({tasks:c}),T.success("Task deleted successfully")},x=i=>{const c=o.map(r=>r.id===i?{...r,completed:!r.completed,completedAt:r.completed?void 0:new Date().toISOString()}:r);u({tasks:c})};return a?e.jsx(Le,{project:a,tasks:o,onBack:()=>l("/programming"),onUpdate:i=>{u(i),T.success("Project updated successfully")},onDelete:()=>{d(),T.success("Project deleted"),l("/programming")},onAddTask:N,onUpdateTask:v,onDeleteTask:b,onToggleTask:x}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Project Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The project you're looking for doesn't exist."}),e.jsx("button",{onClick:()=>l("/programming"),className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:"Back to Programming"})]})};export{Xe as ProgrammingProjectDetail};
