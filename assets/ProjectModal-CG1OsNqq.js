import{r as d}from"./router-BQf8R6iK.js";import{u as R,o as I,M as E,B as N,j as U}from"./index-CO5L2hPJ.js";import{j as a}from"./radix-ui-C3V2uSY1.js";import{F as g,T as M}from"./TextArea-BN_339Pt.js";import{F as O}from"./FormSelect-BAcewOca.js";import{X as L}from"./utils-MsfPC-Eo.js";const B=()=>({learningItems:[],skills:[],tools:[],projects:[]}),Q=()=>{const{data:S,updateData:b}=R(),r=d.useMemo(()=>({...B(),...S.programming}),[S.programming]),l=d.useCallback(s=>{b({programming:s(r)})},[r,b]),o=d.useCallback(s=>{const e={...s,id:I(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return l(t=>({...t,learningItems:[...t.learningItems,e]})),e},[l]),i=d.useCallback((s,e)=>{l(t=>({...t,learningItems:t.learningItems.map(n=>n.id===s?{...n,...e,updatedAt:new Date().toISOString()}:n)}))},[l]),f=d.useCallback(s=>{l(e=>({...e,learningItems:e.learningItems.filter(t=>t.id!==s)}))},[l]),v=d.useCallback(s=>{const e={...s,id:I(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return l(t=>({...t,skills:[...t.skills,e]})),e},[l]),C=d.useCallback((s,e)=>{l(t=>({...t,skills:t.skills.map(n=>n.id===s?{...n,...e,updatedAt:new Date().toISOString()}:n)}))},[l]),p=d.useCallback(s=>{l(e=>({...e,skills:e.skills.filter(t=>t.id!==s)}))},[l]),D=d.useCallback(s=>{const e={...s,id:I(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return l(t=>({...t,tools:[...t.tools,e]})),e},[l]),y=d.useCallback((s,e)=>{l(t=>({...t,tools:t.tools.map(n=>n.id===s?{...n,...e,updatedAt:new Date().toISOString()}:n)}))},[l]),w=d.useCallback(s=>{l(e=>({...e,tools:e.tools.filter(t=>t.id!==s)}))},[l]),h=d.useCallback(s=>{const e={...s,id:I(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return l(t=>({...t,projects:[...t.projects,e]})),e},[l]),k=d.useCallback((s,e)=>{l(t=>({...t,projects:t.projects.map(n=>n.id===s?{...n,...e,updatedAt:new Date().toISOString()}:n)}))},[l]),u=d.useCallback(s=>{l(e=>({...e,projects:e.projects.filter(t=>t.id!==s)}))},[l]),A=d.useCallback((s,e)=>{const t={...e,id:I(),createdAt:new Date().toISOString()};return l(n=>({...n,projects:n.projects.map(c=>c.id===s?{...c,tasks:[...c.tasks,t],updatedAt:new Date().toISOString()}:c)})),t},[l]),T=d.useCallback((s,e,t)=>{l(n=>({...n,projects:n.projects.map(c=>c.id===s?{...c,tasks:c.tasks.map(x=>x.id===e?{...x,...t,completedAt:t.completed&&!x.completed?new Date().toISOString():x.completedAt}:x),updatedAt:new Date().toISOString()}:c)}))},[l]),P=d.useCallback((s,e)=>{l(t=>({...t,projects:t.projects.map(n=>n.id===s?{...n,tasks:n.tasks.filter(c=>c.id!==e),updatedAt:new Date().toISOString()}:n)}))},[l]),H=d.useCallback(()=>{const s=r.learningItems.filter(m=>m.status==="completed"),e=r.learningItems.filter(m=>m.status==="in-progress"),t=r.tools.filter(m=>m.status==="mastered"),n=r.projects.filter(m=>m.status==="completed"),c=r.learningItems.reduce((m,j)=>m+j.timeSpent,0)+r.projects.reduce((m,j)=>m+j.actualHours*60,0),x=r.skills.length>0?r.skills.reduce((m,j)=>m+j.currentLevel,0)/r.skills.length:0,F=r.projects.length>0?n.length/r.projects.length*100:0;return{totalLearningItems:r.learningItems.length,completedLearningItems:s.length,inProgressLearningItems:e.length,totalSkills:r.skills.length,averageSkillLevel:Math.round(x),totalTools:r.tools.length,masteredTools:t.length,totalProjects:r.projects.length,completedProjects:n.length,totalTimeSpent:c,completionRate:Math.round(F)}},[r]);return{data:r,learningItems:r.learningItems,skills:r.skills,tools:r.tools,projects:r.projects,addLearningItem:o,updateLearningItem:i,deleteLearningItem:f,addSkill:v,updateSkill:C,deleteSkill:p,addTool:D,updateTool:y,deleteTool:w,addProject:h,updateProject:k,deleteProject:u,addProjectTask:A,updateProjectTask:T,deleteProjectTask:P,getStats:H}},V=({isOpen:S,onClose:b,onSave:r,onUpdate:l,project:o})=>{const[i,f]=d.useState({title:"",description:"",type:"personal",status:"to-do",priority:5,repositoryUrl:"",liveUrl:"",startDate:"",completedDate:"",dueDate:"",estimatedHours:0,actualHours:0,learnings:"",challenges:""}),[v,C]=d.useState(""),[p,D]=d.useState([]),[y,w]=d.useState(""),[h,k]=d.useState([]);d.useEffect(()=>{o?(f({title:o.title,description:o.description||"",type:o.type,status:o.status,priority:o.priority,repositoryUrl:o.repositoryUrl||"",liveUrl:o.liveUrl||"",startDate:o.startDate||"",completedDate:o.completedDate||"",dueDate:o.dueDate||"",estimatedHours:o.estimatedHours||0,actualHours:o.actualHours,learnings:o.learnings||"",challenges:o.challenges||""}),D(o.technologies),k(o.features)):(f({title:"",description:"",type:"personal",status:"to-do",priority:5,repositoryUrl:"",liveUrl:"",startDate:"",completedDate:"",dueDate:"",estimatedHours:0,actualHours:0,learnings:"",challenges:""}),D([]),k([]))},[o,S]);const u=e=>{const{name:t,value:n}=e.target;f(c=>({...c,[t]:["priority","estimatedHours","actualHours"].includes(t)?Number(n):n}))},A=()=>{v.trim()&&!p.includes(v.trim())&&(D([...p,v.trim()]),C(""))},T=e=>{D(p.filter(t=>t!==e))},P=()=>{y.trim()&&!h.includes(y.trim())&&(k([...h,y.trim()]),w(""))},H=e=>{k(h.filter(t=>t!==e))},s=e=>{e.preventDefault();const t={...i,technologies:p,features:h,tasks:o?.tasks||[],screenshots:o?.screenshots||[],description:i.description||void 0,repositoryUrl:i.repositoryUrl||void 0,liveUrl:i.liveUrl||void 0,startDate:i.startDate||void 0,completedDate:i.completedDate||void 0,dueDate:i.dueDate||void 0,estimatedHours:i.estimatedHours||void 0,learnings:i.learnings||void 0,challenges:i.challenges||void 0};o&&l?l(o.id,t):r(t),b()};return a.jsx(E,{isOpen:S,onClose:b,title:o?"Edit Project":"New Project",children:a.jsxs("form",{onSubmit:s,className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2 ",children:[a.jsx(g,{label:"Project Title",name:"title",value:i.title,onChange:u,required:!0}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(O,{label:"Type",name:"type",value:i.type,onChange:u,options:[{value:"personal",label:"Personal"},{value:"practice",label:"Practice"},{value:"portfolio",label:"Portfolio"},{value:"client",label:"Client"},{value:"open-source",label:"Open Source"}]}),a.jsx(O,{label:"Status",name:"status",value:i.status,onChange:u,options:[{value:"to-do",label:"To Do"},{value:"in-progress",label:"In Progress"},{value:"completed",label:"Completed"}]})]}),a.jsx(M,{label:"Description",name:"description",value:i.description,onChange:u,rows:3}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Priority (1-10)"}),a.jsx("input",{type:"range",name:"priority",min:"1",max:"10",value:i.priority,onChange:u,className:"w-full",title:"Priority"}),a.jsx("div",{className:"text-center text-sm text-muted-foreground mt-1",children:i.priority})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Technologies"}),a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx("input",{type:"text",value:v,onChange:e=>C(e.target.value),onKeyPress:e=>e.key==="Enter"&&(e.preventDefault(),A()),placeholder:"Add technology...",className:"flex-1 px-3 py-2 bg-background border border-input rounded-md text-sm"}),a.jsx(N,{type:"button",onClick:A,variant:"outline",children:"Add"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(e=>a.jsxs(U,{variant:"secondary",className:"gap-1",children:[e,a.jsx(L,{className:"h-3 w-3 cursor-pointer",onClick:()=>T(e)})]},e))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Key Features"}),a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx("input",{type:"text",value:y,onChange:e=>w(e.target.value),onKeyPress:e=>e.key==="Enter"&&(e.preventDefault(),P()),placeholder:"Add feature...",className:"flex-1 px-3 py-2 bg-background border border-input rounded-md text-sm"}),a.jsx(N,{type:"button",onClick:P,variant:"outline",children:"Add"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(e=>a.jsxs(U,{variant:"outline",className:"gap-1",children:[e,a.jsx(L,{className:"h-3 w-3 cursor-pointer",onClick:()=>H(e)})]},e))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(g,{label:"Repository URL",name:"repositoryUrl",type:"url",value:i.repositoryUrl,onChange:u}),a.jsx(g,{label:"Live URL",name:"liveUrl",type:"url",value:i.liveUrl,onChange:u})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsx(g,{label:"Start Date",name:"startDate",type:"date",value:i.startDate,onChange:u}),a.jsx(g,{label:"Due Date",name:"dueDate",type:"date",value:i.dueDate,onChange:u}),a.jsx(g,{label:"Completed Date",name:"completedDate",type:"date",value:i.completedDate,onChange:u})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(g,{label:"Estimated Hours",name:"estimatedHours",type:"number",value:i.estimatedHours,onChange:u}),a.jsx(g,{label:"Actual Hours",name:"actualHours",type:"number",value:i.actualHours,onChange:u})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4  bottom-0",children:[a.jsx(N,{type:"button",variant:"outline",onClick:b,children:"Cancel"}),a.jsx(N,{type:"submit",children:o?"Update":"Create"})]})]})})};export{V as P,Q as u};
