import{j as s}from"./radix-ui-CneFSYrq.js";import{r as w}from"./router-CJK1Z2Io.js";import{D as S,c as y,S as M,v as k,a as E,u as B,b as I,C as K}from"./dnd-kit-Cy9T72DN.js";import{C as b,b as R,c as T,a as z}from"./Card-DB24W9ar.js";import{c as g,b as C,D as A,d as H,B as L,e as V,f as q,g as F}from"./index-Bxm5_NB2.js";import{E as G}from"./utils-C1zQmt0N.js";const J=({id:t,children:m})=>{const{setNodeRef:d}=B({id:t});return s.jsx("div",{ref:d,className:"space-y-3",children:m})};function Y({columns:t,onDragEnd:m,renderItem:d,getItemId:r,dragOverlay:p}){const[h,f]=w.useState(null),j=e=>{const{active:i}=e,l=t.flatMap(n=>n.items).find(n=>r(n)===i.id);l&&f(l)},u=e=>{const{active:i,over:c}=e;if(f(null),!c)return;const l=i.id;let n;if(t.some(o=>o.id===c.id))n=c.id;else{const v=t.flatMap(x=>x.items).find(x=>r(x)===c.id);if(!v)return;const N=t.find(x=>x.items.some(D=>r(D)===r(v)));if(!N)return;n=N.id}m(l,n)};return s.jsxs(S,{collisionDetection:y,onDragStart:j,onDragEnd:u,children:[s.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-3",children:t.map(e=>s.jsxs(b,{className:"flex flex-col transition-all w-full",children:[s.jsxs(R,{className:"pb-3",children:[s.jsx("div",{className:g("h-1 -mx-6 -mt-6 mb-4 rounded-t-lg bg-gradient-to-r",e.color)}),s.jsxs(T,{className:"flex items-center justify-between text-base sm:text-lg",children:[s.jsx("span",{className:"truncate",children:e.title}),s.jsx(C,{variant:"secondary",className:"ml-2 shrink-0",children:e.items.length})]})]}),s.jsx(z,{className:"flex-1 min-h-[150px] sm:min-h-[200px]",children:s.jsx(J,{id:e.id,children:e.items.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No items"}):s.jsx(M,{items:e.items.map(r),strategy:k,children:e.items.map(i=>s.jsx("div",{children:d(i)},r(i)))})})})]},e.id))}),s.jsx(E,{children:h&&p?p(h):null})]})}const Z=({id:t,title:m,description:d,badges:r,actions:p,children:h,className:f})=>{const{attributes:j,listeners:u,setNodeRef:e,transform:i,transition:c,isDragging:l}=I({id:t}),n=K.Transform.toString(i);return s.jsx("div",{ref:e,style:{transform:n,transition:c},className:l?"opacity-50 scale-95":"",children:s.jsx(b,{className:g("p-3 sm:p-4 hover:shadow-md transition-all",f),children:s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("div",{className:g("flex-1 cursor-grab active:cursor-grabbing min-w-0",l&&"cursor-grabbing"),...j,...u,children:s.jsx("h4",{className:"font-medium text-foreground text-sm sm:text-base break-words",children:m})}),s.jsxs(A,{children:[s.jsx(H,{asChild:!0,children:s.jsx(L,{variant:"ghost",size:"icon-sm",className:"shrink-0",children:s.jsx(G,{className:"h-4 w-4"})})}),s.jsx(V,{align:"end",children:p.map((a,o)=>s.jsxs("div",{children:[a.separator&&o>0&&s.jsx(q,{}),s.jsxs(F,{onClick:a.onClick,className:a.variant==="destructive"?"text-destructive":"",children:[a.icon&&s.jsx("span",{className:"mr-2",children:a.icon}),a.label]})]},o))})]})]}),s.jsxs("div",{className:g("cursor-grab active:cursor-grabbing",l&&"cursor-grabbing"),...j,...u,children:[d&&s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground line-clamp-2 mb-2 sm:mb-3 break-words",children:d}),r&&r.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:r.map((a,o)=>s.jsxs(C,{variant:a.variant||"outline",className:"text-xs",children:[a.icon&&s.jsx("span",{className:"mr-1",children:a.icon}),s.jsx("span",{className:"truncate max-w-[150px]",children:a.label})]},o))}),h]})]})})})};export{Y as K,Z as a};
