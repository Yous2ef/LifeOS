import{j as e}from"./radix-ui-CZbxChR9.js";import{r as N,f as ce,u as me}from"./router-CLckEVPx.js";import{C as E}from"./Card-DXA1zhdA.js";import{M as se,d as m,z as b,e as z,B as D,j as R,f as U}from"./index-Cl9Owp1C.js";import{P as ue}from"./progress-B9Tkn7wC.js";import{P as xe}from"./ProjectModal-C-YMHa1t.js";import{a as J,T as te}from"./TextArea-BkkJIZd4.js";import{o as k,u as $,a1 as he,t as V,K as pe,n as ge,v as fe,C as je,g as Ne,Q as G,x as ve,y as ye,P as Z}from"./utils-gzJrCzCn.js";import{d as be,e as ee,D as Te,f as we,S as Se,v as Me,a as De,s as Ce,K as ke,P as Pe,u as Ee,b as Ae,C as Ie}from"./dnd-kit-Dna8SdiU.js";import"./react-vendor-pR2cKLDH.js";import"./charts-COCOHHw6.js";const Oe=({isOpen:s,onClose:l,onSave:h,onUpdate:p,task:n})=>{const[r,c]=N.useState({title:"",description:"",status:"todo",priority:5,estimatedMinutes:"",completed:!1});N.useEffect(()=>{c(n?{title:n.title,description:n.description||"",status:n.status,priority:n.priority,estimatedMinutes:n.estimatedMinutes?.toString()||"",completed:n.completed}:{title:"",description:"",status:"todo",priority:5,estimatedMinutes:"",completed:!1})},[n,s]);const g=d=>{if(d.preventDefault(),!r.title.trim()){b.error("Please enter a task title");return}const v={title:r.title.trim(),description:r.description.trim()||void 0,status:r.status,priority:r.priority,estimatedMinutes:r.estimatedMinutes?parseInt(r.estimatedMinutes):void 0,actualMinutes:n?.actualMinutes||0,timeEntries:n?.timeEntries||[],completed:r.completed,completedAt:r.completed?new Date().toISOString():void 0};n&&p?p(n.id,v):h(v),l()};return e.jsx(se,{isOpen:s,onClose:l,title:n?"Edit Task":"Add New Task",children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx(J,{label:"Task Title",value:r.title,onChange:d=>c({...r,title:d.target.value}),placeholder:"e.g., Implement user authentication",required:!0}),e.jsx(te,{label:"Description",value:r.description,onChange:d=>c({...r,description:d.target.value}),placeholder:"Describe the task in detail...",rows:4}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Priority: ",r.priority]}),e.jsx("input",{type:"range",min:"1",max:"10",value:r.priority,onChange:d=>c({...r,priority:parseInt(d.target.value)}),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsx("span",{children:"Low"}),e.jsx("span",{children:"Medium"}),e.jsx("span",{children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Status"}),e.jsxs("select",{value:r.status,onChange:d=>c({...r,status:d.target.value}),className:"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"todo",children:"To Do"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Done"})]})]}),e.jsx(J,{label:"Estimated Time (minutes)",type:"number",min:"0",step:"15",value:r.estimatedMinutes,onChange:d=>c({...r,estimatedMinutes:d.target.value}),placeholder:"e.g., 120 (2 hours)"}),n&&n.actualMinutes>0&&e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Time spent: ",Math.floor(n.actualMinutes/60),"h"," ",n.actualMinutes%60,"m",n.timeEntries.length>0&&` (${n.timeEntries.length} sessions)`]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'Use the "Track Time" button in the task list to add work sessions'})]}),n&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"completed",checked:r.completed,onChange:d=>c({...r,completed:d.target.checked}),className:"w-4 h-4 rounded border-border text-primary focus:ring-primary"}),e.jsx("label",{htmlFor:"completed",className:"text-sm font-medium text-foreground cursor-pointer",children:"Mark as completed"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(m,{type:"button",variant:"outline",onClick:l,children:"Cancel"}),e.jsx(m,{type:"submit",children:n?"Update Task":"Add Task"})]})]})})},ze=({isOpen:s,onClose:l,taskTitle:h,timeEntries:p,onAddTimeEntry:n,onDeleteTimeEntry:r})=>{const[c,g]=N.useState(""),[d,v]=N.useState(""),y=p.reduce((a,o)=>a+o.minutes,0),T=Math.floor(y/60),u=y%60,x=()=>{const a=parseInt(c);if(!a||a<=0){b.error("Please enter a valid number of minutes");return}n(a,d.trim()||void 0),g(""),v(""),b.success(`Added ${a} minutes`)},i=a=>{const o=new Date(a);return o.toLocaleDateString()+" "+o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return e.jsx(se,{isOpen:s,onClose:l,title:`Time Tracking: ${h}`,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-primary/10 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Time Spent"}),e.jsxs("div",{className:"text-3xl font-bold text-primary",children:[T,"h ",u,"m"]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[y," minutes total"]})]}),e.jsxs("div",{className:"space-y-3 border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Add Work Session"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(J,{label:"Minutes Worked",type:"number",min:"1",value:c,onChange:a=>g(a.target.value),placeholder:"e.g., 30"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>g("15"),className:"mt-6",children:"15m"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>g("30"),className:"mt-6",children:"30m"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>g("60"),className:"col-span-1",children:"1h"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>g("90"),className:"col-span-1",children:"1.5h"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>g("120"),className:"col-span-1",children:"2h"})]}),e.jsx(te,{label:"Note (Optional)",value:d,onChange:a=>v(a.target.value),placeholder:"What did you work on?",rows:2}),e.jsxs(m,{onClick:x,className:"w-full gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"Add Time Entry"]})]}),p.length>0&&e.jsxs("div",{className:"space-y-2 border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Work Sessions"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[...p].reverse().map(a=>e.jsxs("div",{className:"flex items-start justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4 text-primary"}),e.jsxs("span",{className:"font-medium text-foreground",children:[Math.floor(a.minutes/60)>0&&`${Math.floor(a.minutes/60)}h `,a.minutes%60,"m"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:i(a.date)})]}),a.note&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 ml-6",children:a.note})]}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>r(a.id),className:"ml-2 h-8 px-2 hover:bg-red-50 hover:text-red-600 hover:border-red-200",children:e.jsx($,{className:"h-3 w-3"})})]},a.id))})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx(m,{variant:"outline",onClick:l,children:"Close"})})]})})},$e=({id:s,title:l,color:h,tasks:p,children:n})=>{const{setNodeRef:r,isOver:c}=Ee({id:s});return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold text-foreground flex items-center gap-2",children:[e.jsx("div",{className:`h-2 w-2 rounded-full bg-gradient-to-r ${h}`}),l]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:p.length})]}),e.jsx("div",{ref:r,className:z("space-y-3 min-h-[200px] p-3 rounded-lg border-2 border-dashed transition-colors",c?"bg-primary/10 border-primary":"bg-muted/30 border-border"),children:n})]})},Fe=({task:s,onEdit:l,onDelete:h,onTrackTime:p})=>{const{attributes:n,listeners:r,setNodeRef:c,transform:g,transition:d,isDragging:v}=Ae({id:s.id}),y={transform:Ie.Transform.toString(g),transition:d},T=Math.floor(s.actualMinutes/60),u=s.actualMinutes%60;return e.jsx(E,{ref:c,style:y,...n,className:z("p-4 hover:shadow-md transition-shadow",v&&"opacity-50"),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{...r,className:"font-medium text-foreground flex-1 cursor-move",children:s.title}),e.jsxs(D,{variant:R(s.priority),className:"text-xs",children:["P",s.priority]})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[s.estimatedMinutes&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"h-3 w-3"}),"Est: ",Math.floor(s.estimatedMinutes/60),"h"," ",s.estimatedMinutes%60,"m"]}),s.actualMinutes>0&&e.jsxs("span",{className:"flex items-center gap-1 text-primary font-medium",children:[e.jsx(he,{className:"h-3 w-3"}),T>0&&`${T}h `,u,"m"]}),s.timeEntries.length>0&&e.jsxs("span",{children:["• ",s.timeEntries.length," sessions"]})]}),e.jsxs("div",{className:"flex items-center gap-1 pt-2 border-t",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:x=>{x.stopPropagation(),p()},className:"h-7 px-2 text-xs flex-1",children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),"Track Time"]}),e.jsx(m,{variant:"outline",size:"sm",onClick:x=>{x.stopPropagation(),l()},className:"h-7 px-2",children:e.jsx(V,{className:"h-3 w-3"})}),e.jsx(m,{variant:"outline",size:"sm",onClick:x=>{x.stopPropagation(),h()},className:"h-7 px-2 hover:bg-red-50 hover:text-red-600 hover:border-red-200",children:e.jsx($,{className:"h-3 w-3"})})]})]})})},Le=({tasks:s,onEditTask:l,onDeleteTask:h,onUpdateTask:p,onTrackTime:n})=>{const[r,c]=N.useState(null),g=be(ee(Pe),ee(ke,{coordinateGetter:Ce})),d=[{id:"todo",title:"To Do",color:"from-blue-500 to-cyan-500"},{id:"in-progress",title:"In Progress",color:"from-yellow-500 to-orange-500"},{id:"done",title:"Done",color:"from-green-500 to-emerald-500"}],v=u=>s.filter(x=>x.status===u),y=u=>{const x=s.find(i=>i.id===u.active.id);c(x||null)},T=u=>{const{active:x,over:i}=u;if(c(null),!i)return;const a=s.find(w=>w.id===x.id);if(!a)return;const o=i.id.toString(),f=d.find(w=>w.id===o)?.id;f&&f!==a.status&&p(a.id,{status:f,completed:f==="done",completedAt:f==="done"?new Date().toISOString():void 0})};return e.jsxs(Te,{sensors:g,collisionDetection:we,onDragStart:y,onDragEnd:T,children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:d.map(u=>{const x=v(u.id);return e.jsx($e,{id:u.id,title:u.title,color:u.color,tasks:x,children:e.jsx(Se,{items:x.map(i=>i.id),strategy:Me,children:x.length===0?e.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No tasks"}):x.map(i=>e.jsx(Fe,{task:i,onEdit:()=>l(i),onDelete:()=>h(i.id),onTrackTime:()=>n(i)},i.id))})},u.id)})}),e.jsx(De,{children:r?e.jsx(E,{className:"p-4 shadow-lg opacity-90",children:e.jsx("div",{className:"font-medium text-foreground",children:r.title})}):null})]})},He=({project:s,tasks:l,onBack:h,onUpdate:p,onDelete:n,onAddTask:r,onUpdateTask:c,onDeleteTask:g,onToggleTask:d})=>{const[v,y]=N.useState(!1),[T,u]=N.useState(!1),[x,i]=N.useState(),[a,o]=N.useState(!1),[f,w]=N.useState("kanban"),[F,P]=N.useState(!1),[A,_]=N.useState(),W=l.filter(t=>t.completed).length,q=l.length>0?W/l.length*100:0,L=l.reduce((t,j)=>t+(j.estimatedMinutes||0),0),H=l.reduce((t,j)=>t+j.actualMinutes,0),Y=Math.floor(L/60),ae=L%60,re=Math.floor(H/60),ie=H%60,ne=()=>s.status==="to-do"?e.jsx(D,{variant:"secondary",children:"To Do"}):s.status==="in-progress"?e.jsx(D,{variant:"default",children:"In Progress"}):e.jsx(D,{className:"bg-green-500/10 text-green-500 border-green-500/20",children:"Completed"}),Q=t=>{i(t),u(!0)},B=()=>{u(!1),i(void 0)},X=t=>{_(t),P(!0)},oe=(t,j,S)=>{const M=l.find(de=>de.id===t);if(!M)return;const I={id:`time-${Date.now()}`,minutes:j,note:S,date:new Date().toISOString()},K=[...M.timeEntries,I],C=M.actualMinutes+j;c(t,{timeEntries:K,actualMinutes:C})},le=(t,j)=>{const S=l.find(C=>C.id===t);if(!S)return;const M=S.timeEntries.find(C=>C.id===j);if(!M)return;const I=S.timeEntries.filter(C=>C.id!==j),K=S.actualMinutes-M.minutes;c(t,{timeEntries:I,actualMinutes:Math.max(0,K)}),b.success("Time entry deleted")};return e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(m,{variant:"outline",size:"default",onClick:h,className:"gap-2 hover:bg-primary/10 hover:border-primary text-primary transition-all duration-200 font-medium shadow-sm",children:[e.jsx(pe,{className:"h-4 w-4"}),"Back to Projects"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m,{variant:"outline",size:"default",onClick:()=>y(!0),className:"gap-2 hover:bg-blue-50 hover:border-blue-500 hover:text-blue-600 transition-all duration-200 shadow-sm text-primary",children:[e.jsx(V,{className:"h-4 w-4"}),"Edit Project"]}),e.jsxs(m,{variant:"outline",size:"default",onClick:()=>o(!0),className:"gap-2 hover:bg-red-50 hover:border-red-500 hover:text-red-600 transition-all duration-200 shadow-sm text-primary",children:[e.jsx($,{className:"h-4 w-4"}),"Delete"]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Programming > Projects >"," ",e.jsx("span",{className:"text-foreground font-medium",children:s.title})]}),e.jsx(E,{className:"p-6 border-border",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:s.title}),e.jsxs("p",{className:"text-lg text-muted-foreground",children:[s.type.charAt(0).toUpperCase()+s.type.slice(1)," ","Project"]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[ne(),e.jsxs(D,{variant:R(s.priority),children:["Priority ",s.priority]})]})]}),s.description&&e.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:s.description})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.technologies.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Technologies"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.technologies.map(t=>e.jsx(D,{variant:"outline",children:t},t))})]}),s.startDate&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"Start Date"]}),e.jsx("p",{className:"text-sm text-foreground",children:U(s.startDate)})]}),s.completedDate&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Completed Date"]}),e.jsx("p",{className:"text-sm text-foreground",children:U(s.completedDate)})]}),s.dueDate&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),"Due Date"]}),e.jsx("p",{className:"text-sm text-foreground",children:U(s.dueDate)})]}),(Y>0||s.actualHours>0)&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),"Time Spent"]}),e.jsxs("p",{className:"text-sm text-foreground",children:[s.actualHours,"h",s.estimatedHours&&` / ${s.estimatedHours}h estimated`]})]}),s.repositoryUrl&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),"Repository"]}),e.jsxs("a",{href:s.repositoryUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline flex items-center gap-1",children:["View on GitHub",e.jsx(G,{className:"h-3 w-3"})]})]}),s.liveUrl&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"Live Demo"]}),e.jsxs("a",{href:s.liveUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline flex items-center gap-1",children:["View Live Site",e.jsx(G,{className:"h-3 w-3"})]})]})]}),s.features&&s.features.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Key Features"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:s.features.map((t,j)=>e.jsx("li",{className:"text-sm text-foreground",children:t},j))})]})]})}),e.jsx(E,{className:"p-6 border-border",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Project Tasks"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[W," of ",l.length," tasks completed",H>0&&` • ${re}h ${ie}m spent`,L>0&&` / ${Y}h ${ae}m estimated`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 border rounded-md p-1",children:[e.jsx(m,{variant:f==="kanban"?"default":"ghost",size:"sm",onClick:()=>w("kanban"),className:"h-7 px-2",children:e.jsx(ve,{className:"h-3 w-3"})}),e.jsx(m,{variant:f==="list"?"default":"ghost",size:"sm",onClick:()=>w("list"),className:"h-7 px-2",children:e.jsx(ye,{className:"h-3 w-3"})})]}),e.jsxs(m,{onClick:()=>u(!0),className:"gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Add Task"]})]})]}),l.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{value:q,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[q.toFixed(0),"% complete"]})]}),l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No tasks yet"}),e.jsxs(m,{onClick:()=>u(!0),variant:"outline",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Add Your First Task"]})]}):f==="kanban"?e.jsx(Le,{tasks:l,onEditTask:Q,onDeleteTask:g,onUpdateTask:c,onTrackTime:X}):e.jsx("div",{className:"space-y-3",children:l.map(t=>{const j=Math.floor(t.actualMinutes/60),S=t.actualMinutes%60,M=Math.floor((t.estimatedMinutes||0)/60),I=(t.estimatedMinutes||0)%60;return e.jsx(E,{className:z("p-4 border-border hover:border-primary/50 transition-colors",t.completed&&"opacity-60"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.completed,onChange:()=>d(t.id),className:"w-5 h-5 mt-0.5 rounded border-border text-primary focus:ring-primary cursor-pointer",title:"Mark as complete"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:z("font-medium text-foreground",t.completed&&"line-through text-muted-foreground"),children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[e.jsxs(D,{variant:R(t.priority),className:"text-xs",children:["P",t.priority]}),e.jsxs(D,{variant:"outline",className:"text-xs",children:[t.status==="todo"&&"To Do",t.status==="in-progress"&&"In Progress",t.status==="done"&&"Done"]}),t.estimatedMinutes&&e.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(k,{className:"h-3 w-3"}),"Est:"," ",M,"h"," ",I,"m"]}),t.actualMinutes>0&&e.jsxs("span",{className:"text-xs text-primary font-medium flex items-center gap-1",children:["Spent:"," ",j,"h"," ",S,"m"]}),t.timeEntries.length>0&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.timeEntries.length," ","sessions)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>X(t),className:"h-8 px-2",title:"Track time",children:e.jsx(k,{className:"h-3 w-3"})}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>Q(t),className:"h-8 px-2",children:e.jsx(V,{className:"h-3 w-3"})}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>g(t.id),className:"h-8 px-2 hover:bg-red-50 hover:text-red-600 hover:border-red-200",children:e.jsx($,{className:"h-3 w-3"})})]})]})})]})},t.id)})})]})}),e.jsx(xe,{isOpen:v,onClose:()=>y(!1),onSave:()=>{},onUpdate:(t,j)=>{p(j),y(!1)},project:s}),e.jsx(Oe,{isOpen:T,onClose:B,onSave:t=>{r(t),B()},onUpdate:(t,j)=>{c(t,j),B()},task:x}),A&&e.jsx(ze,{isOpen:F,onClose:()=>{P(!1),_(void 0)},taskTitle:A.title,timeEntries:A.timeEntries,onAddTimeEntry:(t,j)=>{oe(A.id,t,j)},onDeleteTimeEntry:t=>{le(A.id,t)}}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(E,{className:"p-6 max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Delete Project?"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Are you sure you want to delete this project? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(m,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(m,{variant:"destructive",onClick:()=>{n(),o(!1)},children:"Delete Project"})]})]})})]})},O="lifeos-programming-data",Qe=()=>{const{projectId:s}=ce(),l=me(),[h,p]=N.useState(null),[n,r]=N.useState([]),[c,g]=N.useState(!0);N.useEffect(()=>{if(!s){g(!1);return}const i=localStorage.getItem(O);if(i)try{const o=JSON.parse(i).projects?.find(f=>f.id===s);o?(p(o),r(o.tasks||[])):(p(null),r([]))}catch(a){console.error("Failed to load project:",a),p(null),r([])}g(!1)},[s]);const d=i=>{if(!h)return;const a=localStorage.getItem(O);if(a)try{const o=JSON.parse(a),f=o.projects.map(P=>P.id===h.id?{...P,...i,updatedAt:new Date().toISOString()}:P),w={...o,projects:f};localStorage.setItem(O,JSON.stringify(w));const F={...h,...i,updatedAt:new Date().toISOString()};p(F),i.tasks&&r(i.tasks)}catch(o){console.error("Failed to update project:",o),b.error("Failed to update project")}},v=()=>{if(!h)return;const i=localStorage.getItem(O);if(i)try{const a=JSON.parse(i),o=a.projects.filter(w=>w.id!==h.id),f={...a,projects:o};localStorage.setItem(O,JSON.stringify(f))}catch(a){console.error("Failed to delete project:",a),b.error("Failed to delete project")}},y=i=>{if(!h)return;const a={...i,id:`task-${Date.now()}`,createdAt:new Date().toISOString()},o=[...n,a];r(o),d({tasks:o}),b.success("Task added successfully")},T=(i,a)=>{const o=n.map(f=>f.id===i?{...f,...a}:f);r(o),d({tasks:o}),b.success("Task updated successfully")},u=i=>{const a=n.filter(o=>o.id!==i);r(a),d({tasks:a}),b.success("Task deleted successfully")},x=i=>{const a=n.map(o=>o.id===i?{...o,completed:!o.completed,completedAt:o.completed?void 0:new Date().toISOString()}:o);r(a),d({tasks:a})};return c?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading project..."})}):h?e.jsx(He,{project:h,tasks:n,onBack:()=>l("/programming"),onUpdate:i=>{d(i),b.success("Project updated successfully")},onDelete:()=>{v(),b.success("Project deleted"),l("/programming")},onAddTask:y,onUpdateTask:T,onDeleteTask:u,onToggleTask:x}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Project Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The project you're looking for doesn't exist."}),e.jsx("button",{onClick:()=>l("/programming"),className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:"Back to Programming"})]})};export{Qe as ProgrammingProjectDetail};
