import{r as f}from"./router-CLckEVPx.js";import{j as e}from"./radix-ui-U22BTGbQ.js";import{M as y,B as x}from"./index-DOOjm7Ao.js";import{F as p,T as S}from"./TextArea-5iaZZOyY.js";import{F as P}from"./FormSelect-DABAyk9l.js";const j="lifeos-freelancing-projects",h="lifeos-freelancing-project-tasks",T="lifeos-freelancing-standalone-tasks",O=()=>{const[r,c]=f.useState([]);f.useEffect(()=>{const s=localStorage.getItem(j);if(s)try{const o=JSON.parse(s),l=o.map(a=>["todo","inProgress","done"].includes(a.status)?a:(console.warn(`Fixing project "${a.name}" - invalid status: ${a.status}`),{...a,status:"todo"}));l.some((a,d)=>a.status!==o[d].status)&&(localStorage.setItem(j,JSON.stringify(l)),console.log("✅ Projects status values migrated successfully!")),c(l)}catch{console.error("Failed to load projects")}},[]);const u=s=>{c(s),localStorage.setItem(j,JSON.stringify(s))};return{projects:r,addProject:s=>{const o={...s,id:crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return u([...r,o]),o},updateProject:(s,o)=>{const l=r.map(m=>m.id===s?{...m,...o,updatedAt:new Date().toISOString()}:m);u(l)},deleteProject:s=>{u(r.filter(m=>m.id!==s));const l=k().filter(m=>m.projectId!==s);localStorage.setItem(h,JSON.stringify(l))},getProjectById:s=>r.find(o=>o.id===s)}},I=r=>{const[c,u]=f.useState([]);f.useEffect(()=>{const o=localStorage.getItem(h);if(o)try{const l=JSON.parse(o);u(r?l.filter(m=>m.projectId===r):l)}catch{console.error("Failed to load tasks")}},[r]);const i=()=>{const o=localStorage.getItem(h);if(o)try{const l=JSON.parse(o);u(r?l.filter(m=>m.projectId===r):l)}catch{console.error("Failed to load tasks")}},g=o=>{const l={...o,id:crypto.randomUUID(),completed:!1,createdAt:new Date().toISOString()},m=localStorage.getItem(h),d=[...m?JSON.parse(m):[],l];return localStorage.setItem(h,JSON.stringify(d)),(!r||o.projectId===r)&&u([...c,l]),l},t=(o,l)=>{const m=localStorage.getItem(h),d=(m?JSON.parse(m):[]).map(v=>v.id===o?{...v,...l}:v);localStorage.setItem(h,JSON.stringify(d)),u(r?d.filter(v=>v.projectId===r):d)};return{tasks:c,addTask:g,updateTask:t,deleteTask:o=>{const l=localStorage.getItem(h),a=(l?JSON.parse(l):[]).filter(d=>d.id!==o);localStorage.setItem(h,JSON.stringify(a)),u(a.filter(d=>!r||d.projectId===r))},toggleTaskComplete:o=>{const l=c.find(m=>m.id===o);l&&t(o,{completed:!l.completed,completedAt:l.completed?void 0:new Date().toISOString()})},reloadTasks:i}},F=()=>{const[r,c]=f.useState([]);f.useEffect(()=>{const s=localStorage.getItem(T);if(s)try{c(JSON.parse(s))}catch{console.error("Failed to load standalone tasks")}},[]);const u=s=>{c(s),localStorage.setItem(T,JSON.stringify(s))},i=s=>{const o={...s,id:crypto.randomUUID(),createdAt:new Date().toISOString()};return u([...r,o]),o},g=(s,o)=>{const l=r.map(m=>m.id===s?{...m,...o}:m);u(l)};return{tasks:r,addTask:i,updateTask:g,deleteTask:s=>{u(r.filter(o=>o.id!==s))},toggleTaskStatus:(s,o)=>{g(s,{status:o,completedAt:o==="completed"?new Date().toISOString():void 0})}}},k=()=>{const r=localStorage.getItem(h);return r?JSON.parse(r):[]},J=r=>{const c=r.filter(s=>s.status==="todo"),u=r.filter(s=>s.status==="inProgress"),i=r.filter(s=>s.status==="done"),g=[...c,...u].reduce((s,o)=>s+o.expectedProfit,0),t=i.reduce((s,o)=>s+(o.actualProfit||o.expectedProfit),0),n=r.length>0?r.reduce((s,o)=>s+o.expectedProfit,0)/r.length:0;return{totalExpected:g,totalEarned:t,projectsToDoCount:c.length,projectsInProgressCount:u.length,completedProjectsCount:i.length,averageProjectValue:n}},D=r=>k().filter(u=>u.projectId===r),U=r=>{const c=D(r);if(c.length===0)return 0;const u=c.filter(i=>i.completed).length;return Math.round(u/c.length*100)},M=r=>r>=9?"Urgent":r>=7?"High":r>=4?"Medium":"Low",$=r=>new Date(r)<new Date,Y=r=>{const c=new Date,i=new Date(r).getTime()-c.getTime();return Math.ceil(i/(1e3*60*60*24))},L=(r,c)=>`${{USD:"$",EUR:"€",GBP:"£",CAD:"C$",AUD:"A$",JPY:"¥",CNY:"¥"}[c]}${r.toLocaleString()}`,b=[{value:"USD",label:"USD ($)"},{value:"EUR",label:"EUR (€)"},{value:"GBP",label:"GBP (£)"},{value:"CAD",label:"CAD (C$)"},{value:"AUD",label:"AUD (A$)"},{value:"JPY",label:"JPY (¥)"},{value:"CNY",label:"CNY (¥)"}],R=({isOpen:r,onClose:c,onSave:u,project:i,mode:g})=>{const[t,n]=f.useState({name:i?.name||"",clientName:i?.clientName||"",description:i?.description||"",startDate:i?.startDate||"",deadline:i?.deadline||"",expectedProfit:i?.expectedProfit||0,currency:i?.currency||"USD",priority:i?.priority||5,tags:i?.tags?.join(", ")||""}),[s,o]=f.useState({}),l=()=>{const a={};return t.name.trim()||(a.name="Project name is required"),t.clientName.trim()||(a.clientName="Client name is required"),t.deadline||(a.deadline="Deadline is required"),t.expectedProfit<=0&&(a.expectedProfit="Expected profit must be greater than 0"),o(a),Object.keys(a).length===0},m=()=>{if(!l())return;const a=t.tags.split(",").map(d=>d.trim()).filter(d=>d.length>0);u({name:t.name,clientName:t.clientName,description:t.description,startDate:t.startDate||void 0,deadline:t.deadline,status:i?.status||"todo",expectedProfit:t.expectedProfit,actualProfit:i?.actualProfit,currency:t.currency,priority:t.priority,tags:a}),c()};return e.jsx(y,{isOpen:r,onClose:c,title:g==="create"?"Create New Project":"Edit Project",footer:e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"secondary",onClick:c,children:"Cancel"}),e.jsx(x,{variant:"default",onClick:m,children:g==="create"?"Create Project":"Save Changes"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{label:"Project Name *",value:t.name,onChange:a=>n({...t,name:a.target.value}),placeholder:"Website Redesign",error:s.name}),e.jsx(p,{label:"Client Name *",value:t.clientName,onChange:a=>n({...t,clientName:a.target.value}),placeholder:"Acme Corporation",error:s.clientName}),e.jsx(S,{label:"Description",value:t.description,onChange:a=>n({...t,description:a.target.value}),placeholder:"Project details and requirements...",rows:3}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(p,{label:"Start Date",type:"date",value:t.startDate,onChange:a=>n({...t,startDate:a.target.value})}),e.jsx(p,{label:"Deadline *",type:"date",value:t.deadline,onChange:a=>n({...t,deadline:a.target.value}),error:s.deadline})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(p,{label:"Expected Profit *",type:"number",value:t.expectedProfit,onChange:a=>n({...t,expectedProfit:parseFloat(a.target.value)||0}),placeholder:"5000",error:s.expectedProfit}),e.jsx(P,{label:"Currency",value:t.currency,onChange:a=>n({...t,currency:a.target.value}),options:b})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"priority-slider",className:"block text-sm font-medium text-foreground mb-2",children:["Priority: ",t.priority,"/10"]}),e.jsx("input",{id:"priority-slider",type:"range",min:"1",max:"10",value:t.priority,onChange:a=>n({...t,priority:parseInt(a.target.value)}),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsx("span",{children:"Low"}),e.jsx("span",{children:"Medium"}),e.jsx("span",{children:"High"})]})]}),e.jsxs("div",{children:[e.jsx(p,{label:"Tags",value:t.tags,onChange:a=>n({...t,tags:a.target.value}),placeholder:"Web Development, Design, E-commerce"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Separate tags with commas"})]})]})})},B=({isOpen:r,onClose:c,onSave:u,task:i,projectId:g,mode:t})=>{const[n,s]=f.useState({title:i?.title||"",description:i?.description||"",dueDate:i?.dueDate||"",priority:i?.priority||5,timeEstimate:i?.timeEstimate||0}),[o,l]=f.useState({}),m=()=>{const d={};return n.title.trim()||(d.title="Task title is required"),l(d),Object.keys(d).length===0},a=()=>{m()&&(u({projectId:g,title:n.title,description:n.description||void 0,dueDate:n.dueDate||void 0,priority:n.priority,status:i?.status||"todo",timeEstimate:n.timeEstimate||void 0,completedAt:i?.completedAt}),c())};return e.jsx(y,{isOpen:r,onClose:c,title:t==="create"?"Add New Task":"Edit Task",footer:e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"secondary",onClick:c,children:"Cancel"}),e.jsx(x,{variant:"default",onClick:a,children:t==="create"?"Add Task":"Save Changes"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{label:"Task Title *",value:n.title,onChange:d=>s({...n,title:d.target.value}),placeholder:"Design homepage mockup",error:o.title}),e.jsx(S,{label:"Description",value:n.description,onChange:d=>s({...n,description:d.target.value}),placeholder:"Task details and notes...",rows:3}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(p,{label:"Due Date",type:"date",value:n.dueDate,onChange:d=>s({...n,dueDate:d.target.value})}),e.jsx(p,{label:"Time Estimate (hours)",type:"number",value:n.timeEstimate,onChange:d=>s({...n,timeEstimate:parseFloat(d.target.value)||0}),placeholder:"2.5"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"task-priority-slider",className:"block text-sm font-medium text-foreground mb-2",children:["Priority: ",n.priority,"/10"]}),e.jsx("input",{id:"task-priority-slider",type:"range",min:"1",max:"10",value:n.priority,onChange:d=>s({...n,priority:parseInt(d.target.value)}),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsx("span",{children:"Low"}),e.jsx("span",{children:"Medium"}),e.jsx("span",{children:"High"})]})]})]})})},q=({isOpen:r,onClose:c,onSave:u,task:i,mode:g})=>{const[t,n]=f.useState({title:i?.title||"",description:i?.description||"",dueDate:i?.dueDate||"",priority:i?.priority||5,timeEstimate:i?.timeEstimate||0,tags:i?.tags?.join(", ")||""}),[s,o]=f.useState({}),l=()=>{const a={};return t.title.trim()||(a.title="Task title is required"),o(a),Object.keys(a).length===0},m=()=>{if(!l())return;const a=t.tags.split(",").map(d=>d.trim()).filter(d=>d.length>0);u({title:t.title,description:t.description||void 0,dueDate:t.dueDate||void 0,priority:t.priority,status:i?.status||"todo",tags:a,timeEstimate:t.timeEstimate||void 0,completedAt:i?.completedAt}),c()};return e.jsx(y,{isOpen:r,onClose:c,title:g==="create"?"Add New Task":"Edit Task",footer:e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"secondary",onClick:c,children:"Cancel"}),e.jsx(x,{variant:"default",onClick:m,children:g==="create"?"Add Task":"Save Changes"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{label:"Task Title *",value:t.title,onChange:a=>n({...t,title:a.target.value}),placeholder:"Update portfolio website",error:s.title}),e.jsx(S,{label:"Description",value:t.description,onChange:a=>n({...t,description:a.target.value}),placeholder:"Task details and notes...",rows:3}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(p,{label:"Due Date",type:"date",value:t.dueDate,onChange:a=>n({...t,dueDate:a.target.value})}),e.jsx(p,{label:"Time Estimate (hours)",type:"number",value:t.timeEstimate,onChange:a=>n({...t,timeEstimate:parseFloat(a.target.value)||0}),placeholder:"2.5"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"standalone-task-priority-slider",className:"block text-sm font-medium text-foreground mb-2",children:["Priority: ",t.priority,"/10"]}),e.jsx("input",{id:"standalone-task-priority-slider",type:"range",min:"1",max:"10",value:t.priority,onChange:a=>n({...t,priority:parseInt(a.target.value)}),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsx("span",{children:"Low"}),e.jsx("span",{children:"Medium"}),e.jsx("span",{children:"High"})]})]}),e.jsxs("div",{children:[e.jsx(p,{label:"Tags",value:t.tags,onChange:a=>n({...t,tags:a.target.value}),placeholder:"Admin, Marketing, Learning"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Separate tags with commas"})]})]})})};export{R as P,q as S,M as a,Y as b,U as c,F as d,J as e,L as f,D as g,I as h,$ as i,B as j,O as u};
