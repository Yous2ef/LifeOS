import{j as e}from"./radix-ui-C3V2uSY1.js";import{r as d,d as Ke,u as Ye}from"./router-BQf8R6iK.js";import{C as p,b as w,c as C,a as g}from"./Card-Bf7Y9406.js";import{j as P,B as m,M as Ve,x as $e,u as He,a as D,v as B,y as $,s as me}from"./index-OeeYqBZp.js";import{T as Qe,a as Xe,b as G,c as z}from"./tabs-CtPEZ7J4.js";import{E as _e,G as We,T as Je,S as Ze,a as es,M as ss}from"./MarkExamModal-sdK22msj.js";import{w as J,X as ts,F as ue,x as be,y as ye,z as L,I as as,J as F,C as H,K as is,g as Q,v as rs,G as xe,h as M,M as X,P as U,N as ns,T as _,O as ls,Q as ds,V as cs}from"./utils-MsfPC-Eo.js";import{F as W}from"./TextArea-Cwgr_S4g.js";import{F as os}from"./FormSelect-hDM2d4m1.js";import{R as ms,B as xs,C as us,X as hs,Y as js,T as ps,a as gs,b as fs}from"./charts-5ZM4_dsB.js";import{K as vs,a as we}from"./KanbanCard-L0YePoY9.js";import"./react-vendor-pR2cKLDH.js";import"./dnd-kit-VvYmaRfD.js";import"./progress-BAK8WlVO.js";const Ns=({isOpen:x,onClose:y,onSave:n,resource:o})=>{const[r,t]=d.useState(""),[h,b]=d.useState(""),[S,E]=d.useState(""),[j,f]=d.useState({});d.useEffect(()=>{o?(t(o.title),b(o.url),E(o.description||"")):(t(""),b(""),E("")),f({})},[o,x]);const v=u=>{try{return new URL(u),!0}catch{return!1}},k=()=>{const u={};if(r.trim()||(u.title="Title is required"),h.trim()?v(h)||(u.url="Please enter a valid URL (e.g., https://example.com)"):u.url="URL is required",Object.keys(u).length>0){f(u);return}n({title:r.trim(),url:h.trim(),description:S.trim()||void 0}),t(""),b(""),E(""),f({})};return x?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:y}),e.jsxs("div",{className:"relative bg-background rounded-lg shadow-lg w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),o?"Edit Resource":"Add Resource"]}),e.jsx("button",{onClick:y,className:"text-muted-foreground hover:text-foreground transition-colors","aria-label":"Close",children:e.jsx(ts,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:P("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",j.title&&"border-red-500"),placeholder:"e.g., Course Textbook, Lecture Slides, etc.",value:r,onChange:u=>{t(u.target.value),j.title&&f({...j,title:void 0})}}),j.title&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:j.title})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["URL ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"url",className:P("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",j.url&&"border-red-500"),placeholder:"https://example.com",value:h,onChange:u=>{b(u.target.value),j.url&&f({...j,url:void 0})}}),j.url&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:j.url})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium mb-2",children:[e.jsx(ue,{className:"w-4 h-4"}),"Description (Optional)"]}),e.jsx("textarea",{className:"w-full px-4 py-2.5 bg-background border border-input rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent transition-all duration-200 resize-none",placeholder:"Add a brief description about this resource...",rows:3,value:S,onChange:u=>E(u.target.value)})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t bg-muted/30",children:[e.jsx(m,{variant:"secondary",onClick:y,children:"Cancel"}),e.jsx(m,{onClick:k,children:o?"Save Changes":"Add Resource"})]})]})]}):null},bs=[{value:"assignment",label:"ðŸ“ Assignment"},{value:"quiz",label:"ðŸ“‹ Quiz"},{value:"sheet",label:"ðŸ“„ Sheet/Homework"},{value:"attendance",label:"âœ… Attendance"},{value:"participation",label:"ðŸ™‹ Participation"},{value:"bonus",label:"â­ Bonus Points"},{value:"deduction",label:"âž– Deduction"},{value:"other",label:"ðŸ“Œ Other"}],ys=({isOpen:x,onClose:y,onSave:n,subjectId:o,entry:r})=>{const[t,h]=d.useState({type:"assignment",title:"",description:"",pointsEarned:0,maxPoints:10,hasMaxPoints:!0,date:new Date().toISOString().split("T")[0]});d.useEffect(()=>{h(r?{type:r.type,title:r.title,description:r.description||"",pointsEarned:r.pointsEarned,maxPoints:r.maxPoints||10,hasMaxPoints:r.maxPoints!==void 0,date:r.date}:{type:"assignment",title:"",description:"",pointsEarned:0,maxPoints:10,hasMaxPoints:!0,date:new Date().toISOString().split("T")[0]})},[r,x]);const b=f=>{const{name:v,value:k,type:u}=f.target;if(u==="checkbox"){const T=f.target.checked;h(O=>({...O,[v]:T}))}else h(v==="pointsEarned"||v==="maxPoints"?T=>({...T,[v]:parseFloat(k)||0}):T=>({...T,[v]:k}))},S=f=>{const v=f.target.value;h(k=>({...k,type:v,hasMaxPoints:v!=="bonus"&&v!=="deduction"}))},E=f=>{if(f.preventDefault(),!t.title.trim())return;const v={id:r?.id||$e(),subjectId:o,type:t.type,title:t.title.trim(),description:t.description.trim()||void 0,pointsEarned:t.pointsEarned,maxPoints:t.hasMaxPoints?t.maxPoints:void 0,date:t.date,createdAt:r?.createdAt||new Date().toISOString()};n(v),y()},j=t.type==="bonus"||t.type==="deduction";return e.jsx(Ve,{isOpen:x,onClose:y,title:r?"Edit Grade Entry":"Add Grade Entry",footer:e.jsxs(e.Fragment,{children:[e.jsx(m,{variant:"secondary",onClick:y,children:"Cancel"}),e.jsxs(m,{variant:"default",onClick:E,children:[r?"Update":"Add"," Entry"]})]}),children:e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsx(os,{label:"Type",name:"type",value:t.type,onChange:S,options:bs.map(f=>({value:f.value,label:f.label}))}),e.jsx(W,{label:"Title *",name:"title",value:t.title,onChange:b,placeholder:t.type==="sheet"?"e.g., Sheet 3 Submission":t.type==="quiz"?"e.g., Pop Quiz Week 5":t.type==="bonus"?"e.g., Extra Credit Assignment":t.type==="deduction"?"e.g., Late Submission Penalty":"e.g., Homework Assignment 1",required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(W,{label:j?t.type==="deduction"?"Points Deducted":"Bonus Points":"Points Earned",name:"pointsEarned",type:"number",step:"0.5",value:t.pointsEarned,onChange:b,min:t.type==="deduction"?void 0:0}),!j&&e.jsx(W,{label:"Max Points",name:"maxPoints",type:"number",step:"0.5",min:"0",value:t.maxPoints,onChange:b})]}),e.jsx(W,{label:"Date",name:"date",type:"date",value:t.date,onChange:b}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description (Optional)"}),e.jsx("textarea",{name:"description",value:t.description,onChange:b,placeholder:"Add any notes or details...",className:"w-full min-h-[80px] p-3 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary bg-background"})]})]})})},ws=({exams:x,gradeEntries:y})=>{const n=d.useMemo(()=>{const r=[];return x.filter(t=>t.taken&&t.grade!==void 0&&t.grade!==null).forEach(t=>{r.push({name:t.title.length>15?t.title.substring(0,15)+"...":t.title,earned:t.grade||0,max:t.maxGrade||100,percentage:(t.grade||0)/(t.maxGrade||100)*100,type:"exam"})}),y.filter(t=>t.type!=="bonus"&&t.type!=="deduction"&&t.maxPoints).forEach(t=>{r.push({name:t.title.length>15?t.title.substring(0,15)+"...":t.title,earned:t.pointsEarned,max:t.maxPoints||10,percentage:t.pointsEarned/(t.maxPoints||10)*100,type:"entry"})}),r},[x,y]),o=r=>r>=90?"#22c55e":r>=80?"#10b981":r>=70?"#3b82f6":r>=60?"#eab308":r>=50?"#f97316":"#ef4444";return n.length===0?e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),"Performance Chart"]})}),e.jsx(g,{children:e.jsx("div",{className:"h-[200px] flex items-center justify-center text-muted-foreground",children:"No graded items yet. Add grades to see your performance chart."})})]}):e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),"Performance Chart"]})}),e.jsxs(g,{children:[e.jsx("div",{className:"h-[300px]",children:e.jsx(ms,{width:"100%",height:"100%",children:e.jsxs(xs,{data:n,margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(us,{strokeDasharray:"3 3",opacity:.3}),e.jsx(hs,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),e.jsx(js,{domain:[0,100],tickFormatter:r=>`${r}%`,tick:{fontSize:12}}),e.jsx(ps,{content:({active:r,payload:t})=>{if(r&&t&&t.length){const h=t[0].payload;return e.jsxs("div",{className:"bg-background border rounded-lg p-3 shadow-lg",children:[e.jsx("p",{className:"font-medium",children:h.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Score: ",h.earned," /"," ",h.max]}),e.jsxs("p",{className:"text-sm font-medium",children:["Percentage:"," ",h.percentage.toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground capitalize",children:["Type: ",h.type]})]})}return null}}),e.jsx(gs,{dataKey:"percentage",radius:[4,4,0,0],children:n.map((r,t)=>e.jsx(fs,{fill:o(r.percentage)},`cell-${t}`))})]})})}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{children:"90%+ Excellent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{children:"70-89% Good"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),e.jsx("span",{children:"60-69% Pass"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{children:"<60% Needs Work"})]})]})]})]})},Ls=()=>{const{subjectId:x}=Ke(),y=Ye(),{data:n,updateData:o,showToast:r}=He(),[t,h]=d.useState("overview"),[b,S]=d.useState("kanban"),[E,j]=d.useState(!1),[f,v]=d.useState(!1),[k,u]=d.useState(!1),[T,O]=d.useState(!1),[Ce,Z]=d.useState(!1),[Ee,ee]=d.useState(!1),[ke,se]=d.useState(void 0),[q,K]=d.useState(void 0),[Se,te]=d.useState(void 0),[Te,ae]=d.useState(null),[De,he]=d.useState("mark"),[Me,ie]=d.useState(void 0),[Y,je]=d.useState(""),[re,ne]=d.useState(!1),i=d.useMemo(()=>n.university.subjects.find(s=>s.id===x),[n.university.subjects,x]);d.useEffect(()=>{i?.description&&je(i.description)},[i]);const N=d.useMemo(()=>n.university.tasks.filter(s=>s.subjectId===x),[n.university.tasks,x]),A=d.useMemo(()=>n.university.exams.filter(s=>s.subjectId===x),[n.university.exams,x]),R=d.useMemo(()=>(n.university.gradeEntries||[]).filter(s=>s.subjectId===x),[n.university.gradeEntries,x]),le=d.useMemo(()=>{const s=N.filter(V=>V.status==="done").length,a=N.length,l=a-s,c=a>0?s/a*100:0;return{completed:s,total:a,pending:l,completionRate:c}},[N]),de=d.useMemo(()=>({todo:N.filter(s=>s.status==="todo"),"in-progress":N.filter(s=>s.status==="in-progress"),done:N.filter(s=>s.status==="done")}),[N]);if(!i)return e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Subject Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The subject you're looking for doesn't exist."}),e.jsxs(m,{onClick:()=>y("/university"),children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Back to University"]})]})});const ce=s=>{const a=n.university.tasks.map(l=>l.id===s?{...l,status:l.status==="done"?"todo":"done"}:l);o({university:{...n.university,tasks:a}})},pe=s=>{const a=n.university.tasks.filter(l=>l.id!==s);o({university:{...n.university,tasks:a}}),r("Task deleted successfully!","success")},Pe=(s,a)=>{const l=n.university.tasks.map(c=>c.id===s?{...c,status:a}:c);o({university:{...n.university,tasks:l}})},Ae=()=>{const s=n.university.subjects.map(a=>a.id===x?{...a,description:Y.trim()||void 0}:a);o({university:{...n.university,subjects:s}}),ne(!1),r("Description saved!","success")},Ge=s=>{const a={id:Date.now().toString(),...s},l=n.university.subjects.map(c=>c.id===x?{...c,resources:[...c.resources||[],a]}:c);o({university:{...n.university,subjects:l}}),u(!1),r("Resource added successfully!","success")},ze=s=>{if(!q)return;const a=n.university.subjects.map(l=>l.id===x?{...l,resources:(l.resources||[]).map(c=>c.id===q.id?{...c,...s}:c)}:l);o({university:{...n.university,subjects:a}}),u(!1),K(void 0),r("Resource updated successfully!","success")},Oe=s=>{const a=n.university.subjects.map(l=>l.id===x?{...l,resources:(l.resources||[]).filter(c=>c.id!==s)}:l);o({university:{...n.university,subjects:a}}),r("Resource deleted successfully!","success")},Re=s=>{ae(s),he("mark"),Z(!0)},Ie=s=>{ae(s),he("grade"),Z(!0)},Be=s=>{te(s),O(!0)},Le=s=>{confirm("Are you sure you want to delete this exam?")&&(o({university:{...n.university,exams:n.university.exams.filter(a=>a.id!==s.id)}}),r("Exam deleted successfully!","success"))},Fe=(s,a)=>{o({university:{...n.university,exams:n.university.exams.map(l=>l.id===s?{...l,...a}:l)}}),r(a.grade!==void 0?"Grade saved successfully!":"Exam marked as taken!","success")},Ue=s=>{const a=n.university.gradeEntries||[];a.findIndex(c=>c.id===s.id)>=0?(o({university:{...n.university,gradeEntries:a.map(c=>c.id===s.id?s:c)}}),r("Grade entry updated!","success")):(o({university:{...n.university,gradeEntries:[...a,s]}}),r("Grade entry added!","success"))},qe=s=>{confirm("Are you sure you want to delete this grade entry?")&&(o({university:{...n.university,gradeEntries:(n.university.gradeEntries||[]).filter(a=>a.id!==s)}}),r("Grade entry deleted!","success"))};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(m,{variant:"ghost",size:"sm",onClick:()=>y("/university"),children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Back to University"]}),e.jsxs(m,{onClick:()=>v(!0),variant:"outline",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Edit Subject"]})]}),e.jsx(p,{className:"border-l-4",style:{borderLeftColor:i.color},children:e.jsx(g,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-white text-2xl font-bold shadow-md",style:{backgroundColor:i.color},children:i.name.split(" ").slice(0,2).map(s=>s.charAt(0).toUpperCase()).join("")}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:i.name}),i.professor&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(as,{className:"w-4 h-4"}),e.jsx("span",{className:"text-lg",children:i.professor})]})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(p,{children:e.jsx(g,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(F,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),e.jsx("div",{className:"text-2xl font-bold",children:le.total}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tasks"})]})})}),e.jsx(p,{children:e.jsx(g,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(H,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("div",{className:"text-2xl font-bold",children:le.completed}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completed"})]})})}),e.jsx(p,{children:e.jsx(g,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(is,{className:"w-8 h-8 mx-auto mb-2 text-orange-500"}),e.jsx("div",{className:"text-2xl font-bold",children:le.pending}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pending"})]})})}),e.jsx(p,{children:e.jsx(g,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Q,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx("div",{className:"text-2xl font-bold",children:A.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Exams"})]})})})]}),e.jsxs(Qe,{value:t,onValueChange:h,children:[e.jsxs(Xe,{className:"flex-wrap h-auto gap-1",children:[e.jsxs(G,{value:"overview",children:[e.jsx(rs,{className:"w-4 h-4 mr-2"}),"Overview"]}),e.jsxs(G,{value:"exams",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Exams & Grades"]}),e.jsxs(G,{value:"tasks",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Tasks (",N.length,")"]}),e.jsxs(G,{value:"schedule",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Schedule"]}),e.jsxs(G,{value:"notes",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Notes"]}),e.jsxs(G,{value:"resources",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Resources"]})]}),e.jsx(z,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5"}),"Schedule"]})}),e.jsxs(g,{className:"space-y-3",children:[i.lectures&&i.lectures.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:e.jsx(D,{variant:"outline",style:{borderColor:i.color,color:i.color},children:"Lectures"})}),i.lectures.map((s,a)=>e.jsxs("div",{className:"pl-4 py-2 border-l-2",style:{borderColor:i.color},children:[e.jsx("div",{className:"font-medium",children:s.day}),e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(M,{className:"w-3 h-3"}),s.startTime," ","- ",s.endTime]}),s.location&&e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(X,{className:"w-3 h-3"}),s.location]})]},a))]}),i.sections&&i.sections.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:e.jsx(D,{variant:"outline",style:{borderColor:i.color,color:i.color,opacity:.8},children:"Sections"})}),i.sections.map((s,a)=>e.jsxs("div",{className:"pl-4 py-2 border-l-2",style:{borderColor:i.color,opacity:.8},children:[e.jsx("div",{className:"font-medium",children:s.day}),e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(M,{className:"w-3 h-3"}),s.startTime," ","- ",s.endTime]}),s.location&&e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(X,{className:"w-3 h-3"}),s.location]})]},a))]}),(!i.lectures||i.lectures.length===0)&&(!i.sections||i.sections.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No schedule set"})]})]}),e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),"Recent Tasks"]}),e.jsxs(m,{size:"sm",onClick:()=>j(!0),children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Add Task"]})]})}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-2",children:[N.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("button",{onClick:()=>ce(s.id),className:P("w-5 h-5 rounded border-2 flex items-center justify-center transition-colors",s.status==="done"?"bg-primary border-primary":"border-muted-foreground"),children:s.status==="done"&&e.jsx(H,{className:"w-3 h-3 text-primary-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:P("font-medium",s.status==="done"&&"line-through text-muted-foreground"),children:s.title}),s.dueDate&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Due:"," ",B(s.dueDate)]})]})]}),e.jsx(D,{variant:"outline",style:{borderColor:$(s.priority),color:$(s.priority)},children:s.priority})]},s.id)),N.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No tasks yet"}),N.length>5&&e.jsxs(m,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>h("tasks"),children:["View all ",N.length," tasks"]})]})})]})]})}),e.jsx(z,{value:"exams",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5"}),"Exams (",A.length,")"]}),e.jsxs(m,{size:"sm",onClick:()=>{te(void 0),O(!0)},children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Add Exam"]})]})}),e.jsx(g,{className:"space-y-3",children:A.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(xe,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No exams yet"}),e.jsx("p",{className:"text-sm mt-2",children:"Add exams to track your grades"})]}):A.sort((s,a)=>{const l=new Date,c=new Date(l.getFullYear(),l.getMonth(),l.getDate()),V=new Date(s.date),ge=new Date(a.date),fe=I=>{const Ne=new Date(I.date)<c;return!I.taken&&Ne?1:!I.taken&&!Ne?2:I.taken&&I.grade===void 0?3:4},oe=fe(s),ve=fe(a);return oe!==ve?oe-ve:oe===2?V.getTime()-ge.getTime():ge.getTime()-V.getTime()}).map(s=>e.jsx(_e,{exam:s,subjectColor:i.color,onMarkAsTaken:Re,onAddGrade:Ie,onEdit:Be,onDelete:Le},s.id))})]}),e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5"}),"Other Grades (",R.length,")"]}),e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>{ie(void 0),ee(!0)},children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Add Grade"]})]})}),e.jsx(g,{children:R.length===0?e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:e.jsx("p",{className:"text-sm",children:"Add assignments, quizzes, attendance, and other grades"})}):e.jsx("div",{className:"space-y-2",children:R.sort((s,a)=>new Date(a.date).getTime()-new Date(s.date).getTime()).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.title}),e.jsx(D,{variant:"outline",className:"text-xs capitalize",children:s.type})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[B(s.date),s.description&&` â€¢ ${s.description}`]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:P("font-bold text-lg",s.type==="bonus"&&"text-green-600 dark:text-green-400",s.type==="deduction"&&"text-red-600 dark:text-red-400"),children:[s.type==="bonus"&&"+",s.type==="deduction"&&"-",s.pointsEarned,s.maxPoints&&`/${s.maxPoints}`]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>{ie(s),ee(!0)},children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>qe(s.id),children:e.jsx(_,{className:"w-4 h-4 text-red-500"})})]})]})]},s.id))})})]}),e.jsx(ws,{exams:A,gradeEntries:R,subjectColor:i.color})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(We,{subject:i,exams:A,gradeEntries:R})})]})}),e.jsx(z,{value:"tasks",children:e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{children:"All Tasks"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center border rounded-md",children:[e.jsx(m,{variant:b==="kanban"?"default":"ghost",size:"sm",onClick:()=>S("kanban"),className:"rounded-r-none",children:e.jsx(ls,{className:"w-4 h-4"})}),e.jsx(m,{variant:b==="list"?"default":"ghost",size:"sm",onClick:()=>S("list"),className:"rounded-l-none",children:e.jsx(ds,{className:"w-4 h-4"})})]}),e.jsxs(m,{onClick:()=>j(!0),children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Add Task"]})]})]})}),e.jsx(g,{children:b==="kanban"?N.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(F,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No tasks yet"}),e.jsx("p",{className:"text-sm mt-2",children:'Click "Add Task" to create your first task'})]}):e.jsx(vs,{columns:[{id:"todo",title:"To Do",items:de.todo,color:"from-blue-500 to-blue-600"},{id:"in-progress",title:"In Progress",items:de["in-progress"],color:"from-yellow-500 to-yellow-600"},{id:"done",title:"Done",items:de.done,color:"from-green-500 to-green-600"}],onDragEnd:(s,a)=>{Pe(s,a)},getItemId:s=>s.id,renderItem:s=>{const a=[];if(a.push({label:s.priority.toString(),variant:"outline",icon:void 0}),s.dueDate){const c=me(s.dueDate);a.push({label:B(s.dueDate),variant:s.status!=="done"&&c<=3?"destructive":"secondary",icon:e.jsx(Q,{className:"w-3 h-3"})})}const l=[{label:"Edit",icon:e.jsx(L,{className:"w-4 h-4"}),onClick:()=>{se(s),j(!0)}},{label:s.status==="done"?"Mark as Todo":"Mark as Done",icon:e.jsx(H,{className:"w-4 h-4"}),onClick:()=>ce(s.id),separator:!0},{label:"Delete",icon:e.jsx(_,{className:"w-4 h-4"}),onClick:()=>pe(s.id),variant:"destructive"}];return e.jsx(we,{id:s.id,title:s.title,description:s.description,badges:a,actions:l})},dragOverlay:s=>e.jsx(we,{id:s.id,title:s.title,description:s.description,badges:[{label:s.priority.toString(),variant:"outline"},...s.dueDate?[{label:B(s.dueDate),variant:"secondary",icon:e.jsx(Q,{className:"w-3 h-3"})}]:[]],actions:[]})}):e.jsxs("div",{className:"space-y-2",children:[N.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("button",{onClick:()=>ce(s.id),className:P("w-5 h-5 rounded border-2 flex items-center justify-center transition-colors",s.status==="done"?"bg-primary border-primary":"border-muted-foreground"),children:s.status==="done"&&e.jsx(H,{className:"w-3 h-3 text-primary-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:P("font-medium",s.status==="done"&&"line-through text-muted-foreground"),children:s.title}),s.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[s.dueDate&&e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"}),B(s.dueDate),s.status!=="done"&&me(s.dueDate)<=3&&e.jsxs("span",{className:"text-red-500 font-medium",children:["(",me(s.dueDate)," ","days left)"]})]}),e.jsx(D,{variant:"outline",style:{borderColor:$(s.priority),color:$(s.priority)},children:s.priority})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>{se(s),j(!0)},children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>pe(s.id),children:e.jsx(_,{className:"w-4 h-4 text-red-500"})})]})]},s.id)),N.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(F,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No tasks yet"}),e.jsx("p",{className:"text-sm mt-2",children:'Click "Add Task" to create your first task'})]})]})})]})}),e.jsx(z,{value:"schedule",children:e.jsxs(p,{children:[e.jsx(w,{children:e.jsx(C,{children:"Class Schedule"})}),e.jsxs(g,{className:"space-y-6 w-full ",children:[i.lectures&&i.lectures.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:e.jsx(D,{variant:"outline",style:{borderColor:i.color,color:i.color},children:"Lectures"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.lectures.map((s,a)=>e.jsx(p,{children:e.jsx(g,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold text-lg",children:s.day}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(M,{className:"w-4 h-4"}),s.startTime," ","-"," ",s.endTime]}),s.location&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(X,{className:"w-4 h-4"}),s.location]}),i.professor&&e.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["Professor:"," ",i.professor]})]})})},a))})]}),i.sections&&i.sections.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:e.jsx(D,{variant:"outline",style:{borderColor:i.color,color:i.color,opacity:.8},children:"Sections"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.sections.map((s,a)=>e.jsx(p,{children:e.jsx(g,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold text-lg",children:s.day}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(M,{className:"w-4 h-4"}),s.startTime," ","-"," ",s.endTime]}),s.location&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(X,{className:"w-4 h-4"}),s.location]})]})})},a))})]}),(!i.lectures||i.lectures.length===0)&&(!i.sections||i.sections.length===0)&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(M,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No schedule set"}),e.jsx("p",{className:"text-sm mt-2",children:"Edit the subject to add lectures and sections"})]})]})]})}),e.jsx(z,{value:"notes",children:e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{children:"Notes & Description"}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>ne(!re),children:re?"Cancel":"Edit"})]})}),e.jsx(g,{children:re?e.jsxs("div",{className:"space-y-4",children:[e.jsx("textarea",{className:"w-full min-h-[300px] p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Add notes, important information, or description for this subject...",value:Y,onChange:s=>je(s.target.value)}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(m,{variant:"secondary",onClick:()=>ne(!1),children:"Cancel"}),e.jsx(m,{onClick:Ae,children:"Save Notes"})]})]}):e.jsx("div",{children:Y?e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("p",{className:"whitespace-pre-wrap",children:Y})}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(ue,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No notes yet"}),e.jsx("p",{className:"text-sm mt-2",children:'Click "Edit" to add notes and description'})]})})})]})}),e.jsx(z,{value:"resources",children:e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{children:"Links & Resources"}),e.jsxs(m,{size:"sm",onClick:()=>{K(void 0),u(!0)},children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Add Resource"]})]})}),e.jsx(g,{children:i.resources&&i.resources.length>0?e.jsx("div",{className:"space-y-3",children:i.resources.map(s=>e.jsx(p,{className:"hover:shadow-md transition-shadow",children:e.jsx(g,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(J,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold mb-1 flex items-center gap-2",children:s.title}),e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline flex items-center gap-1 mb-2 break-all",children:[e.jsx(cs,{className:"w-3 h-3 flex-shrink-0"}),s.url]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>{K(s),u(!0)},children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>Oe(s.id),children:e.jsx(_,{className:"w-4 h-4 text-red-500"})})]})]})})},s.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(J,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No resources yet"}),e.jsx("p",{className:"text-sm mt-2",children:"Add useful links, documents, and resources for this subject"})]})})]})})]}),e.jsx(Je,{isOpen:E,onClose:()=>{j(!1),se(void 0)},task:ke}),e.jsx(Ze,{isOpen:f,onClose:()=>v(!1),subject:i}),e.jsx(Ns,{isOpen:k,onClose:()=>{u(!1),K(void 0)},onSave:q?ze:Ge,resource:q}),e.jsx(es,{isOpen:T,onClose:()=>{O(!1),te(void 0)},exam:Se}),e.jsx(ss,{isOpen:Ce,onClose:()=>{Z(!1),ae(null)},onSave:Fe,exam:Te,mode:De}),e.jsx(ys,{isOpen:Ee,onClose:()=>{ee(!1),ie(void 0)},onSave:Ue,subjectId:x||"",entry:Me})]})};export{Ls as SubjectDetails};
