import{j as e,g as es,h as ts,i as Mt,k as ss,l as Et,D as Tt,O as Ft,m as Ot,n as as,o as ns,p as ls,q as rs,r as is,s as os,t as cs,u as ds,v as ms,w as us,x as xs,y as hs,z as Rt,A as gs}from"./radix-ui-U22BTGbQ.js";import{r as l}from"./router-CLckEVPx.js";import{C as K,a as H,b as ne,c as le,d as Ge}from"./Card-CvHSRHBy.js";import{c as R,M as $t,B as $,I as ae,e as ps}from"./index-BOba6i08.js";import{T as Pt,a as Bt,b as ve,c as we}from"./tabs-DoLnltE6.js";import{aj as Re,ak as lt,W as Ye,al as fs,n as pe,o as Qe,X as Xe,z as qe,am as pt,w as me,ad as Le,E as js,an as bt,q as ke,ao as mt,ap as ut,T as $e,aq as Gt,ar as Ns,p as He,j as nt,I as bs,l as Ze,m as rt,as as ft,r as Ve,B as zt,C as gt,s as ys,b as Ke,P as Oe,at as yt,e as Lt,au as vs,av as Yt,aw as ws,ac as Cs,Z as Ss,ax as Ds,J as As,ay as ks,a4 as Is,ah as Ms,az as Es,aA as Ts,aB as Fs,aC as Os,aD as Rs,U as $s,aE as vt,aF as wt}from"./utils-DdC2hUi5.js";import{F as ze,T as Ue}from"./TextArea-Bmf-jGgl.js";import{R as jt,L as Ps,C as qt,X as Wt,Y as Vt,T as Nt,e as Ut,f as xt,P as Bs,g as Gs,b as zs,A as Ls,h as Ys,i as Ct}from"./charts-z5w_wLt1.js";import{P as _t}from"./progress-CPpQ0E55.js";import"./react-vendor-pR2cKLDH.js";const ht="lifeos-finance-data",U=()=>`${Date.now()}_${Math.random().toString(36).substring(2,9)}`,at=()=>{const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},qs=(t,s=1)=>{const[n,a]=t.split("-").map(Number);return new Date(n,a-1,s)},Ws=(t,s=1)=>{const[n,a]=t.split("-").map(Number);return new Date(n,a,s-1)},Be=(t,s,n=1)=>{const a=new Date(t),g=qs(s,n),i=Ws(s,n);return a>=g&&a<=i},Je=()=>{const t=new Date().toISOString(),s=[{id:U(),name:"Rent/Mortgage",nameAr:"Ø¥ÙŠØ¬Ø§Ø±/Ù‚Ø³Ø· Ø³ÙƒÙ†",icon:"ðŸ ",color:"#3b82f6",isEssential:!0,isDefault:!0,order:1,createdAt:t},{id:U(),name:"Utilities",nameAr:"ÙÙˆØ§ØªÙŠØ±",icon:"âš¡",color:"#eab308",isEssential:!0,isDefault:!0,order:2,createdAt:t},{id:U(),name:"Transportation",nameAr:"Ù…ÙˆØ§ØµÙ„Ø§Øª",icon:"ðŸš—",color:"#8b5cf6",isEssential:!0,isDefault:!0,order:3,createdAt:t},{id:U(),name:"Groceries",nameAr:"Ø·Ø¹Ø§Ù… ÙˆØ¨Ù‚Ø§Ù„Ø©",icon:"ðŸ›’",color:"#22c55e",isEssential:!0,isDefault:!0,order:4,createdAt:t},{id:U(),name:"Healthcare",nameAr:"ØµØ­Ø© ÙˆØ¯ÙˆØ§Ø¡",icon:"ðŸ’Š",color:"#ef4444",isEssential:!0,isDefault:!0,order:5,createdAt:t},{id:U(),name:"Insurance",nameAr:"ØªØ£Ù…ÙŠÙ†",icon:"ðŸ›¡ï¸",color:"#0ea5e9",isEssential:!0,isDefault:!0,order:6,createdAt:t},{id:U(),name:"Dining Out",nameAr:"Ø£ÙƒÙ„ Ø¨Ø±Ù‡",icon:"ðŸ”",color:"#f97316",isEssential:!1,isDefault:!0,order:7,createdAt:t},{id:U(),name:"Entertainment",nameAr:"ØªØ±ÙÙŠÙ‡",icon:"ðŸŽ®",color:"#ec4899",isEssential:!1,isDefault:!0,order:8,createdAt:t},{id:U(),name:"Shopping",nameAr:"ØªØ³ÙˆÙ‚",icon:"ðŸ›ï¸",color:"#a855f7",isEssential:!1,isDefault:!0,order:9,createdAt:t},{id:U(),name:"Clothing",nameAr:"Ù…Ù„Ø§Ø¨Ø³",icon:"ðŸ‘”",color:"#06b6d4",isEssential:!1,isDefault:!0,order:10,createdAt:t},{id:U(),name:"Education",nameAr:"ØªØ¹Ù„ÙŠÙ…",icon:"ðŸ“š",color:"#14b8a6",isEssential:!1,isDefault:!0,order:11,createdAt:t},{id:U(),name:"Gifts",nameAr:"Ù‡Ø¯Ø§ÙŠØ§",icon:"ðŸŽ",color:"#f43f5e",isEssential:!1,isDefault:!0,order:12,createdAt:t},{id:U(),name:"Sports",nameAr:"Ø±ÙŠØ§Ø¶Ø©",icon:"âš½",color:"#10b981",isEssential:!1,isDefault:!0,order:13,createdAt:t},{id:U(),name:"Travel",nameAr:"Ø³ÙØ±",icon:"âœˆï¸",color:"#6366f1",isEssential:!1,isDefault:!0,order:14,createdAt:t},{id:U(),name:"Subscriptions",nameAr:"Ø§Ø´ØªØ±Ø§ÙƒØ§Øª",icon:"ðŸ“±",color:"#8b5cf6",isEssential:!1,isDefault:!0,order:15,createdAt:t},{id:U(),name:"Personal Care",nameAr:"Ø¹Ù†Ø§ÙŠØ© Ø´Ø®ØµÙŠØ©",icon:"ðŸ’‡",color:"#d946ef",isEssential:!1,isDefault:!0,order:16,createdAt:t},{id:U(),name:"Emergency",nameAr:"Ø·ÙˆØ§Ø±Ø¦",icon:"ðŸš¨",color:"#dc2626",isEssential:!0,isDefault:!0,order:17,createdAt:t},{id:U(),name:"Other",nameAr:"Ø£Ø®Ø±Ù‰",icon:"ðŸ“¦",color:"#64748b",isEssential:!1,isDefault:!0,order:18,createdAt:t}];return{incomes:[],expenses:[],categories:s,installments:[],budgets:[],goals:[],alerts:[],settings:{defaultCurrency:"EGP",monthStartDay:1,showCents:!1,enableBudgetAlerts:!0,budgetWarningThreshold:80,enableInstallmentReminders:!0,installmentReminderDays:3,enableInsights:!0,weeklyReportEnabled:!0,monthlyReportEnabled:!0}}},Vs=()=>{const[t,s]=l.useState(()=>{try{const N=localStorage.getItem(ht);if(N){const v=JSON.parse(N);return{...Je(),...v,settings:{...Je().settings,...v.settings}}}return Je()}catch{return console.error("Failed to load finance data"),Je()}});l.useEffect(()=>{try{localStorage.setItem(ht,JSON.stringify(t))}catch(N){console.error("Failed to save finance data:",N)}},[t]);const n=l.useCallback((N,v)=>{const j=new Date(N);switch(v){case"daily":j.setDate(j.getDate()+1);break;case"weekly":j.setDate(j.getDate()+7);break;case"bi-weekly":j.setDate(j.getDate()+14);break;case"monthly":j.setMonth(j.getMonth()+1);break;case"quarterly":j.setMonth(j.getMonth()+3);break;case"yearly":j.setFullYear(j.getFullYear()+1);break;default:j.setMonth(j.getMonth()+1)}return j.toISOString().split("T")[0]},[]);l.useEffect(()=>{const v=setTimeout(()=>{const j=new Date;j.setHours(0,0,0,0);const k=t.incomes.filter(C=>C.isRecurring&&C.frequency!=="one-time"&&(!C.recurringEndDate||new Date(C.recurringEndDate)>=j)),u=[],F=[];k.forEach(C=>{let z=C.nextOccurrence?new Date(C.nextOccurrence):C.actualDate?new Date(C.actualDate):new Date(C.createdAt);if(!C.nextOccurrence){const P=C.actualDate||C.createdAt;z=new Date(n(P,C.frequency))}for(;z<=j;){const P=z.toISOString().split("T")[0];if(!t.incomes.find(O=>O.title===C.title&&O.amount===C.amount&&O.actualDate===P)){const O=new Date().toISOString();u.push({...C,id:U(),status:"received",actualDate:P,expectedDate:void 0,isRecurring:!1,nextOccurrence:void 0,createdAt:O,updatedAt:O,notes:`${C.notes?C.notes+" | ":""}Auto-generated from recurring income`})}const J=n(P,C.frequency);z=new Date(J)}if(z>j){const P=z.toISOString().split("T")[0];C.nextOccurrence!==P&&F.push({id:C.id,nextOccurrence:P})}}),(u.length>0||F.length>0)&&s(C=>({...C,incomes:[...C.incomes.map(z=>{const P=F.find(ee=>ee.id===z.id);return P?{...z,nextOccurrence:P.nextOccurrence,updatedAt:new Date().toISOString()}:z}),...u]}))},500);return()=>clearTimeout(v)},[]),l.useEffect(()=>{const v=setTimeout(()=>{const j=new Date;j.setHours(0,0,0,0);const k=t.expenses.filter(C=>C.isRecurring&&C.recurringFrequency&&(!C.recurringEndDate||new Date(C.recurringEndDate)>=j)),u=[],F=[];k.forEach(C=>{let z=C.nextOccurrence?new Date(C.nextOccurrence):new Date(C.date);for(C.nextOccurrence||(z=new Date(n(C.date,C.recurringFrequency||"monthly")));z<=j;){const P=z.toISOString().split("T")[0];if(!t.expenses.find(O=>O.title===C.title&&O.amount===C.amount&&O.categoryId===C.categoryId&&O.date===P)){const O=new Date().toISOString();u.push({...C,id:U(),date:P,isRecurring:!1,recurringFrequency:void 0,nextOccurrence:void 0,createdAt:O,updatedAt:O,notes:`${C.notes?C.notes+" | ":""}Auto-generated from recurring expense`})}const J=n(P,C.recurringFrequency||"monthly");z=new Date(J)}if(z>j){const P=z.toISOString().split("T")[0];C.nextOccurrence!==P&&F.push({id:C.id,nextOccurrence:P})}}),(u.length>0||F.length>0)&&s(C=>({...C,expenses:[...C.expenses.map(z=>{const P=F.find(ee=>ee.id===z.id);return P?{...z,nextOccurrence:P.nextOccurrence,updatedAt:new Date().toISOString()}:z}),...u]}))},700);return()=>clearTimeout(v)},[]),l.useEffect(()=>{const v=setTimeout(()=>{const j=t.goals.filter(P=>P.autoAllocate&&P.status==="active");if(j.length===0)return;const k=new Date,u=k.toISOString().split("T")[0],C=new Date(k.getFullYear(),k.getMonth(),t.settings.monthStartDay).toISOString().split("T")[0],z=t.incomes.filter(P=>P.status==="received"&&P.actualDate&&P.actualDate>=C);j.forEach(P=>{const J=P.contributions.filter(O=>O.date>=C).reduce((O,q)=>O+q.amount,0);if(J<P.monthlyContribution&&z.length>0){const O=P.monthlyContribution-J,q=Math.min(O,P.targetAmount-P.currentAmount);if(q>0){const de=new Date().toISOString(),Me={id:U(),goalId:P.id,amount:q,date:u,notes:"Auto-allocated from monthly income",createdAt:de};s(xe=>({...xe,goals:xe.goals.map(ie=>ie.id===P.id?{...ie,currentAmount:ie.currentAmount+q,contributions:[...ie.contributions,Me],status:ie.currentAmount+q>=ie.targetAmount?"completed":ie.status,updatedAt:de}:ie)}))}}})},1e3);return()=>clearTimeout(v)},[t.incomes.length,t.goals.length,t.settings.monthStartDay]);const a=l.useCallback(N=>{const v=new Date().toISOString(),j={...N,id:U(),createdAt:v,updatedAt:v};return s(k=>({...k,incomes:[...k.incomes,j]})),j},[]),g=l.useCallback((N,v)=>{s(j=>({...j,incomes:j.incomes.map(k=>k.id===N?{...k,...v,updatedAt:new Date().toISOString()}:k)}))},[]),i=l.useCallback(N=>{s(v=>({...v,incomes:v.incomes.filter(j=>j.id!==N)}))},[]),f=l.useCallback(N=>t.incomes.find(v=>v.id===N),[t.incomes]),d=l.useCallback(N=>{const v=new Date().toISOString(),j={...N,id:U(),createdAt:v,updatedAt:v};return s(k=>({...k,expenses:[...k.expenses,j]})),j},[]),p=l.useCallback((N,v)=>{s(j=>({...j,expenses:j.expenses.map(k=>k.id===N?{...k,...v,updatedAt:new Date().toISOString()}:k)}))},[]),o=l.useCallback(N=>{s(v=>({...v,expenses:v.expenses.filter(j=>j.id!==N)}))},[]),y=l.useCallback(N=>t.expenses.find(v=>v.id===N),[t.expenses]),b=l.useCallback(N=>{const v={...N,id:U(),createdAt:new Date().toISOString()};return s(j=>({...j,categories:[...j.categories,v]})),v},[]),M=l.useCallback((N,v)=>{s(j=>({...j,categories:j.categories.map(k=>k.id===N?{...k,...v}:k)}))},[]),c=l.useCallback(N=>t.categories.find(j=>j.id===N)?.isDefault?!1:(s(j=>({...j,categories:j.categories.filter(k=>k.id!==N)})),!0),[t.categories]),h=l.useCallback(N=>t.categories.find(v=>v.id===N),[t.categories]),m=l.useCallback(N=>{const v=new Date().toISOString(),j={...N,id:U(),paidAmount:0,paidInstallments:0,payments:[],createdAt:v,updatedAt:v};return s(k=>({...k,installments:[...k.installments,j]})),j},[]),r=l.useCallback((N,v)=>{s(j=>({...j,installments:j.installments.map(k=>k.id===N?{...k,...v,updatedAt:new Date().toISOString()}:k)}))},[]),x=l.useCallback(N=>{s(v=>({...v,installments:v.installments.filter(j=>j.id!==N)}))},[]),S=l.useCallback((N,v)=>{const j=new Date().toISOString(),k={...v,id:U(),installmentId:N,createdAt:j};return s(u=>{const F=u.installments.find(q=>q.id===N);if(!F)return u;const C=[...F.payments,k],z=C.filter(q=>q.status==="paid"||q.status==="late").reduce((q,de)=>q+de.amount,0),P=C.filter(q=>q.status==="paid"||q.status==="late").length;let ee=F.nextPaymentDate;const J=new Date(F.nextPaymentDate);switch(F.frequency){case"weekly":J.setDate(J.getDate()+7);break;case"bi-weekly":J.setDate(J.getDate()+14);break;case"monthly":J.setMonth(J.getMonth()+1);break;case"quarterly":J.setMonth(J.getMonth()+3);break;case"yearly":J.setFullYear(J.getFullYear()+1);break}ee=J.toISOString().split("T")[0];const O=P>=F.totalInstallments;return{...u,installments:u.installments.map(q=>q.id===N?{...q,payments:C,paidAmount:z,paidInstallments:P,nextPaymentDate:O?q.endDate:ee,status:O?"completed":q.status,updatedAt:j}:q)}}),k},[]),E=l.useCallback(N=>{const v=new Date().toISOString(),j=N.currentAmount||0,k=j>0?[{id:U(),goalId:"",amount:j,date:v.split("T")[0],notes:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",createdAt:v}]:[],u=U();k.length>0&&(k[0].goalId=u);const F={...N,id:u,currentAmount:j,contributions:k,createdAt:v,updatedAt:v};return s(C=>({...C,goals:[...C.goals,F]})),F},[]),A=l.useCallback((N,v)=>{s(j=>({...j,goals:j.goals.map(k=>k.id===N?{...k,...v,updatedAt:new Date().toISOString()}:k)}))},[]),T=l.useCallback(N=>{s(v=>({...v,goals:v.goals.filter(j=>j.id!==N)}))},[]),G=l.useCallback((N,v,j)=>{const k=new Date().toISOString(),u={id:U(),goalId:N,amount:v,date:k.split("T")[0],notes:j,createdAt:k};return s(F=>{const C=F.goals.find(O=>O.id===N);if(!C)return F;const z=[...C.contributions,u],P=z.reduce((O,q)=>O+q.amount,0),ee=P>=C.targetAmount,J=C.milestones.map(O=>!O.reached&&P>=O.targetAmount?{...O,reached:!0,reachedAt:k}:O);return{...F,goals:F.goals.map(O=>O.id===N?{...O,contributions:z,currentAmount:P,milestones:J,status:ee?"completed":O.status,updatedAt:k}:O)}}),u},[]),W=l.useCallback((N=at())=>{const v=t.settings.monthStartDay,j=t.expenses.filter(O=>Be(O.date,N,v)),u=t.incomes.filter(O=>{const q=O.actualDate||O.expectedDate;return q&&Be(q,N,v)&&O.status==="received"}).reduce((O,q)=>O+q.amount,0),F=j.reduce((O,q)=>O+q.amount,0),C=t.categories.map(O=>{const de=j.filter(oe=>oe.categoryId===O.id).reduce((oe,Pe)=>oe+Pe.amount,0),ie=t.budgets.find(oe=>oe.month===N)?.categoryBudgets.find(oe=>oe.categoryId===O.id)?.planned??(O.monthlyBudget||0);return{categoryId:O.id,planned:ie,spent:de}}),z=C.reduce((O,q)=>O+q.planned,0),P=t.budgets.find(O=>O.month===N);if(P)return{...P,categoryBudgets:C,totalActualIncome:u,totalActualExpenses:F,actualSavings:u-F};const ee=new Date().toISOString(),J={id:U(),month:N,totalPlannedIncome:0,totalActualIncome:u,totalPlannedExpenses:z,totalActualExpenses:F,savingsGoal:0,actualSavings:u-F,categoryBudgets:C,createdAt:ee,updatedAt:ee};return s(O=>({...O,budgets:[...O.budgets,J]})),J},[t.budgets,t.categories,t.expenses,t.incomes,t.settings.monthStartDay]),_=l.useCallback((N,v)=>{s(j=>({...j,budgets:j.budgets.map(k=>k.id===N?{...k,...v,updatedAt:new Date().toISOString()}:k)}))},[]),Q=l.useCallback(N=>{const v={...N,id:U(),dismissed:!1,createdAt:new Date().toISOString()};return s(j=>({...j,alerts:[...j.alerts,v]})),v},[]),X=l.useCallback(N=>{s(v=>({...v,alerts:v.alerts.map(j=>j.id===N?{...j,dismissed:!0,dismissedAt:new Date().toISOString()}:j)}))},[]),D=l.useCallback(()=>{const N=new Date;s(v=>({...v,alerts:v.alerts.filter(j=>!(j.expiresAt&&new Date(j.expiresAt)<N))}))},[]),I=l.useCallback(N=>{s(v=>({...v,settings:{...v.settings,...N}}))},[]),w=l.useCallback((N=at())=>{const v=t.settings.monthStartDay,k=t.incomes.filter(Y=>Y.status==="received"&&Y.actualDate&&Be(Y.actualDate,N,v)).reduce((Y,Z)=>Y+Z.amount,0),u=t.expenses.filter(Y=>Be(Y.date,N,v)),F=u.reduce((Y,Z)=>Y+Z.amount,0),[C,z]=N.split("-").map(Number),P=z===1?`${C-1}-12`:`${C}-${String(z-1).padStart(2,"0")}`,J=t.incomes.filter(Y=>Y.status==="received"&&Y.actualDate&&Be(Y.actualDate,P,v)).reduce((Y,Z)=>Y+Z.amount,0),q=t.expenses.filter(Y=>Be(Y.date,P,v)).reduce((Y,Z)=>Y+Z.amount,0),de=J>0?(k-J)/J*100:0,Me=q>0?(F-q)/q*100:0,xe=t.installments.filter(Y=>Y.status==="active"),ie=xe.reduce((Y,Z)=>Y+(Z.totalAmount-Z.paidAmount),0),oe=t.goals.filter(Y=>Y.status==="active"),Pe=oe.length>0?oe.reduce((Y,Z)=>Y+Z.currentAmount/Z.targetAmount*100,0)/oe.length:0,Ee={};u.forEach(Y=>{Ee[Y.categoryId]=(Ee[Y.categoryId]||0)+Y.amount});let et="",Te=0;Object.entries(Ee).forEach(([Y,Z])=>{Z>Te&&(et=Y,Te=Z)});const _e=t.categories.find(Y=>Y.id===et),tt=t.alerts.filter(Y=>!Y.dismissed),ct=tt.filter(Y=>Y.severity==="critical"),st=k-F,dt=k>0?st/k*100:0;return{totalIncomeThisMonth:k,totalExpensesThisMonth:F,netBalanceThisMonth:st,savingsRateThisMonth:dt,incomeVsLastMonth:de,expensesVsLastMonth:Me,totalActiveInstallments:xe.length,totalInstallmentDebt:ie,totalGoalsProgress:Pe,topSpendingCategory:_e?.name||"None",topSpendingAmount:Te,activeAlertsCount:tt.length,criticalAlertsCount:ct.length}},[t]),B=l.useCallback((N=at())=>{const v=t.settings.monthStartDay,j=t.expenses.filter(k=>Be(k.date,N,v));return t.categories.map(k=>{const F=j.filter(P=>P.categoryId===k.id).reduce((P,ee)=>P+ee.amount,0),C=k.monthlyBudget||0,z=C>0?F/C*100:0;return{categoryId:k.id,categoryName:k.name,categoryIcon:k.icon,categoryColor:k.color,spent:F,budget:C,percentage:z,isOverBudget:C>0&&F>C}}).sort((k,u)=>u.spent-k.spent)},[t.categories,t.expenses,t.settings.monthStartDay]),V=l.useCallback((N,v)=>{const j=new Date(N),k=new Date(v),u=[],F=new Date(j);for(;F<=k;){const C=F.toISOString().split("T")[0],z=t.expenses.filter(P=>P.date===C);u.push({date:C,amount:z.reduce((P,ee)=>P+ee.amount,0),transactions:z.length}),F.setDate(F.getDate()+1)}return u},[t.expenses]),re=l.useCallback((N=10)=>{const v=[];return t.incomes.filter(j=>j.status==="received"&&j.actualDate).forEach(j=>{v.push({id:j.id,type:"income",title:j.title,amount:j.amount,date:j.actualDate})}),t.expenses.forEach(j=>{const k=t.categories.find(u=>u.id===j.categoryId);v.push({id:j.id,type:"expense",title:j.title,amount:j.amount,date:j.date,category:k?.name,categoryIcon:k?.icon,categoryColor:k?.color})}),v.sort((j,k)=>new Date(k.date).getTime()-new Date(j.date).getTime()).slice(0,N)},[t.incomes,t.expenses,t.categories]),ue=l.useCallback((N,v,j,k)=>{const u=t.categories.find(F=>F.id===v);return d({title:j||u?.name||"Expense",amount:N,currency:t.settings.defaultCurrency,categoryId:v,type:"variable",paymentMethod:"cash",date:new Date().toISOString().split("T")[0],isRecurring:!1,tags:[],notes:k})},[d,t.categories,t.settings.defaultCurrency]),be=l.useCallback((N,v)=>{const j=v||t.settings.defaultCurrency;return`${new Intl.NumberFormat("en-US",{minimumFractionDigits:t.settings.showCents?2:0,maximumFractionDigits:t.settings.showCents?2:0}).format(N)} ${j}`},[t.settings.defaultCurrency,t.settings.showCents]),ce=l.useCallback(()=>({...t,exportedAt:new Date().toISOString(),version:"1.0.0"}),[t]),he=l.useCallback(N=>{if(!N.incomes||!N.expenses||!N.categories)throw new Error("Invalid data structure");s({incomes:N.incomes||[],expenses:N.expenses||[],categories:N.categories||t.categories,installments:N.installments||[],budgets:N.budgets||[],goals:N.goals||[],alerts:N.alerts||[],settings:N.settings||t.settings,exportedAt:new Date().toISOString(),version:N.version||"1.0.0"})},[t.categories,t.settings]),ye=l.useCallback(()=>{const N=Je();s(N),localStorage.removeItem(ht)},[]);return{incomes:t.incomes,expenses:t.expenses,categories:t.categories,installments:t.installments,budgets:t.budgets,goals:t.goals,alerts:t.alerts.filter(N=>!N.dismissed),settings:t.settings,addIncome:a,updateIncome:g,deleteIncome:i,getIncomeById:f,addExpense:d,updateExpense:p,deleteExpense:o,getExpenseById:y,quickAddExpense:ue,addCategory:b,updateCategory:M,deleteCategory:c,getCategoryById:h,addInstallment:m,updateInstallment:r,deleteInstallment:x,addInstallmentPayment:S,addGoal:E,updateGoal:A,deleteGoal:T,addGoalContribution:G,getOrCreateBudget:W,updateBudget:_,addAlert:Q,dismissAlert:X,clearExpiredAlerts:D,updateSettings:I,getMonthlyStats:w,getCategorySpending:B,getDailySpending:V,getRecentTransactions:re,exportData:ce,importData:he,resetData:ye,formatCurrency:be,getCurrentMonth:at}},Us=({stats:t,formatCurrency:s})=>{const n=l.useMemo(()=>[{title:"Total Income",value:t.totalIncomeThisMonth,change:t.incomeVsLastMonth,icon:Re,color:"text-green-500",bgColor:"bg-green-500/10",trend:t.incomeVsLastMonth>=0?"up":"down"},{title:"Total Expenses",value:t.totalExpensesThisMonth,change:t.expensesVsLastMonth,icon:lt,color:"text-red-500",bgColor:"bg-red-500/10",trend:t.expensesVsLastMonth<=0?"up":"down"},{title:"Balance",value:t.netBalanceThisMonth,icon:Ye,color:t.netBalanceThisMonth>=0?"text-primary":"text-red-500",bgColor:t.netBalanceThisMonth>=0?"bg-primary/10":"bg-red-500/10",isBalance:!0},{title:"Savings Rate",value:t.savingsRateThisMonth,icon:fs,color:t.savingsRateThisMonth>=20?"text-green-500":t.savingsRateThisMonth>=0?"text-yellow-500":"text-red-500",bgColor:t.savingsRateThisMonth>=20?"bg-green-500/10":t.savingsRateThisMonth>=0?"bg-yellow-500/10":"bg-red-500/10",isPercentage:!0}],[t]);return e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:n.map(a=>e.jsx(K,{className:"overflow-hidden",children:e.jsx(H,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:a.title}),e.jsxs("p",{className:R("text-lg sm:text-2xl font-bold mt-1 truncate",a.isBalance&&a.value<0&&"text-red-500"),children:[a.isPercentage?`${a.value.toFixed(1)}%`:s(Math.abs(a.value)),a.isBalance&&a.value<0&&e.jsx("span",{className:"text-xs ml-1",children:"-"})]}),a.change!==void 0&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[a.change>=0?e.jsx(pe,{className:R("h-3 w-3",a.trend==="up"?"text-green-500":"text-red-500")}):e.jsx(Qe,{className:R("h-3 w-3",a.trend==="up"?"text-green-500":"text-red-500")}),e.jsxs("span",{className:R("text-xs",a.trend==="up"?"text-green-500":"text-red-500"),children:[Math.abs(a.change).toFixed(1),"%"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"vs last month"})]})]}),e.jsx("div",{className:R("p-2 rounded-lg shrink-0",a.bgColor),children:e.jsx(a.icon,{className:R("h-4 w-4 sm:h-5 sm:w-5",a.color)})})]})})},a.title))})},_s=({isOpen:t,onClose:s,categories:n,onAdd:a})=>{const[g,i]=l.useState(""),[f,d]=l.useState(null),p=()=>{if(!g||!f)return;const c=parseFloat(g);isNaN(c)||c<=0||(a(c,f),i(""),d(null),s())},o=c=>{if(!(c==="."&&g.includes("."))){if(c==="."&&g===""){i("0.");return}i(h=>h+c)}},y=()=>{i(c=>c.slice(0,-1))},b=()=>{i("")};if(!t)return null;const M=[...n].sort((c,h)=>c.order-h.order).slice(0,12);return e.jsx("div",{className:"fixed inset-0 z-50 bg-background/95 backdrop-blur-sm animate-in fade-in-0",children:e.jsxs("div",{className:"flex flex-col h-full max-w-lg mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-muted transition-colors",children:e.jsx(Xe,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-lg font-semibold",children:"Quick Add Expense"}),e.jsx("button",{onClick:p,disabled:!g||!f,className:R("p-2 rounded-full transition-colors",g&&f?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.jsx(qe,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:[e.jsx("p",{className:"text-muted-foreground text-sm mb-2",children:"Amount"}),e.jsxs("div",{className:"text-5xl sm:text-6xl font-bold text-center min-h-[72px]",children:[g||"0",e.jsx("span",{className:"text-2xl text-muted-foreground ml-2",children:"EGP"})]})]}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Category"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:M.map(c=>e.jsxs("button",{onClick:()=>d(c.id),className:R("flex flex-col items-center gap-1 p-3 rounded-xl transition-all",f===c.id?"bg-primary text-primary-foreground scale-105":"bg-muted hover:bg-muted/80"),children:[e.jsx("span",{className:"text-2xl",children:c.icon}),e.jsx("span",{className:"text-xs truncate max-w-full",children:c.nameAr||c.name})]},c.id))})]}),e.jsxs("div",{className:"p-4 bg-muted/30 border-t",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 max-w-xs mx-auto",children:["1","2","3","4","5","6","7","8","9",".","0","âŒ«"].map(c=>e.jsx("button",{onClick:()=>{c==="âŒ«"?y():o(c)},className:R("h-14 rounded-xl text-xl font-medium transition-all active:scale-95",c==="âŒ«"?"bg-red-500/10 text-red-500 hover:bg-red-500/20":"bg-background hover:bg-muted"),children:c},c))}),g&&e.jsx("button",{onClick:b,className:"w-full mt-3 py-2 text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Clear"})]})]})})},Js=({isOpen:t,onClose:s,categories:n,onSave:a,defaultCurrency:g,editingExpense:i})=>{const[f,d]=l.useState(i?.title||""),[p,o]=l.useState(i?.amount?.toString()||""),[y,b]=l.useState(i?.categoryId||n[0]?.id||""),[M,c]=l.useState(i?.type||"variable"),[h,m]=l.useState(i?.paymentMethod||"cash"),[r,x]=l.useState(i?.date||new Date().toISOString().split("T")[0]),[S,E]=l.useState(i?.notes||""),[A,T]=l.useState(i?.isRecurring||!1),[G,W]=l.useState(i?.recurringFrequency||"monthly"),_=()=>{if(!p||!y)return;const D=parseFloat(p);if(isNaN(D)||D<=0)return;const I=n.find(w=>w.id===y);a({title:f||I?.name||"Expense",amount:D,currency:g,categoryId:y,type:M,paymentMethod:h,date:r,isRecurring:A,recurringFrequency:A?G:void 0,tags:[],notes:S||void 0}),d(""),o(""),b(n[0]?.id||""),c("variable"),m("cash"),x(new Date().toISOString().split("T")[0]),E(""),T(!1),W("monthly"),s()},Q=[{value:"fixed",label:"Fixed"},{value:"variable",label:"Variable"},{value:"emergency",label:"Emergency"}],X=[{value:"cash",label:"Cash",icon:"ðŸ’µ"},{value:"card",label:"Card",icon:"ðŸ’³"},{value:"bank-transfer",label:"Bank",icon:"ðŸ¦"},{value:"mobile-wallet",label:"Mobile",icon:"ðŸ“±"},{value:"other",label:"Other",icon:"ðŸ“¦"}];return e.jsx($t,{isOpen:t,onClose:s,title:i?"Edit Expense":"Add Expense",footer:e.jsxs(e.Fragment,{children:[e.jsx($,{variant:"outline",onClick:s,children:"Cancel"}),e.jsx($,{onClick:_,disabled:!p||!y,children:i?"Save Changes":"Add Expense"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(ze,{label:"Amount *",type:"number",value:p,onChange:D=>o(D.target.value),placeholder:"0",min:"0",step:"0.01"}),e.jsx(ze,{label:"Description",value:f,onChange:D=>d(D.target.value),placeholder:"What was this expense for?"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category *"}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2 max-h-48 overflow-y-auto",children:n.map(D=>e.jsxs("button",{type:"button",onClick:()=>b(D.id),className:`flex flex-col items-center gap-1 p-2 rounded-lg border transition-all ${y===D.id?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:[e.jsx("span",{className:"text-xl",children:D.icon}),e.jsx("span",{className:"text-xs truncate max-w-full text-center",children:D.nameAr||D.name})]},D.id))})]}),e.jsx(ze,{label:"Date",type:"date",value:r,onChange:D=>x(D.target.value)}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type"}),e.jsx("div",{className:"flex gap-2",children:Q.map(D=>e.jsx("button",{type:"button",onClick:()=>c(D.value),className:`flex-1 py-2 px-3 rounded-lg border text-sm transition-all ${M===D.value?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50"}`,children:D.label},D.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payment Method"}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:X.map(D=>e.jsxs("button",{type:"button",onClick:()=>m(D.value),className:`flex items-center gap-1.5 py-2 px-3 rounded-lg border text-sm whitespace-nowrap transition-all ${h===D.value?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:[e.jsx("span",{children:D.icon}),e.jsx("span",{children:D.label})]},D.value))})]}),e.jsx(Ue,{label:"Notes",value:S,onChange:D=>E(D.target.value),placeholder:"Any additional notes...",rows:2}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Recurring Expense"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Repeat this expense automatically"})]}),e.jsx("button",{type:"button",onClick:()=>T(!A),className:`relative w-11 h-6 rounded-full transition-colors ${A?"bg-primary":"bg-muted"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 rounded-full bg-white shadow transition-transform ${A?"translate-x-5":""}`})})]}),A&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Repeat Every"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"bi-weekly",label:"Bi-Weekly"},{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"yearly",label:"Yearly"}].map(D=>e.jsx("button",{type:"button",onClick:()=>W(D.value),className:`py-1.5 px-3 rounded-lg border text-sm transition-all ${G===D.value?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50"}`,children:D.label},D.value))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"A new expense will be created automatically on schedule"})]})]})})},Ks=({isOpen:t,onClose:s,onSave:n,defaultCurrency:a,editingIncome:g})=>{const[i,f]=l.useState(g?.title||""),[d,p]=l.useState(g?.amount?.toString()||""),[o,y]=l.useState(g?.type||"salary"),[b,M]=l.useState(g?.status||"received"),[c,h]=l.useState(g?.frequency||"monthly"),[m,r]=l.useState(g?.actualDate||new Date().toISOString().split("T")[0]),[x,S]=l.useState(g?.expectedDate||""),[E,A]=l.useState(g?.notes||""),[T,G]=l.useState(g?.isRecurring||!1),W=()=>{if(!i||!d)return;const D=parseFloat(d);isNaN(D)||D<=0||(n({title:i,amount:D,currency:a,type:o,status:b,frequency:c,actualDate:b==="received"?m:void 0,expectedDate:b!=="received"?x:void 0,isRecurring:T,tags:[],notes:E||void 0}),f(""),p(""),y("salary"),M("received"),h("monthly"),r(new Date().toISOString().split("T")[0]),S(""),A(""),G(!1),s())},_=[{value:"salary",label:"Salary",icon:"ðŸ’¼"},{value:"freelance",label:"Freelance",icon:"ðŸ’»"},{value:"commission",label:"Commission",icon:"ðŸ“Š"},{value:"bonus",label:"Bonus",icon:"ðŸŽ"},{value:"investment",label:"Investment",icon:"ðŸ“ˆ"},{value:"gift",label:"Gift",icon:"ðŸŽ€"},{value:"refund",label:"Refund",icon:"â†©ï¸"},{value:"other",label:"Other",icon:"ðŸ“¦"}],Q=[{value:"received",label:"Received",color:"text-green-500"},{value:"pending",label:"Pending",color:"text-yellow-500"},{value:"expected",label:"Expected",color:"text-blue-500"}],X=[{value:"one-time",label:"One Time"},{value:"weekly",label:"Weekly"},{value:"bi-weekly",label:"Bi-Weekly"},{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"yearly",label:"Yearly"}];return e.jsx($t,{isOpen:t,onClose:s,title:g?"Edit Income":"Add Income",footer:e.jsxs(e.Fragment,{children:[e.jsx($,{variant:"outline",onClick:s,children:"Cancel"}),e.jsx($,{onClick:W,disabled:!i||!d,children:g?"Save Changes":"Add Income"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(ze,{label:"Title *",value:i,onChange:D=>f(D.target.value),placeholder:"e.g., Monthly Salary, Freelance Project"}),e.jsx(ze,{label:"Amount *",type:"number",value:d,onChange:D=>p(D.target.value),placeholder:"0",min:"0",step:"0.01"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:_.map(D=>e.jsxs("button",{type:"button",onClick:()=>y(D.value),className:`flex flex-col items-center gap-1 p-2 rounded-lg border transition-all ${o===D.value?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:[e.jsx("span",{className:"text-xl",children:D.icon}),e.jsx("span",{className:"text-xs",children:D.label})]},D.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),e.jsx("div",{className:"flex gap-2",children:Q.map(D=>e.jsx("button",{type:"button",onClick:()=>M(D.value),className:`flex-1 py-2 px-3 rounded-lg border text-sm transition-all ${b===D.value?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:e.jsx("span",{className:b===D.value?D.color:"",children:D.label})},D.value))})]}),b==="received"?e.jsx(ze,{label:"Date Received",type:"date",value:m,onChange:D=>r(D.target.value)}):e.jsx(ze,{label:"Expected Date",type:"date",value:x,onChange:D=>S(D.target.value)}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Frequency"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:X.map(D=>e.jsx("button",{type:"button",onClick:()=>h(D.value),className:`py-1.5 px-3 rounded-lg border text-sm transition-all ${c===D.value?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50"}`,children:D.label},D.value))})]}),e.jsx(Ue,{label:"Notes",value:E,onChange:D=>A(D.target.value),placeholder:"Any additional notes...",rows:2}),c!=="one-time"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Recurring Income"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically add this income on schedule"})]}),e.jsx("button",{type:"button",onClick:()=>G(!T),className:`relative w-11 h-6 rounded-full transition-colors ${T?"bg-primary":"bg-muted"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 rounded-full bg-white shadow transition-transform ${T?"translate-x-5":""}`})})]}),T&&e.jsxs("p",{className:"text-xs text-primary bg-primary/10 p-2 rounded-lg",children:["âœ¨ A new income entry will be created automatically every"," ",c==="weekly"?"week":c==="bi-weekly"?"2 weeks":c==="monthly"?"month":c==="quarterly"?"3 months":"year"]})]})]})})},Ie=es,Hs=ts,Jt=l.forwardRef(({className:t,...s},n)=>e.jsx(Ft,{ref:n,className:R("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));Jt.displayName=Ft.displayName;const fe=l.forwardRef(({className:t,children:s,...n},a)=>e.jsxs(Hs,{children:[e.jsx(Jt,{}),e.jsxs(Mt,{ref:a,className:R("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[s,e.jsxs(ss,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Xe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));fe.displayName=Mt.displayName;const je=({className:t,...s})=>e.jsx("div",{className:R("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});je.displayName="DialogHeader";const it=({className:t,...s})=>e.jsx("div",{className:R("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});it.displayName="DialogFooter";const Ne=l.forwardRef(({className:t,...s},n)=>e.jsx(Et,{ref:n,className:R("text-lg font-semibold leading-none tracking-tight",t),...s}));Ne.displayName=Et.displayName;const ot=l.forwardRef(({className:t,...s},n)=>e.jsx(Tt,{ref:n,className:R("text-sm text-muted-foreground",t),...s}));ot.displayName=Tt.displayName;const St=({transactions:t,formatCurrency:s,compact:n=!1,onDeleteIncome:a,onDeleteExpense:g,onEditIncome:i,onEditExpense:f})=>{const[d,p]=l.useState(null);if(t.length===0)return e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{children:"No transactions yet"}),e.jsx("p",{className:"text-sm",children:"Add your first income or expense to get started"})]});const o={};t.forEach(b=>{const M=b.date;o[M]||(o[M]=[]),o[M].push(b)});const y=b=>{const M=new Date(b),c=new Date,h=new Date(c);return h.setDate(h.getDate()-1),M.toDateString()===c.toDateString()?"Today":M.toDateString()===h.toDateString()?"Yesterday":M.toLocaleDateString("en-US",{weekday:n?void 0:"short",month:"short",day:"numeric"})};return n?e.jsx("div",{className:"space-y-2",children:t.map(b=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:R("w-10 h-10 rounded-full flex items-center justify-center text-lg shrink-0",b.type==="income"?"bg-green-500/10":"bg-muted"),style:{backgroundColor:b.type==="expense"&&b.categoryColor?`${b.categoryColor}20`:void 0},children:b.type==="income"?e.jsx(Re,{className:"h-5 w-5 text-green-500"}):b.categoryIcon||"ðŸ“¦"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:b.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[y(b.date),b.category&&` â€¢ ${b.category}`]})]}),e.jsxs("p",{className:R("text-sm font-semibold tabular-nums",b.type==="income"?"text-green-500":"text-foreground"),children:[b.type==="income"?"+":"-",s(b.amount)]})]},b.id))}):e.jsxs("div",{className:"space-y-4",children:[Object.entries(o).map(([b,M])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:y(b)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[M.length," transaction",M.length>1?"s":""]})]}),e.jsx("div",{className:"space-y-2",children:M.map(c=>e.jsxs("div",{className:"group flex items-center gap-3 p-3 rounded-xl bg-muted/30 hover:bg-muted/50 transition-colors cursor-pointer",children:[e.jsx("div",{className:R("w-12 h-12 rounded-xl flex items-center justify-center text-xl shrink-0",c.type==="income"?"bg-green-500/10":"bg-muted"),style:{backgroundColor:c.type==="expense"&&c.categoryColor?`${c.categoryColor}15`:void 0},children:c.type==="income"?e.jsx(Re,{className:"h-6 w-6 text-green-500"}):c.categoryIcon||"ðŸ“¦"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:c.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.category||(c.type==="income"?"Income":"Expense")})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:R("font-semibold tabular-nums",c.type==="income"?"text-green-500":"text-foreground"),children:[c.type==="income"?"+":"-",s(c.amount)]})}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(c.type==="income"&&i||c.type==="expense"&&f)&&e.jsx($,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:h=>{h.stopPropagation(),c.type==="income"&&i?i(c.id):c.type==="expense"&&f&&f(c.id)},children:e.jsx(pt,{className:"h-4 w-4"})}),(c.type==="income"&&a||c.type==="expense"&&g)&&e.jsx($,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-red-500 hover:text-red-600 hover:bg-red-500/10",onClick:h=>{h.stopPropagation(),p(c)},children:e.jsx(me,{className:"h-4 w-4"})})]})]},c.id))})]},b)),e.jsx(Ie,{open:!!d,onOpenChange:()=>p(null),children:e.jsxs(fe,{className:"sm:max-w-md text-foreground",children:[e.jsxs(je,{children:[e.jsxs(Ne,{className:"text-red-500 flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5"}),"Ø­Ø°Ù"," ",d?.type==="income"?"Ø§Ù„Ø¯Ø®Ù„":"Ø§Ù„Ù…ØµØ±ÙˆÙ"]}),e.jsx(ot,{children:"Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©ØŸ"})]}),d&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:R("w-10 h-10 rounded-full flex items-center justify-center text-lg",d.type==="income"?"bg-green-500/10":"bg-muted"),children:d.type==="income"?e.jsx(Re,{className:"h-5 w-5 text-green-500"}):d.categoryIcon||"ðŸ“¦"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.title}),e.jsxs("p",{className:R("text-sm font-semibold",d.type==="income"?"text-green-500":"text-foreground"),children:[d.type==="income"?"+":"-",s(d.amount)]})]})]})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"âš ï¸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹. Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{variant:"destructive",className:"flex-1",onClick:()=>{d&&(d.type==="income"&&a?a(d.id):d.type==="expense"&&g&&g(d.id),p(null))},children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Ù†Ø¹Ù…ØŒ Ø§Ø­Ø°Ù"]}),e.jsx($,{variant:"outline",onClick:()=>p(null),children:"Ø¥Ù„ØºØ§Ø¡"})]})]})]})})]})},Qs=({categorySpending:t,formatCurrency:s,limit:n=6})=>{const a=t.filter(i=>i.spent>0).slice(0,n),g=t.reduce((i,f)=>i+f.spent,0);return a.length===0?e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx("p",{children:"No expenses this month"}),e.jsx("p",{className:"text-sm",children:"Start tracking your spending"})]}):e.jsxs("div",{className:"space-y-3",children:[a.map(i=>{const f=g>0?i.spent/g*100:0;return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:i.categoryIcon}),e.jsx("span",{className:"text-sm font-medium truncate max-w-[120px] sm:max-w-none",children:i.categoryName})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm font-semibold tabular-nums",children:s(i.spent)}),e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:[f.toFixed(0),"%"]})]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${Math.min(f,100)}%`,backgroundColor:i.categoryColor}})})]},i.categoryId)}),t.filter(i=>i.spent>0).length>n&&e.jsxs("p",{className:"text-xs text-muted-foreground text-center pt-2",children:["+",t.filter(i=>i.spent>0).length-n," ","more categories"]})]})},L=l.forwardRef(({className:t,...s},n)=>e.jsx(Ot,{ref:n,className:R("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...s}));L.displayName=Ot.displayName;function Xs({isOpen:t,onClose:s,goal:n,formatCurrency:a,onContribute:g}){const[i,f]=l.useState("deposit"),[d,p]=l.useState(""),[o,y]=l.useState(""),[b,M]=l.useState(!1),[c,h]=l.useState(null),m=parseFloat(d)||0,r=i==="withdraw"?-m:m,x=n.currentAmount+r,S=n.currentAmount/n.targetAmount*100,E=x/n.targetAmount*100,A=E-S,T=n.targetAmount-x,G=i==="withdraw"?m<=n.currentAmount:!0,W=l.useMemo(()=>[...n.contributions].sort((w,B)=>new Date(B.date).getTime()-new Date(w.date).getTime()),[n.contributions]),_=()=>{!m||m<=0||G&&(i==="deposit"?x>=n.targetAmount?h({type:"success",message:"ðŸŽ‰ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! ÙˆØµÙ„Øª Ù„Ù‡Ø¯ÙÙƒ!",details:`Ø£Ø¶ÙØª ${a(m)} ÙˆÙˆØµÙ„Øª Ù„Ù„Ù‡Ø¯Ù ${a(n.targetAmount)}!`}):h({type:"success",message:`ðŸŽ¯ Ø£Ø­Ø³Ù†Øª! Ø§Ù‚ØªØ±Ø¨Øª ${A.toFixed(1)}% Ù…Ù† Ù‡Ø¯ÙÙƒ`,details:`Ø¨Ø§Ù‚ÙŠ ${a(T)} ÙÙ‚Ø· Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù‡Ø¯ÙÙƒ`}):h({type:"warning",message:`âš ï¸ Ø§Ø¨ØªØ¹Ø¯Øª ${Math.abs(A).toFixed(1)}% Ø¹Ù† Ù‡Ø¯ÙÙƒ`,details:`Ø§Ù„Ø¢Ù† Ø¨Ø§Ù‚ÙŠ ${a(T)} Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù‡Ø¯ÙÙƒ`}),g(n.id,r,o||void 0))},Q=()=>{p(""),y(""),h(null),M(!1),f("deposit"),s()},X=w=>new Date(w).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}),I=n.milestones.map(w=>({...w,wouldBeReached:x>=w.targetAmount,isNewlyReached:!w.reached&&x>=w.targetAmount})).filter(w=>w.isNewlyReached);return e.jsx(Ie,{open:t,onOpenChange:Q,children:e.jsxs(fe,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx(je,{children:e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:n.icon||"ðŸŽ¯"}),n.title]})}),c&&e.jsxs("div",{onClick:()=>{h(null),p(""),y("")},className:R("p-4 rounded-lg text-center animate-pulse cursor-pointer hover:opacity-80 transition-opacity",c.type==="success"?"bg-green-500/10 border border-green-500/30":"bg-yellow-500/10 border border-yellow-500/30"),children:[e.jsx("p",{className:"font-bold text-lg text-foreground",children:c.message}),c.details&&e.jsx("p",{className:"text-sm text-foreground/70 mt-1",children:c.details}),e.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"Ø§Ø¶ØºØ· Ù„Ù„Ø¥ØºÙ„Ø§Ù‚"})]}),!c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg space-y-3 text-foreground",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx("span",{className:"font-bold text-lg",children:a(n.currentAmount)})]}),e.jsx("div",{className:"h-3 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${Math.min(S,100)}%`,backgroundColor:n.color||"var(--primary)"}})}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[S.toFixed(1),"% Ù…ÙƒØªÙ…Ù„"]}),e.jsxs("span",{children:["Ø§Ù„Ù‡Ø¯Ù: ",a(n.targetAmount)]})]})]}),n.milestones.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(L,{className:"text-sm flex items-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4 text-yellow-500"}),"Ø§Ù„Ù…Ø±Ø§Ø­Ù„ (Ù†Ù‚Ø§Ø· Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²)"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.milestones.map(w=>{const B=x>=w.targetAmount,V=!w.reached&&m>0&&B;return e.jsxs("div",{className:R("p-2 rounded-lg border text-xs",w.reached?"bg-green-500/10 border-green-500/30":V?"bg-yellow-500/10 border-yellow-500/30 animate-pulse":"bg-muted/30 border-border"),children:[e.jsxs("div",{className:"flex items-center gap-1",children:[w.reached?e.jsx(js,{className:"h-3 w-3 text-green-500"}):V?e.jsx(bt,{className:"h-3 w-3 text-yellow-500"}):e.jsx(ke,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"font-medium truncate",children:w.title})]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:a(w.targetAmount)})]},w.id)})})]}),e.jsxs("div",{className:"flex gap-2 p-1 bg-muted rounded-lg",children:[e.jsxs($,{variant:i==="deposit"?"default":"ghost",className:R("flex-1",i==="deposit"&&"bg-green-600 hover:bg-green-700"),onClick:()=>f("deposit"),children:[e.jsx(mt,{className:"h-4 w-4 mr-2"}),"Ø¥ÙŠØ¯Ø§Ø¹"]}),e.jsxs($,{variant:i==="withdraw"?"default":"ghost",className:R("flex-1",i==="withdraw"&&"bg-orange-600 hover:bg-orange-700"),onClick:()=>f("withdraw"),children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Ø³Ø­Ø¨"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx(ae,{type:"number",min:"0",step:"1",value:d,onChange:w=>p(w.target.value),placeholder:i==="deposit"?"Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹":"Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº Ø§Ù„Ø³Ø­Ø¨",className:R(!G&&"border-red-500 focus-visible:ring-red-500")}),!G&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx($e,{className:"h-3 w-3"}),"Ø§Ù„Ù…Ø¨Ù„Øº Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­ (",a(n.currentAmount),")"]})]}),m>0&&G&&e.jsxs("div",{className:R("p-3 rounded-lg border",i==="deposit"?"bg-green-500/5 border-green-500/30":"bg-orange-500/5 border-orange-500/30"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i==="deposit"?e.jsx(pe,{className:"h-4 w-4 text-green-500"}):e.jsx(Qe,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-sm",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯"})]}),e.jsx("span",{className:"font-bold",children:a(x)})]}),e.jsxs("div",{className:"mt-2 text-xs text-muted-foreground flex items-center gap-2",children:[e.jsxs("span",{children:[S.toFixed(1),"%"]}),e.jsx("span",{children:"â†’"}),e.jsxs("span",{className:R("font-medium",i==="deposit"?"text-green-500":"text-orange-500"),children:[E.toFixed(1),"%"]}),e.jsxs("span",{className:R(i==="deposit"?"text-green-500":"text-orange-500"),children:["(",A>0?"+":"",A.toFixed(1),"%)"]})]}),I.length>0&&i==="deposit"&&e.jsxs("div",{className:"mt-2 text-xs text-yellow-500 flex items-center gap-1",children:[e.jsx(bt,{className:"h-3 w-3"}),"Ø³ØªØµÙ„ Ù„Ù…Ø±Ø­Ù„Ø©:"," ",I.map(w=>w.title).join("ØŒ ")]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx(Ue,{value:o,onChange:w=>y(w.target.value),placeholder:"Ù…Ø«Ø§Ù„: Ø±Ø§ØªØ¨ Ø´Ù‡Ø± ÙŠÙ†Ø§ÙŠØ±",rows:2})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{className:R("flex-1",i==="deposit"?"bg-green-600 hover:bg-green-700":"bg-orange-600 hover:bg-orange-700"),onClick:_,disabled:!m||!G,children:i==="deposit"?e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-4 w-4 mr-2"}),"Ø¥ÙŠØ¯Ø§Ø¹"," ",m>0&&a(m)]}):e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Ø³Ø­Ø¨"," ",m>0&&a(m)]})}),e.jsx($,{variant:"outline",onClick:Q,children:"Ø¥Ù„ØºØ§Ø¡"})]}),e.jsxs($,{variant:"ghost",className:"w-full text-muted-foreground",onClick:()=>M(!b),children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),b?"Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø³Ø¬Ù„":"Ø¹Ø±Ø¶ Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª",n.contributions.length>0&&e.jsx("span",{className:"ml-2 bg-muted px-2 py-0.5 rounded text-xs",children:n.contributions.length})]}),b&&e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:W.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø³Ø§Ø¨Ù‚Ø©"}):W.map(w=>e.jsxs("div",{className:R("flex items-center justify-between p-3 rounded-lg border",w.amount>=0?"bg-green-500/5 border-green-500/20":"bg-orange-500/5 border-orange-500/20"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[w.amount>=0?e.jsx(mt,{className:"h-4 w-4 text-green-500"}):e.jsx(ut,{className:"h-4 w-4 text-orange-500"}),e.jsxs("div",{children:[e.jsxs("p",{className:R("font-medium text-sm",w.amount>=0?"text-green-600":"text-orange-600"),children:[w.amount>=0?"+":"",a(w.amount)]}),w.notes&&e.jsx("p",{className:"text-xs text-muted-foreground",children:w.notes})]})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:X(w.date)})]},w.id))})]})]})})}const Zs=({goals:t,formatCurrency:s,onEdit:n,onDelete:a,onContribute:g})=>{const[i,f]=l.useState(null),[d,p]=l.useState(null),o=t.filter(m=>m.status==="active"),y=t.filter(m=>m.status==="completed"),b=(m,r,x)=>{g&&g(m,r,x)},M=m=>{switch(m){case"emergency-fund":return"ðŸ›¡ï¸";case"savings":return"ðŸ’°";case"investment":return"ðŸ“ˆ";case"purchase":return"ðŸ›’";case"travel":return"âœˆï¸";case"education":return"ðŸŽ“";default:return"ðŸŽ¯"}},c=m=>{switch(m){case"critical":return"text-red-500 bg-red-500/10";case"high":return"text-orange-500 bg-orange-500/10";case"medium":return"text-yellow-500 bg-yellow-500/10";default:return"text-blue-500 bg-blue-500/10"}},h=m=>{if(!m)return null;const r=new Date,S=new Date(m).getTime()-r.getTime(),E=Math.ceil(S/(1e3*60*60*24));return E<0?"Overdue":E===0?"Today":E===1?"Tomorrow":E<7?`${E} days`:E<30?`${Math.ceil(E/7)} weeks`:E<365?`${Math.ceil(E/30)} months`:`${Math.ceil(E/365)} years`};return e.jsxs("div",{className:"space-y-4",children:[t.length===0&&e.jsx(K,{children:e.jsxs(H,{className:"py-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(ke,{className:"h-8 w-8 text-primary"})}),e.jsx("h4",{className:"font-semibold mb-2",children:"No Goals Yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set financial goals to track your progress towards saving for what matters"})]})}),o.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(m=>{const r=m.currentAmount/m.targetAmount*100,x=h(m.deadline);return e.jsx(K,{className:"overflow-hidden",children:e.jsxs(H,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl shrink-0",style:{backgroundColor:m.color?`${m.color}20`:"var(--primary-10)"},children:m.icon||M(m.category)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("h4",{className:"font-semibold truncate",children:m.title}),e.jsx("span",{className:R("text-xs px-1.5 py-0.5 rounded",c(m.priority)),children:m.priority})]}),m.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:m.description})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-semibold text-primary tabular-nums",children:s(m.currentAmount)}),e.jsx("span",{className:"text-muted-foreground tabular-nums",children:s(m.targetAmount)})]}),e.jsx("div",{className:"h-3 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${Math.min(r,100)}%`,backgroundColor:m.color||"var(--primary)"}})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[r.toFixed(0),"% complete"]}),x&&e.jsxs("span",{children:[x," remaining"]})]})]}),m.monthlyContribution>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(pe,{className:"h-3 w-3 inline mr-1"}),"Contributing"," ",s(m.monthlyContribution),"/month"]})}),m.milestones.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-border",children:[e.jsxs("p",{className:"text-xs text-muted-foreground mb-2 flex items-center gap-1",children:[e.jsx(Le,{className:"h-3 w-3"}),"Ø§Ù„Ù…Ø±Ø§Ø­Ù„ (",m.milestones.filter(S=>S.reached).length,"/",m.milestones.length,")"]}),e.jsx("div",{className:"flex gap-1",children:m.milestones.map(S=>e.jsx("div",{className:R("flex-1 h-2 rounded-full transition-colors",S.reached?"bg-green-500":"bg-muted"),title:`${S.title}: ${s(S.targetAmount)}`},S.id))})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-border flex gap-2",children:[e.jsxs($,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>f(m),children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"Ø¥ÙŠØ¯Ø§Ø¹ / Ø³Ø­Ø¨"]}),n&&e.jsx($,{size:"sm",variant:"ghost",onClick:()=>n(m),children:e.jsx(pt,{className:"h-4 w-4"})}),a&&e.jsx($,{size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-600 hover:bg-red-500/10",onClick:()=>p(m),children:e.jsx(me,{className:"h-4 w-4"})})]})]})},m.id)})}),y.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-3 flex items-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4 text-yellow-500"}),"Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©"]}),e.jsx("div",{className:"space-y-2 text-foreground",children:y.map(m=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30 cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>f(m),children:[e.jsx("span",{className:"text-xl",children:m.icon||M(m.category)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:m.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s(m.targetAmount)," ØªÙ… ØªØ­Ù‚ÙŠÙ‚Ù‡"]})]}),e.jsx(Le,{className:"h-5 w-5 text-yellow-500"})]},m.id))})]}),i&&e.jsx(Xs,{isOpen:!!i,onClose:()=>f(null),goal:i,formatCurrency:s,onContribute:b}),e.jsx(Ie,{open:!!d,onOpenChange:()=>p(null),children:e.jsxs(fe,{className:"sm:max-w-md",children:[e.jsxs(je,{children:[e.jsxs(Ne,{className:"text-red-500 flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5"}),"Ø­Ø°Ù Ø§Ù„Ù‡Ø¯Ù"]}),e.jsx(ot,{children:"Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù‡Ø¯ÙØŸ"})]}),d&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:d.icon||M(d.category)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ø§Ù„Ø±ØµÙŠØ¯:"," ",s(d.currentAmount)," ","/"," ",s(d.targetAmount)]})]})]})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"âš ï¸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ù‡Ø¯Ù ÙˆØ¬Ù…ÙŠØ¹ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ ÙˆØ§Ù„Ø³Ø­Ø¨ Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡. Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{variant:"destructive",className:"flex-1",onClick:()=>{a&&d&&(a(d.id),p(null))},children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Ù†Ø¹Ù…ØŒ Ø§Ø­Ø°Ù Ø§Ù„Ù‡Ø¯Ù"]}),e.jsx($,{variant:"outline",onClick:()=>p(null),children:"Ø¥Ù„ØºØ§Ø¡"})]})]})]})})]})},ea=({installments:t,formatCurrency:s,onEdit:n,onDelete:a,onPayInstallment:g})=>{const[i,f]=l.useState(null),d=t.filter(h=>h.status==="active"),p=t.filter(h=>h.status==="completed"),o=h=>{const m=new Date,x=new Date(h).getTime()-m.getTime();return Math.ceil(x/(1e3*60*60*24))},y=(h,m)=>h==="completed"?"bg-green-500/10 text-green-500":h==="paused"?"bg-yellow-500/10 text-yellow-500":h==="overdue"||m!==void 0&&m<0?"bg-red-500/10 text-red-500":m!==void 0&&m<=3?"bg-orange-500/10 text-orange-500":"bg-primary/10 text-primary",b=h=>{const m=o(h);return m<0?`${Math.abs(m)} days overdue`:m===0?"Due today":m===1?"Due tomorrow":m<=7?`Due in ${m} days`:new Date(h).toLocaleDateString("en-US",{month:"short",day:"numeric"})},M=d.reduce((h,m)=>h+(m.totalAmount-m.paidAmount),0),c=d.reduce((h,m)=>h+m.installmentAmount,0);return e.jsxs("div",{className:"space-y-4",children:[d.length>0&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(K,{children:e.jsxs(H,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Total Remaining"}),e.jsx("p",{className:"text-xl font-bold text-foreground tabular-nums",children:s(M)})]})}),e.jsx(K,{children:e.jsxs(H,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Monthly Payments"}),e.jsx("p",{className:"text-xl font-bold text-orange-500 tabular-nums",children:s(c)})]})})]}),t.length===0&&e.jsx(K,{children:e.jsxs(H,{className:"py-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(He,{className:"h-8 w-8 text-primary"})}),e.jsx("h4",{className:"font-semibold mb-2",children:"No Installments"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track your installments, loans, and recurring payments"})]})}),d.length>0&&e.jsx("div",{className:"space-y-3",children:d.map(h=>{const m=h.paidInstallments/h.totalInstallments*100,r=h.totalInstallments-h.paidInstallments,x=o(h.nextPaymentDate),S=x<=3;return e.jsx(K,{className:R("overflow-hidden transition-all",S&&x>=0&&"border-orange-500/50",x<0&&"border-red-500/50"),children:e.jsxs(H,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold truncate",children:h.title}),x<0&&e.jsx($e,{className:"h-4 w-4 text-red-500 shrink-0"})]}),h.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:h.description})]}),e.jsx(ps,{variant:"secondary",className:R("shrink-0",y(h.status,x)),children:b(h.nextPaymentDate)})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[h.paidInstallments," ","of"," ",h.totalInstallments," ","paid"]}),e.jsxs("span",{className:"font-medium",children:[m.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${m}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-muted-foreground",children:["Each:"," "]}),e.jsx("span",{className:"font-semibold tabular-nums",children:s(h.installmentAmount)})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-muted-foreground",children:["Remaining:"," "]}),e.jsx("span",{className:"font-semibold tabular-nums",children:s(h.totalAmount-h.paidAmount)})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:e.jsx("p",{className:"text-xs text-center",children:r===1?e.jsx("span",{className:"text-green-500 font-medium",children:"ðŸŽ‰ Just 1 more payment to go!"}):r<=3?e.jsxs("span",{className:"text-primary font-medium",children:["ðŸ’ª Only ",r," payments left!"]}):e.jsxs("span",{className:"text-muted-foreground",children:[r," payments remaining"]})})}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[g&&e.jsxs($,{size:"sm",variant:S?"default":"outline",className:"flex-1",onClick:()=>g(h.id),children:[e.jsx(Ye,{className:"h-4 w-4 mr-1"}),"Pay (",s(h.installmentAmount),")"]}),n&&e.jsx($,{size:"sm",variant:"ghost",onClick:()=>n(h),children:e.jsx(pt,{className:"h-4 w-4"})}),a&&e.jsx($,{size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-600 hover:bg-red-500/10",onClick:()=>f(h),children:e.jsx(me,{className:"h-4 w-4"})})]})]})},h.id)})}),p.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-3 flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4 text-green-500"}),"Completed"]}),e.jsx("div",{className:"space-y-2",children:p.slice(0,3).map(h=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center",children:e.jsx(qe,{className:"h-5 w-5 text-green-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:h.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s(h.totalAmount)," ","paid off"]})]}),a&&e.jsx($,{size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-600 hover:bg-red-500/10",onClick:()=>f(h),children:e.jsx(me,{className:"h-4 w-4"})})]},h.id))})]}),e.jsx(Ie,{open:!!i,onOpenChange:()=>f(null),children:e.jsxs(fe,{className:"sm:max-w-md",children:[e.jsxs(je,{children:[e.jsxs(Ne,{className:"text-red-500 flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5"}),"Ø­Ø°Ù Ø§Ù„Ù‚Ø³Ø·"]}),e.jsx(ot,{children:"Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ø·ØŸ"})]}),i&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(He,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.paidInstallments," /"," ",i.totalInstallments," ","Ø£Ù‚Ø³Ø§Ø· Ù…Ø¯ÙÙˆØ¹Ø©"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:"," ",s(i.totalAmount-i.paidAmount)]})]})]})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"âš ï¸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ù‚Ø³Ø· ÙˆØ¬Ù…ÙŠØ¹ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡. Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{variant:"destructive",className:"flex-1",onClick:()=>{a&&i&&(a(i.id),f(null))},children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Ù†Ø¹Ù…ØŒ Ø§Ø­Ø°Ù Ø§Ù„Ù‚Ø³Ø·"]}),e.jsx($,{variant:"outline",onClick:()=>f(null),children:"Ø¥Ù„ØºØ§Ø¡"})]})]})]})})]})},ta=({alerts:t,onDismiss:s,maxVisible:n=3})=>{const g=[...t].sort((d,p)=>{const o={critical:0,warning:1,success:2,info:3};return o[d.severity]-o[p.severity]}).slice(0,n),i=t.length-n,f=d=>{switch(d){case"critical":return{bg:"bg-red-500/10 border-red-500/30",icon:$e,iconColor:"text-red-500"};case"warning":return{bg:"bg-yellow-500/10 border-yellow-500/30",icon:$e,iconColor:"text-yellow-500"};case"success":return{bg:"bg-green-500/10 border-green-500/30",icon:Ze,iconColor:"text-green-500"};default:return{bg:"bg-blue-500/10 border-blue-500/30",icon:bs,iconColor:"text-blue-500"}}};return t.length===0?null:e.jsxs("div",{className:"space-y-2",children:[g.map(d=>{const p=f(d.severity),o=p.icon;return e.jsxs("div",{className:R("flex items-start gap-3 p-3 rounded-lg border transition-all animate-in fade-in-0 slide-in-from-top-2",p.bg),children:[e.jsx(o,{className:R("h-5 w-5 mt-0.5 shrink-0",p.iconColor)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:d.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:d.message}),d.actionable&&d.actionLabel&&e.jsxs("button",{className:"text-xs text-primary font-medium mt-2 flex items-center gap-1 hover:underline",children:[d.actionLabel,e.jsx(nt,{className:"h-3 w-3"})]})]}),!d.dismissed&&e.jsx("button",{onClick:()=>s(d.id),className:"p-1 rounded-full hover:bg-background/50 transition-colors shrink-0",children:e.jsx(Xe,{className:"h-4 w-4 text-muted-foreground"})})]},d.id)}),i>0&&e.jsxs("button",{className:"w-full text-center py-2 text-xs text-muted-foreground hover:text-foreground transition-colors",children:["+",i," more notification",i>1?"s":""]})]})};function sa({incomes:t,expenses:s,formatCurrency:n}){const a=l.useMemo(()=>{const f=new Date,d=[];for(let p=5;p>=0;p--){const o=new Date(f.getFullYear(),f.getMonth()-p,1),y=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`,b=o.toLocaleDateString("ar-EG",{month:"short"}),M=t.filter(h=>{const m=new Date(h.actualDate||h.expectedDate||h.createdAt);return m.getFullYear()===o.getFullYear()&&m.getMonth()===o.getMonth()&&h.status==="received"}).reduce((h,m)=>h+m.amount,0),c=s.filter(h=>{const m=new Date(h.date);return m.getFullYear()===o.getFullYear()&&m.getMonth()===o.getMonth()}).reduce((h,m)=>h+m.amount,0);d.push({month:y,monthLabel:b,income:M,expenses:c,savings:M-c})}return d},[t,s]),g=l.useMemo(()=>{if(a.length<2)return{type:"neutral",percentage:0};const f=a[a.length-1],d=a[a.length-2];if(d.savings===0)return{type:"neutral",percentage:0};const p=(f.savings-d.savings)/Math.abs(d.savings)*100;return{type:p>=0?"up":"down",percentage:Math.abs(p).toFixed(1)}},[a]),i=a.reduce((f,d)=>f+d.savings,0);return e.jsxs(K,{children:[e.jsxs(ne,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(le,{className:"text-base font-medium",children:"Ø§Ù„Ø¯Ø®Ù„ Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª"}),e.jsx("div",{className:"flex items-center gap-2 text-sm",children:g.type==="up"?e.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(pe,{className:"h-4 w-4"}),"+",g.percentage,"%"]}):g.type==="down"?e.jsxs("span",{className:"flex items-center gap-1 text-red-600",children:[e.jsx(Qe,{className:"h-4 w-4"}),"-",g.percentage,"%"]}):null})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙˆÙÙŠØ±: ",n(i)]})]}),e.jsx(H,{children:e.jsx("div",{className:"h-[250px] w-full",children:e.jsx(jt,{width:"100%",height:"100%",children:e.jsxs(Ps,{data:a,margin:{top:5,right:10,left:10,bottom:5},children:[e.jsx(qt,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(Wt,{dataKey:"monthLabel",tick:{fontSize:12},className:"text-muted-foreground"}),e.jsx(Vt,{tick:{fontSize:12},tickFormatter:f=>`${(f/1e3).toFixed(0)}k`,className:"text-muted-foreground"}),e.jsx(Nt,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",direction:"rtl"},formatter:(f,d)=>[n(f),d==="income"?"Ø§Ù„Ø¯Ø®Ù„":d==="expenses"?"Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª":"Ø§Ù„ØªÙˆÙÙŠØ±"],labelFormatter:f=>`Ø´Ù‡Ø± ${f}`}),e.jsx(Ut,{formatter:f=>f==="income"?"Ø§Ù„Ø¯Ø®Ù„":f==="expenses"?"Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª":"Ø§Ù„ØªÙˆÙÙŠØ±"}),e.jsx(xt,{type:"monotone",dataKey:"income",stroke:"#22c55e",strokeWidth:2,dot:{fill:"#22c55e",strokeWidth:2},activeDot:{r:6}}),e.jsx(xt,{type:"monotone",dataKey:"expenses",stroke:"#ef4444",strokeWidth:2,dot:{fill:"#ef4444",strokeWidth:2},activeDot:{r:6}}),e.jsx(xt,{type:"monotone",dataKey:"savings",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"5 5",dot:{fill:"#3b82f6",strokeWidth:2},activeDot:{r:6}})]})})})})]})}function aa({expenses:t,categories:s,formatCurrency:n,period:a="month"}){const g=l.useMemo(()=>{const f=new Date;let d;switch(a){case"week":d=new Date(f.getTime()-6048e5);break;case"year":d=new Date(f.getFullYear(),0,1);break;case"month":default:d=new Date(f.getFullYear(),f.getMonth(),1);break}const p=t.filter(M=>{const c=new Date(M.date);return c>=d&&c<=f}),o={};p.forEach(M=>{const c=M.categoryId;o[c]=(o[c]||0)+M.amount});const y=Object.values(o).reduce((M,c)=>M+c,0);return{data:Object.entries(o).map(([M,c])=>{const h=s.find(m=>m.id===M)||{name:"Ø£Ø®Ø±Ù‰",color:"#64748b",icon:"ðŸ“¦"};return{name:h.name,value:c,color:h.color,icon:h.icon,percentage:y>0?c/y*100:0}}).sort((M,c)=>c.value-M.value).slice(0,8),total:y}},[t,s,a]),i=a==="week"?"Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹":a==="year"?"Ù‡Ø°Ù‡ Ø§Ù„Ø³Ù†Ø©":"Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±";return g.data.length===0?e.jsxs(K,{children:[e.jsxs(ne,{className:"pb-2",children:[e.jsx(le,{className:"text-base font-medium",children:"Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i})]}),e.jsx(H,{children:e.jsx("div",{className:"flex h-[250px] items-center justify-center text-muted-foreground",children:e.jsxs("p",{children:["Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØµØ±ÙˆÙØ§Øª ",i]})})})]}):e.jsxs(K,{children:[e.jsxs(ne,{className:"pb-2",children:[e.jsx(le,{className:"text-base font-medium",children:"Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i," â€¢ Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ",n(g.total)]})]}),e.jsxs(H,{children:[e.jsx("div",{className:"h-[250px] w-full",children:e.jsx(jt,{width:"100%",height:"100%",children:e.jsxs(Bs,{children:[e.jsx(Gs,{data:g.data,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:2,dataKey:"value",children:g.data.map(f=>e.jsx(zs,{fill:f.color},`cell-${f.name}`))}),e.jsx(Nt,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",direction:"rtl"},formatter:f=>[n(f),"Ø§Ù„Ù…Ø¨Ù„Øº"]}),e.jsx(Ut,{layout:"vertical",align:"right",verticalAlign:"middle",formatter:f=>{const d=g.data.find(p=>p.name===f);return e.jsxs("span",{className:"text-xs",children:[d?.icon," ",f," (",d?.percentage.toFixed(0),"%)"]})}})]})})}),e.jsx("div",{className:"mt-4 space-y-2",children:g.data.slice(0,3).map(f=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-3 w-3 rounded-full",style:{backgroundColor:f.color}}),e.jsxs("span",{children:[f.icon," ",f.name]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:n(f.value)}),e.jsxs("span",{className:"text-muted-foreground",children:["(",f.percentage.toFixed(0),"%)"]})]})]},f.name))})]})]})}function Ce({...t}){return e.jsx(as,{"data-slot":"select",...t})}function Se({...t}){return e.jsx(rs,{"data-slot":"select-value",...t})}function De({className:t,size:s="default",children:n,...a}){return e.jsxs(ns,{"data-slot":"select-trigger","data-size":s,className:R("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a,children:[n,e.jsx(ls,{asChild:!0,children:e.jsx(rt,{className:"size-4 opacity-50"})})]})}function Ae({className:t,children:s,position:n="popper",align:a="center",...g}){return e.jsx(is,{children:e.jsxs(os,{"data-slot":"select-content",className:R("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,align:a,...g,children:[e.jsx(na,{}),e.jsx(cs,{className:R("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(la,{})]})})}function se({className:t,children:s,...n}){return e.jsxs(ds,{"data-slot":"select-item",className:R("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(ms,{children:e.jsx(qe,{className:"size-4"})})}),e.jsx(us,{children:s})]})}function na({className:t,...s}){return e.jsx(xs,{"data-slot":"select-scroll-up-button",className:R("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ft,{className:"size-4"})})}function la({className:t,...s}){return e.jsx(hs,{"data-slot":"select-scroll-down-button",className:R("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(rt,{className:"size-4"})})}const Dt=[{value:"car",label:"Ø³ÙŠØ§Ø±Ø©",icon:"ðŸš—"},{value:"home",label:"Ù…Ù†Ø²Ù„/Ø¹Ù‚Ø§Ø±",icon:"ðŸ "},{value:"electronics",label:"Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª",icon:"ðŸ“±"},{value:"furniture",label:"Ø£Ø«Ø§Ø«",icon:"ðŸ›‹ï¸"},{value:"education",label:"ØªØ¹Ù„ÙŠÙ…",icon:"ðŸ“š"},{value:"medical",label:"Ø·Ø¨ÙŠ",icon:"ðŸ’Š"},{value:"loan",label:"Ù‚Ø±Ø¶ Ø´Ø®ØµÙŠ",icon:"ðŸ’°"},{value:"other",label:"Ø£Ø®Ø±Ù‰",icon:"ðŸ“¦"}];function ra({isOpen:t,onClose:s,onSave:n,installment:a}){const[g,i]=l.useState(""),[f,d]=l.useState(""),[p,o]=l.useState(""),[y,b]=l.useState(""),[M,c]=l.useState("0"),[h,m]=l.useState("monthly"),[r,x]=l.useState("other"),[S,E]=l.useState(""),[A,T]=l.useState("3"),[G,W]=l.useState(!1),[_,Q]=l.useState(""),[X,D]=l.useState(null),I=parseFloat(f)||0,w=parseFloat(p)||0,B=parseInt(y)||0,V=parseInt(M)||0,re=w*V,ue=I-re;l.useEffect(()=>{a?(i(a.title),d(a.totalAmount.toString()),o(a.installmentAmount.toString()),b(a.totalInstallments.toString()),c(a.paidInstallments.toString()),m(a.frequency),x(a.categoryId),E(a.startDate.split("T")[0]),T(a.remindDaysBefore.toString()),W(a.autoPayment),Q(a.notes||"")):be()},[a,t]);const be=()=>{i(""),d(""),o(""),b(""),c("0"),m("monthly"),x("other"),E(new Date().toISOString().split("T")[0]),T("3"),W(!1),Q(""),D(null)};l.useEffect(()=>{X==="total"&&I>0&&B>0?o((I/B).toFixed(2)):X==="installment"&&w>0&&B>0?d((w*B).toFixed(2)):X==="count"&&B>0&&(I>0?o((I/B).toFixed(2)):w>0&&d((w*B).toFixed(2)))},[f,p,y,X]);const ce=u=>{d(u),D("total")},he=u=>{o(u),D("installment")},ye=u=>{b(u),D("count")},N=()=>{const u=new Date(S),F=new Date;let C=new Date(u);for(;C<=F;)switch(h){case"weekly":C.setDate(C.getDate()+7);break;case"monthly":C.setMonth(C.getMonth()+1);break;case"quarterly":C.setMonth(C.getMonth()+3);break}return C.toISOString()},v=()=>{const u=new Date(S),F=B-V;switch(h){case"weekly":u.setDate(u.getDate()+7*F);break;case"monthly":u.setMonth(u.getMonth()+F);break;case"quarterly":u.setMonth(u.getMonth()+3*F);break}return u.toISOString()},j=u=>{u.preventDefault(),!(!g||!f||!p||!y||!S)&&(n({title:g,totalAmount:I,paidAmount:re,installmentAmount:w,totalInstallments:B,paidInstallments:V,frequency:h,startDate:new Date(S).toISOString(),nextPaymentDate:N(),endDate:v(),categoryId:r,status:V>=B?"completed":"active",autoPayment:G,remindDaysBefore:parseInt(A),notes:_||void 0,payments:a?.payments||[],updatedAt:new Date().toISOString()}),s())},k=Dt.find(u=>u.value===r);return e.jsx(Ie,{open:t,onOpenChange:s,children:e.jsxs(fe,{className:"max-h-[90vh] overflow-y-auto sm:max-w-lg",children:[e.jsx(je,{children:e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5"}),a?"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù‚Ø³Ø·":"Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ø· Ø¬Ø¯ÙŠØ¯"]})}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"title",children:"Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ø·"}),e.jsx(ae,{id:"title",value:g,onChange:u=>i(u.target.value),placeholder:"Ù…Ø«Ø§Ù„: Ù‚Ø³Ø· Ø§Ù„Ø³ÙŠØ§Ø±Ø©",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Ø§Ù„ÙØ¦Ø©"}),e.jsxs(Ce,{value:r,onValueChange:x,children:[e.jsx(De,{children:e.jsxs(Se,{children:[k?.icon," ",k?.label]})}),e.jsx(Ae,{children:Dt.map(u=>e.jsxs(se,{value:u.value,children:[u.icon," ",u.label]},u.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"totalAmount",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ"}),e.jsx(ae,{id:"totalAmount",type:"number",min:"0",step:"0.01",value:f,onChange:u=>ce(u.target.value),placeholder:"0.00",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"installmentAmount",children:"Ù‚ÙŠÙ…Ø© Ø§Ù„Ù‚Ø³Ø·"}),e.jsx(ae,{id:"installmentAmount",type:"number",min:"0",step:"0.01",value:p,onChange:u=>he(u.target.value),placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"totalInstallments",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù‚Ø³Ø§Ø· Ø§Ù„ÙƒÙ„ÙŠ"}),e.jsx(ae,{id:"totalInstallments",type:"number",min:"1",value:y,onChange:u=>ye(u.target.value),placeholder:"12",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"paidInstallments",children:"Ø§Ù„Ø£Ù‚Ø³Ø§Ø· Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©"}),e.jsx(ae,{id:"paidInstallments",type:"number",min:"0",max:y,value:M,onChange:u=>c(u.target.value),placeholder:"0"})]})]}),I>0&&B>0&&e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„Ù…Ø¯ÙÙˆØ¹"}),e.jsxs("span",{className:"font-medium text-green-600",children:[re.toLocaleString("ar-EG")," Ø¬.Ù…"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"}),e.jsxs("span",{className:"font-medium text-red-600",children:[ue.toLocaleString("ar-EG")," ","Ø¬.Ù…"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„Ø£Ù‚Ø³Ø§Ø· Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©"}),e.jsxs("span",{className:"font-medium",children:[B-V," Ù‚Ø³Ø·"]})]}),e.jsx("div",{className:"h-2 rounded-full bg-muted overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 transition-all",style:{width:`${V/B*100}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¯ÙØ¹"}),e.jsxs(Ce,{value:h,onValueChange:u=>m(u),children:[e.jsx(De,{children:e.jsx(Se,{})}),e.jsxs(Ae,{children:[e.jsx(se,{value:"weekly",children:"Ø£Ø³Ø¨ÙˆØ¹ÙŠ"}),e.jsx(se,{value:"monthly",children:"Ø´Ù‡Ø±ÙŠ"}),e.jsx(se,{value:"quarterly",children:"Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠ"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"startDate",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(ae,{id:"startDate",type:"date",value:S,onChange:u=>E(u.target.value),className:"pl-10",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(L,{htmlFor:"remindDaysBefore",className:"flex items-center gap-2",children:[e.jsx(zt,{className:"h-4 w-4"}),"Ø§Ù„ØªØ°ÙƒÙŠØ± Ù‚Ø¨Ù„ Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø¨Ù€"]}),e.jsxs(Ce,{value:A,onValueChange:T,children:[e.jsx(De,{children:e.jsx(Se,{})}),e.jsxs(Ae,{children:[e.jsx(se,{value:"1",children:"ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯"}),e.jsx(se,{value:"3",children:"3 Ø£ÙŠØ§Ù…"}),e.jsx(se,{value:"7",children:"Ø£Ø³Ø¨ÙˆØ¹"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Ø¯ÙØ¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ Ù…ÙˆØ¹Ø¯Ù‡"})]})]}),e.jsx($,{type:"button",variant:G?"default":"outline",size:"sm",onClick:()=>W(!G),children:G?"Ù…ÙØ¹Ù‘Ù„":"Ù…Ø¹Ø·Ù‘Ù„"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"notes",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx(Ue,{id:"notes",value:_,onChange:u=>Q(u.target.value),placeholder:"Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...",rows:2})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx($,{type:"submit",className:"flex-1",children:a?"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‚Ø³Ø·"}),e.jsx($,{type:"button",variant:"outline",onClick:s,children:"Ø¥Ù„ØºØ§Ø¡"})]})]})]})})}function ia({isOpen:t,onClose:s,installment:n,onPay:a,formatCurrency:g}){const[i,f]=l.useState(""),[d,p]=l.useState(new Date().toISOString().split("T")[0]),[o,y]=l.useState(""),[b,M]=l.useState(!1);if(!n)return null;const c=n.installmentAmount,h=new Date(n.nextPaymentDate),m=new Date(d),r=m<h,x=m>h,S=r?Math.ceil((h.getTime()-m.getTime())/(1e3*60*60*24)):0,E=x?Math.ceil((m.getTime()-h.getTime())/(1e3*60*60*24)):0,A=parseFloat(i)||c,T=A<c,G=n.totalAmount-n.paidAmount-A,W=()=>{if(!i&&!c)return;const D=x?"late":T?"partial":"paid";a(n.id,{date:d,amount:A,status:D,lateFee:x?0:void 0,notes:o||void 0}),f(""),p(new Date().toISOString().split("T")[0]),y(""),s()},_=D=>new Date(D).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}),Q=D=>{switch(D){case"paid":return"text-green-500 bg-green-500/10";case"late":return"text-orange-500 bg-orange-500/10";case"partial":return"text-yellow-500 bg-yellow-500/10";case"missed":return"text-red-500 bg-red-500/10";default:return"text-muted-foreground bg-muted"}},X=D=>{switch(D){case"paid":return"Ù…Ø¯ÙÙˆØ¹";case"late":return"Ù…ØªØ£Ø®Ø±";case"partial":return"Ø¬Ø²Ø¦ÙŠ";case"missed":return"ÙØ§Ø¦Øª";default:return D}};return e.jsx(Ie,{open:t,onOpenChange:s,children:e.jsxs(fe,{className:"max-h-[90vh] overflow-y-auto sm:max-w-md",children:[e.jsx(je,{children:e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-5 w-5"}),"Ø³Ø¯Ø§Ø¯ Ù‚Ø³Ø·"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:n.title}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Ù‚Ø³Ø· ",n.paidInstallments+1," Ù…Ù†"," ",n.totalInstallments]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù…Ø­Ø¯Ø¯:"}),e.jsx("span",{className:"font-medium",children:_(n.nextPaymentDate)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ù‚ÙŠÙ…Ø© Ø§Ù„Ù‚Ø³Ø·:"}),e.jsx("span",{className:"font-bold text-primary",children:g(c)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(L,{htmlFor:"paymentDate",className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹"]}),e.jsx(ae,{id:"paymentDate",type:"date",value:d,onChange:D=>p(D.target.value)}),r&&e.jsxs("p",{className:"text-xs text-green-500 flex items-center gap-1",children:[e.jsx(Ze,{className:"h-3 w-3"}),"Ø¯ÙØ¹ Ù…Ø¨ÙƒØ± Ø¨Ù€ ",S," ÙŠÙˆÙ… - Ù…Ù…ØªØ§Ø²! ðŸŽ‰"]}),x&&e.jsxs("p",{className:"text-xs text-orange-500 flex items-center gap-1",children:[e.jsx(gt,{className:"h-3 w-3"}),"Ø¯ÙØ¹ Ù…ØªØ£Ø®Ø± Ø¨Ù€ ",E," ÙŠÙˆÙ…"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"amount",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹"}),e.jsx(ae,{id:"amount",type:"number",min:"0",step:"0.01",value:i,onChange:D=>f(D.target.value),placeholder:c.toString()}),T&&i&&e.jsxs("p",{className:"text-xs text-yellow-500 flex items-center gap-1",children:[e.jsx(ys,{className:"h-3 w-3"}),"Ø¯ÙØ¹ Ø¬Ø²Ø¦ÙŠ - Ø³ÙŠØªØ¨Ù‚Ù‰"," ",g(c-A)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"notes",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx(Ue,{id:"notes",value:o,onChange:D=>y(D.target.value),placeholder:"Ù…Ø«Ø§Ù„: Ø¯ÙØ¹Øª Ù…Ù† Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†Ùƒ...",rows:2})]}),e.jsxs("div",{className:"rounded-lg border p-3 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ:"}),e.jsx("span",{children:g(A)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø³Ø¯Ø§Ø¯:"}),e.jsx("span",{className:R("font-medium",G<=0?"text-green-500":"text-foreground"),children:G<=0?"âœ… Ù…ÙƒØªÙ…Ù„!":g(G)})]})]}),n.payments.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>M(!b),className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors w-full",children:[e.jsx(Gt,{className:"h-4 w-4"}),"Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª (",n.payments.length,")",b?e.jsx(ft,{className:"h-4 w-4 mr-auto"}):e.jsx(rt,{className:"h-4 w-4 mr-auto"})]}),b&&e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto text-foreground",children:n.payments.slice().reverse().map((D,I)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/30 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-muted-foreground",children:["#",n.payments.length-I]}),e.jsx("span",{children:_(D.date)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:g(D.amount)}),e.jsx("span",{className:R("text-xs px-2 py-0.5 rounded",Q(D.status)),children:X(D.status)})]})]},D.id))})]})]}),e.jsxs(it,{className:"gap-2 sm:gap-0",children:[e.jsx($,{variant:"outline",onClick:s,children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsxs($,{onClick:W,className:"gap-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹"]})]})]})})}const At=[{value:"emergency-fund",label:"ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦",icon:"ðŸ¥",color:"#ef4444"},{value:"savings",label:"Ø§Ø¯Ø®Ø§Ø± Ø¹Ø§Ù…",icon:"ðŸ’°",color:"#22c55e"},{value:"investment",label:"Ø§Ø³ØªØ«Ù…Ø§Ø±",icon:"ðŸ“ˆ",color:"#3b82f6"},{value:"purchase",label:"Ø´Ø±Ø§Ø¡ Ø´ÙŠØ¡",icon:"ðŸ›ï¸",color:"#f97316"},{value:"travel",label:"Ø³ÙØ±",icon:"âœˆï¸",color:"#8b5cf6"},{value:"education",label:"ØªØ¹Ù„ÙŠÙ…",icon:"ðŸ“š",color:"#14b8a6"},{value:"other",label:"Ø£Ø®Ø±Ù‰",icon:"ðŸŽ¯",color:"#64748b"}],kt=[{value:"low",label:"Ù…Ù†Ø®ÙØ¶Ø©",color:"bg-gray-500"},{value:"medium",label:"Ù…ØªÙˆØ³Ø·Ø©",color:"bg-yellow-500"},{value:"high",label:"Ø¹Ø§Ù„ÙŠØ©",color:"bg-orange-500"},{value:"critical",label:"Ø­Ø±Ø¬Ø©",color:"bg-red-500"}];function oa({isOpen:t,onClose:s,onSave:n,goal:a}){const[g,i]=l.useState(""),[f,d]=l.useState(""),[p,o]=l.useState(""),[y,b]=l.useState("0"),[M,c]=l.useState("savings"),[h,m]=l.useState("medium"),[r,x]=l.useState(""),[S,E]=l.useState(""),[A,T]=l.useState(!1),[G,W]=l.useState([]),[_,Q]=l.useState(""),[X,D]=l.useState(""),[I,w]=l.useState(!1),B=parseFloat(p)||0,V=parseFloat(y)||0,re=parseFloat(S)||0,ue=B>0?V/B*100:0;l.useEffect(()=>{a?(i(a.title),d(a.description||""),o(a.targetAmount.toString()),b(a.currentAmount.toString()),c(a.category),m(a.priority),x(a.deadline?.split("T")[0]||""),E(a.monthlyContribution.toString()),T(a.autoAllocate),W(a.milestones||[]),w((a.milestones||[]).length>0)):be()},[a,t]);const be=()=>{i(""),d(""),o(""),b("0"),c("savings"),m("medium"),x(""),E(""),T(!1),W([]),Q(""),D(""),w(!1)};l.useEffect(()=>{if(B>0&&r&&!S){const u=new Date(r),F=new Date,C=Math.max(1,(u.getFullYear()-F.getFullYear())*12+(u.getMonth()-F.getMonth())),z=B-V;z>0&&E((z/C).toFixed(0))}},[p,r,y]);const ce=()=>{if(!_||!X)return;const u=parseFloat(X);if(isNaN(u)||u<=0)return;const F={id:`milestone-${Date.now()}`,title:_,targetAmount:u,reached:V>=u,reachedAt:V>=u?new Date().toISOString():void 0};W([...G,F].sort((C,z)=>C.targetAmount-z.targetAmount)),Q(""),D("")},he=u=>{W(G.filter(F=>F.id!==u))},ye=()=>{if(B<=0)return;const u=[{id:`milestone-auto-25-${Date.now()}`,title:"Ø±Ø¨Ø¹ Ø§Ù„Ø·Ø±ÙŠÙ‚ ðŸŒ±",targetAmount:Math.round(B*.25),reached:V>=B*.25,reachedAt:V>=B*.25?new Date().toISOString():void 0},{id:`milestone-auto-50-${Date.now()}`,title:"Ù†ØµÙ Ø§Ù„Ø·Ø±ÙŠÙ‚ ðŸ”¥",targetAmount:Math.round(B*.5),reached:V>=B*.5,reachedAt:V>=B*.5?new Date().toISOString():void 0},{id:`milestone-auto-75-${Date.now()}`,title:"Ù‚Ø±Ø¨Øª ØªØ®Ù„Øµ ðŸš€",targetAmount:Math.round(B*.75),reached:V>=B*.75,reachedAt:V>=B*.75?new Date().toISOString():void 0}];W(u),w(!0)},N=u=>{if(u.preventDefault(),!g||!p)return;const F=G.map(C=>({...C,reached:V>=C.targetAmount,reachedAt:V>=C.targetAmount&&!C.reachedAt?new Date().toISOString():C.reachedAt}));n({title:g,description:f||void 0,targetAmount:B,currentAmount:V,currency:"EGP",priority:h,category:M,deadline:r?new Date(r).toISOString():void 0,monthlyContribution:re,autoAllocate:A,milestones:F,contributions:a?.contributions||[],status:ue>=100?"completed":"active",updatedAt:new Date().toISOString()}),s()},v=At.find(u=>u.value===M),j=kt.find(u=>u.value===h),k=()=>{if(!r)return null;const u=new Date(r),F=new Date,C=Math.ceil((u.getTime()-F.getTime())/(1e3*60*60*24));return C<0?"Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ù…ÙˆØ¹Ø¯":C===0?"Ø§Ù„ÙŠÙˆÙ…!":C===1?"ØºØ¯Ø§Ù‹":C<30?`${C} ÙŠÙˆÙ…`:C<365?`${Math.ceil(C/30)} Ø´Ù‡Ø±`:`${(C/365).toFixed(1)} Ø³Ù†Ø©`};return e.jsx(Ie,{open:t,onOpenChange:s,children:e.jsxs(fe,{className:"max-h-[90vh] overflow-y-auto sm:max-w-lg",children:[e.jsx(je,{children:e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),a?"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù‡Ø¯Ù":"Ø¥Ø¶Ø§ÙØ© Ù‡Ø¯Ù Ù…Ø§Ù„ÙŠ Ø¬Ø¯ÙŠØ¯"]})}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"title",children:"Ø§Ø³Ù… Ø§Ù„Ù‡Ø¯Ù"}),e.jsx(ae,{id:"title",value:g,onChange:u=>i(u.target.value),placeholder:"Ù…Ø«Ø§Ù„: Ø´Ø±Ø§Ø¡ Ù„Ø§Ø¨ ØªÙˆØ¨ Ø¬Ø¯ÙŠØ¯",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"description",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx(Ue,{id:"description",value:f,onChange:u=>d(u.target.value),placeholder:"ÙˆØµÙ Ù…Ø®ØªØµØ± Ù„Ù„Ù‡Ø¯Ù...",rows:2})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Ø§Ù„ÙØ¦Ø©"}),e.jsxs(Ce,{value:M,onValueChange:u=>c(u),children:[e.jsx(De,{children:e.jsxs(Se,{children:[v?.icon," ",v?.label]})}),e.jsx(Ae,{children:At.map(u=>e.jsxs(se,{value:u.value,children:[u.icon," ",u.label]},u.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©"}),e.jsxs(Ce,{value:h,onValueChange:u=>m(u),children:[e.jsx(De,{children:e.jsx(Se,{children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${j?.color}`}),j?.label]})})}),e.jsx(Ae,{children:kt.map(u=>e.jsx(se,{value:u.value,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${u.color}`}),u.label]})},u.value))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"targetAmount",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù"}),e.jsx(ae,{id:"targetAmount",type:"number",min:"0",step:"1",value:p,onChange:u=>o(u.target.value),placeholder:"10000",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{htmlFor:"currentAmount",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx(ae,{id:"currentAmount",type:"number",min:"0",step:"1",value:y,onChange:u=>b(u.target.value),placeholder:"0"})]})]}),B>0&&e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„ØªÙ‚Ø¯Ù…"}),e.jsxs("span",{className:"font-medium",children:[ue.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-3 rounded-full bg-muted overflow-hidden",children:e.jsx("div",{className:"h-full transition-all",style:{width:`${Math.min(100,ue)}%`,backgroundColor:v?.color||"#22c55e"}})}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[V.toLocaleString("ar-EG")," Ø¬.Ù…"]}),e.jsxs("span",{children:[B.toLocaleString("ar-EG")," Ø¬.Ù…"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(L,{htmlFor:"deadline",className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"]}),e.jsx(ae,{id:"deadline",type:"date",value:r,onChange:u=>x(u.target.value)}),r&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ",k()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(L,{htmlFor:"monthlyContribution",className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),"Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©"]}),e.jsx(ae,{id:"monthlyContribution",type:"number",min:"0",step:"1",value:S,onChange:u=>E(u.target.value),placeholder:"500"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"ØªØ®ØµÙŠØµ ØªÙ„Ù‚Ø§Ø¦ÙŠ"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø®ØµÙ… Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ø¯Ø®Ù„"})]}),e.jsx($,{type:"button",variant:A?"default":"outline",size:"sm",onClick:()=>T(!A),children:A?"Ù…ÙØ¹Ù‘Ù„":"Ù…Ø¹Ø·Ù‘Ù„"})]}),A&&re>0&&e.jsxs("p",{className:"text-xs text-primary bg-primary/10 p-2 rounded-lg",children:["âœ¨ Ø³ÙŠØªÙ… ØªØ®ØµÙŠØµ ",re.toLocaleString()," Ø¬.Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙƒÙ„ Ø´Ù‡Ø± Ù„Ù‡Ø°Ø§ Ø§Ù„Ù‡Ø¯Ù"]})]}),B>0&&e.jsxs("div",{className:"space-y-3 border rounded-lg p-3",children:[e.jsxs("button",{type:"button",className:"flex items-center justify-between w-full text-sm",onClick:()=>w(!I),children:[e.jsxs(L,{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Le,{className:"h-4 w-4 text-yellow-500"}),"Ø§Ù„Ù…Ø±Ø§Ø­Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",G.length>0&&e.jsx("span",{className:"bg-primary/10 text-primary text-xs px-2 py-0.5 rounded-full",children:G.length})]}),I?e.jsx(ft,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(rt,{className:"h-4 w-4 text-muted-foreground"})]}),!I&&G.length===0&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ù†Ù‚Ø§Ø· Ø¥Ù†Ø¬Ø§Ø² ÙˆØ³ÙŠØ·Ø© ØªØ­ÙØ²Ùƒ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù‡Ø¯ÙÙƒ"}),I&&e.jsxs("div",{className:"space-y-3 pt-2",children:[G.length===0&&e.jsxs($,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:ye,children:[e.jsx(Ke,{className:"h-4 w-4 mr-2 text-yellow-500"}),"Ø§Ù‚ØªØ±Ø§Ø­ Ù…Ø±Ø§Ø­Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ© (25%ØŒ 50%ØŒ 75%)"]}),G.length>0&&e.jsxs("div",{className:"space-y-2",children:[G.map(u=>e.jsxs("div",{className:`flex items-center justify-between rounded-lg border p-2 text-sm ${u.reached?"bg-green-50 border-green-200 dark:bg-green-900/20":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[u.reached?e.jsx("span",{className:"text-green-600",children:"âœ“"}):e.jsx("span",{className:"text-muted-foreground",children:"â—‹"}),e.jsx("span",{children:u.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium text-xs",children:[u.targetAmount.toLocaleString("ar-EG")," ","Ø¬.Ù…"]}),e.jsx($,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>he(u.id),children:e.jsx(Xe,{className:"h-3 w-3"})})]})]},u.id)),e.jsx($,{type:"button",variant:"ghost",size:"sm",className:"w-full text-muted-foreground text-xs",onClick:()=>W([]),children:"Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø£Ùˆ Ø£Ø¶Ù Ù…Ø±Ø­Ù„Ø© Ù…Ø®ØµØµØ©:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø­Ù„Ø©",value:_,onChange:u=>Q(u.target.value),className:"flex-1"}),e.jsx(ae,{type:"number",placeholder:"Ø§Ù„Ù…Ø¨Ù„Øº",value:X,onChange:u=>D(u.target.value),className:"w-24"}),e.jsx($,{type:"button",variant:"outline",size:"icon",onClick:ce,children:e.jsx(Oe,{className:"h-4 w-4"})})]})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx($,{type:"submit",className:"flex-1",children:a?"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‡Ø¯Ù"}),e.jsx($,{type:"button",variant:"outline",onClick:s,children:"Ø¥Ù„ØºØ§Ø¡"})]})]})]})})}function ca({budget:t,categories:s,formatCurrency:n,onSaveBudget:a}){const[g,i]=l.useState(!1),[f,d]=l.useState({}),p=()=>{const x={};s.forEach(S=>{const E=t?.categoryBudgets.find(A=>A.categoryId===S.id);x[S.id]=E?.planned.toString()||S.monthlyBudget?.toString()||"0"}),d(x),i(!0)},o=()=>{const x=s.map(S=>{const E=parseFloat(f[S.id])||0,T=t?.categoryBudgets.find(G=>G.categoryId===S.id)?.spent||0;return{categoryId:S.id,categoryName:S.name,planned:E,spent:T,remaining:E-T,percentage:E>0?T/E*100:0}});a(x),i(!1)},y=()=>{i(!1),d({})},b=t?.categoryBudgets.reduce((x,S)=>x+S.planned,0)||0,M=t?.categoryBudgets.reduce((x,S)=>x+S.spent,0)||0,c=b-M,h=b>0?M/b*100:0,m=x=>x<=50?"bg-green-500":x<=80?"bg-yellow-500":x<=100?"bg-orange-500":"bg-red-500",r=x=>x<=80?e.jsx(qe,{className:"h-4 w-4 text-green-600"}):x<=100?e.jsx($e,{className:"h-4 w-4 text-orange-600"}):e.jsx(pe,{className:"h-4 w-4 text-red-600"});return e.jsxs(K,{children:[e.jsxs(ne,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(le,{className:"flex items-center gap-2 text-base font-medium",children:[e.jsx(yt,{className:"h-5 w-5"}),"ØªØ®Ø·ÙŠØ· Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©"]}),g?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{size:"sm",onClick:o,children:[e.jsx(qe,{className:"mr-1 h-4 w-4"}),"Ø­ÙØ¸"]}),e.jsx($,{size:"sm",variant:"outline",onClick:y,children:"Ø¥Ù„ØºØ§Ø¡"})]}):e.jsxs($,{size:"sm",variant:"outline",onClick:p,children:[e.jsx(Lt,{className:"mr-1 h-4 w-4"}),"ØªØ¹Ø¯ÙŠÙ„"]})]}),t&&!g&&e.jsxs("div",{className:"mt-3 rounded-lg bg-muted/50 p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©"}),e.jsx("span",{className:"font-medium",children:n(b)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Ø§Ù„Ù…ØµØ±ÙˆÙ"}),e.jsx("span",{className:M>b?"text-red-600":"text-muted-foreground",children:n(M)})]}),e.jsx(_t,{value:Math.min(100,h),className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:c>=0?"text-green-600":"text-red-600",children:[c>=0?"Ù…ØªØ¨Ù‚ÙŠ":"ØªØ¬Ø§ÙˆØ²",":"," ",n(Math.abs(c))]}),e.jsxs("span",{className:"text-muted-foreground",children:[h.toFixed(0),"%"]})]})]})]}),e.jsxs(H,{className:"space-y-3",children:[g?e.jsxs("div",{className:"space-y-3",children:[s.map(x=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-[120px]",children:[e.jsx("span",{className:"h-3 w-3 rounded-full",style:{backgroundColor:x.color}}),e.jsxs("span",{className:"text-sm truncate",children:[x.icon," ",x.name]})]}),e.jsx(ae,{type:"number",min:"0",step:"100",value:f[x.id]||"0",onChange:S=>d({...f,[x.id]:S.target.value}),className:"w-28 text-left",placeholder:"0"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Ø¬.Ù…"})]},x.id)),e.jsxs("div",{className:"border-t pt-3 mt-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Ù‚ÙˆØ§Ù„Ø¨ Ø³Ø±ÙŠØ¹Ø©:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx($,{size:"sm",variant:"outline",onClick:()=>{const x={};s.forEach(S=>{x[S.id]=S.isEssential?"2000":"500"}),d(x)},children:"Ù‚Ø§Ø¹Ø¯Ø© 50/30/20"}),e.jsx($,{size:"sm",variant:"outline",onClick:()=>{const x={};s.forEach(S=>{x[S.id]="1000"}),d(x)},children:"ØªÙˆØ²ÙŠØ¹ Ù…ØªØ³Ø§ÙˆÙŠ"})]})]})]}):t&&t.categoryBudgets.length>0?e.jsxs("div",{className:"space-y-3",children:[t.categoryBudgets.filter(x=>x.planned>0).map(x=>{const S=s.find(T=>T.id===x.categoryId),E=x.planned>0?x.spent/x.planned*100:0,A=E>100;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-3 w-3 rounded-full",style:{backgroundColor:S?.color}}),e.jsxs("span",{className:"truncate",children:[S?.icon," ",S?.name]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r(E),e.jsxs("span",{className:A?"text-red-600 font-medium":"",children:[E.toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"relative h-2 rounded-full bg-muted overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 left-0 h-full transition-all ${m(E)}`,style:{width:`${Math.min(100,E)}%`}}),A&&e.jsx("div",{className:"absolute top-0 h-full bg-red-500/50",style:{left:"100%",width:`${Math.min(50,E-100)}%`,transform:"translateX(-100%)"}})]}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:n(x.spent)}),e.jsx("span",{children:n(x.planned)})]})]},x.categoryId)}),t.categoryBudgets.filter(x=>x.planned>0).length===0&&e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx("p",{children:"Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ù„Ø£ÙŠ ÙØ¦Ø©"}),e.jsxs($,{variant:"outline",size:"sm",className:"mt-2",onClick:p,children:[e.jsx(Oe,{className:"mr-1 h-4 w-4"}),"Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©"]})]})]}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(yt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Ù„Ù… ÙŠØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±"}),e.jsx("p",{className:"text-xs mt-1",children:"Ø­Ø¯Ø¯ Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ù„ÙƒÙ„ ÙØ¦Ø© Ù„ØªØªØ¨Ø¹ Ø¥Ù†ÙØ§Ù‚Ùƒ"}),e.jsxs($,{variant:"outline",size:"sm",className:"mt-3",onClick:p,children:[e.jsx(Oe,{className:"mr-1 h-4 w-4"}),"Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©"]})]}),t&&!g&&M>0&&e.jsxs("div",{className:"border-t pt-3 mt-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"ðŸ’¡ Ù†ØµÙŠØ­Ø©:"}),h<50?e.jsx("p",{className:"text-xs text-green-600",children:"Ø£Ø¯Ø§Ø¡ Ù…Ù…ØªØ§Ø²! Ø£Ù†Øª ØªÙ†ÙÙ‚ Ø£Ù‚Ù„ Ù…Ù† Ù†ØµÙ Ù…ÙŠØ²Ø§Ù†ÙŠØªÙƒ ðŸ’š"}):h<80?e.jsx("p",{className:"text-xs text-yellow-600",children:"Ø£Ù†Øª ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­ØŒ Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø¥Ù†ÙØ§Ù‚ ðŸ‘"}):h<100?e.jsx("p",{className:"text-xs text-orange-600",children:"Ø§Ù†ØªØ¨Ù‡! Ø§Ù‚ØªØ±Ø¨Øª Ù…Ù† Ø­Ø¯ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©ØŒ Ù‚Ù„Ù„ Ù…Ù† Ø§Ù„Ù†ÙÙ‚Ø§Øª ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ© âš ï¸"}):e.jsx("p",{className:"text-xs text-red-600",children:"ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©! Ø±Ø§Ø¬Ø¹ Ù†ÙÙ‚Ø§ØªÙƒ ÙˆØ­Ø§ÙˆÙ„ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¥Ù†ÙØ§Ù‚ ðŸš¨"})]})]})]})}function da({incomes:t,expenses:s,categories:n,goals:a,budgets:g,formatCurrency:i}){const f=l.useMemo(()=>{const p=[],o=new Date,y=o.getMonth(),b=o.getFullYear(),M=y===0?11:y-1,c=y===0?b-1:b,h=s.filter(I=>{const w=new Date(I.date);return w.getMonth()===y&&w.getFullYear()===b}),m=s.filter(I=>{const w=new Date(I.date);return w.getMonth()===M&&w.getFullYear()===c}),r=h.reduce((I,w)=>I+w.amount,0),x=m.reduce((I,w)=>I+w.amount,0),E=t.filter(I=>{const w=new Date(I.actualDate||I.expectedDate||I.createdAt);return new Date(w).getMonth()===y&&new Date(w).getFullYear()===b}).reduce((I,w)=>I+w.amount,0);if(x>0){const I=(r-x)/x*100;I>15?p.push({id:"month-comparison-warning",type:"warning",icon:pe,title:"Ø²ÙŠØ§Ø¯Ø© ÙÙŠ Ø§Ù„ØµØ±Ù",message:`ØµØ±ÙØª ${Math.abs(I).toFixed(0)}% Ø£ÙƒØªØ± Ù…Ù† Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù„ÙŠ ÙØ§Øª`,value:i(r-x),trend:"up"}):I<-10&&p.push({id:"month-comparison-positive",type:"positive",icon:Qe,title:"ØªØ­Ø³Ù† ÙÙŠ Ø§Ù„ØµØ±Ù! ðŸŽ‰",message:`ØµØ±ÙØª ${Math.abs(I).toFixed(0)}% Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù„ÙŠ ÙØ§Øª`,value:i(Math.abs(r-x)),trend:"down"})}if(E>0){const I=E-r,w=I/E*100;w>=20?p.push({id:"savings-excellent",type:"positive",icon:Ye,title:"Ù†Ø³Ø¨Ø© Ø§Ø¯Ø®Ø§Ø± Ù…Ù…ØªØ§Ø²Ø©! ðŸ’ª",message:`Ø¨ØªÙˆÙØ± ${w.toFixed(0)}% Ù…Ù† Ø¯Ø®Ù„Ùƒ - Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹!`,value:i(I),trend:"up"}):w>=10?p.push({id:"savings-good",type:"info",icon:Ye,title:"Ù†Ø³Ø¨Ø© Ø§Ø¯Ø®Ø§Ø± Ø¬ÙŠØ¯Ø©",message:`Ø¨ØªÙˆÙØ± ${w.toFixed(0)}% Ù…Ù† Ø¯Ø®Ù„Ùƒ`,value:i(I),trend:"neutral"}):w<5&&w>=0&&p.push({id:"savings-low",type:"warning",icon:$e,title:"Ù†Ø³Ø¨Ø© Ø§Ø¯Ø®Ø§Ø± Ù…Ù†Ø®ÙØ¶Ø©",message:`Ø¨ØªÙˆÙØ± ${w.toFixed(0)}% ÙÙ‚Ø· - Ø­Ø§ÙˆÙ„ ØªØ²ÙˆØ¯ Ø§Ù„Ø§Ø¯Ø®Ø§Ø±`,trend:"down"})}const A={};h.forEach(I=>{A[I.categoryId]=(A[I.categoryId]||0)+I.amount});const T=Object.entries(A).sort(([,I],[,w])=>w-I)[0];if(T&&r>0){const[I,w]=T,B=n.find(re=>re.id===I),V=w/r*100;V>40&&p.push({id:"top-category",type:"info",icon:ke,title:`Ø£ÙƒØªØ± ÙØ¦Ø© ØµØ±Ù: ${B?.name||"Ø£Ø®Ø±Ù‰"}`,message:`${V.toFixed(0)}% Ù…Ù† ØµØ±ÙÙƒ Ø±Ø§Ø­ Ù„Ù€ ${B?.name||"Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø©"}`,value:i(w)})}const G={};h.forEach(I=>{const w=new Date(I.date).getDay();G[w]=(G[w]||0)+I.amount});const W=Object.entries(G).sort(([,I],[,w])=>w-I)[0];if(W){const I=["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"],[w,B]=W;p.push({id:"day-pattern",type:"info",icon:Ve,title:`ÙŠÙˆÙ… Ø§Ù„ØµØ±Ù Ø§Ù„Ø£Ø¹Ù„Ù‰: ${I[parseInt(w)]}`,message:`Ø¨ØªØµØ±Ù Ø£ÙƒØªØ± ÙŠÙˆÙ… ${I[parseInt(w)]}`,value:i(B)})}const _=g.find(I=>{const[w,B]=I.month.split("-").map(Number);return w===b&&B-1===y});if(_){const I=_.categoryBudgets.filter(w=>w.spent>w.planned&&w.planned>0);if(I.length>0){const w=I[0],B=n.find(re=>re.id===w.categoryId),V=(w.spent-w.planned)/w.planned*100;p.push({id:`budget-over-${w.categoryId}`,type:"warning",icon:$e,title:`ØªØ¬Ø§ÙˆØ²Øª Ù…ÙŠØ²Ø§Ù†ÙŠØ© ${B?.name||"Ø§Ù„ÙØ¦Ø©"}`,message:`ØªØ¬Ø§ÙˆØ²Øª Ø¨Ù†Ø³Ø¨Ø© ${V.toFixed(0)}% - Ø­Ø§ÙˆÙ„ ØªÙ‚Ù„Ù„ Ø§Ù„ØµØ±Ù`,value:i(w.spent-w.planned),trend:"up"})}else _.categoryBudgets.length>0&&_.categoryBudgets.every(B=>B.spent<=B.planned||B.planned===0)&&p.push({id:"budget-on-track",type:"positive",icon:Ke,title:"Ù…Ù„ØªØ²Ù… Ø¨Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©! ðŸ’š",message:"Ø£Ù†Øª Ù…Ø§Ø´ÙŠ ØµØ­ - Ø§Ø³ØªÙ…Ø±!"})}a.filter(I=>I.status==="active").forEach(I=>{const w=I.targetAmount>0?I.currentAmount/I.targetAmount*100:0;w>=90&&w<100?p.push({id:`goal-almost-${I.id}`,type:"positive",icon:ke,title:`Ù‚Ø±Ø¨Øª ØªØ­Ù‚Ù‚ Ù‡Ø¯Ù "${I.title}"! ðŸŽ¯`,message:`Ø¨Ø§Ù‚ÙŠ ${i(I.targetAmount-I.currentAmount)} ÙÙ‚Ø·`,value:`${w.toFixed(0)}%`,trend:"up"}):w>=50&&w<90&&p.push({id:`goal-halfway-${I.id}`,type:"info",icon:ke,title:`ØªÙ‚Ø¯Ù… Ø¬ÙŠØ¯ ÙÙŠ "${I.title}"`,message:`ÙˆØµÙ„Øª Ù„Ù€ ${w.toFixed(0)}% Ù…Ù† Ø§Ù„Ù‡Ø¯Ù`,value:i(I.currentAmount)})});const X=n.filter(I=>!I.isEssential),D=h.filter(I=>X.some(w=>w.id===I.categoryId)).reduce((I,w)=>I+w.amount,0);if(D>r*.3){const I=D*.2;p.push({id:"saving-opportunity",type:"suggestion",icon:vs,title:"ÙØ±ØµØ© ØªÙˆÙÙŠØ±! ðŸ’¡",message:`Ù„Ùˆ Ù‚Ù„Ù„Øª Ø§Ù„ØµØ±Ù ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠ 20% Ù‡ØªÙˆÙØ± ${i(I)}`,value:i(I)})}return p.slice(0,6)},[t,s,n,a,g,i]),d=p=>{switch(p){case"positive":return{bg:"bg-green-500/10 border-green-500/20",iconBg:"bg-green-500/20",iconColor:"text-green-600"};case"warning":return{bg:"bg-orange-500/10 border-orange-500/20",iconBg:"bg-orange-500/20",iconColor:"text-orange-600"};case"suggestion":return{bg:"bg-purple-500/10 border-purple-500/20",iconBg:"bg-purple-500/20",iconColor:"text-purple-600"};default:return{bg:"bg-blue-500/10 border-blue-500/20",iconBg:"bg-blue-500/20",iconColor:"text-blue-600"}}};return f.length===0?e.jsxs(K,{children:[e.jsx(ne,{children:e.jsxs(le,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Ke,{className:"h-5 w-5"}),"Ø±Ø¤Ù‰ Ù…Ø§Ù„ÙŠØ©"]})}),e.jsx(H,{children:e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Ø£Ø¶Ù Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª ÙˆØ§Ù„Ù†ØµØ§Ø¦Ø­ ðŸ“Š"})})]}):e.jsxs(K,{children:[e.jsx(ne,{children:e.jsxs(le,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Ke,{className:"h-5 w-5"}),"Ø±Ø¤Ù‰ Ù…Ø§Ù„ÙŠØ© Ø°ÙƒÙŠØ©"]})}),e.jsx(H,{className:"space-y-3",children:f.map(p=>{const o=d(p.type),y=p.icon;return e.jsxs("div",{className:R("flex items-start gap-3 p-3 rounded-lg border transition-all",o.bg),children:[e.jsx("div",{className:R("p-2 rounded-lg shrink-0",o.iconBg),children:e.jsx(y,{className:R("h-4 w-4",o.iconColor)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-medium",children:p.title}),p.trend&&(p.trend==="up"?e.jsx(Re,{className:"h-4 w-4 text-red-500"}):p.trend==="down"?e.jsx(lt,{className:"h-4 w-4 text-green-500"}):null)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:p.message})]}),p.value&&e.jsx("div",{className:"text-sm font-semibold shrink-0",children:p.value})]},p.id)})})]})}function ma({incomes:t,expenses:s,formatCurrency:n,monthsToForecast:a=3}){const g=l.useMemo(()=>{const f=new Date,d=[],p={};t.forEach(S=>{const E=new Date(S.actualDate||S.expectedDate||S.createdAt),A=`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}`;p[A]||(p[A]={income:0,expenses:0}),p[A].income+=S.amount}),s.forEach(S=>{const E=new Date(S.date),A=`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}`;p[A]||(p[A]={income:0,expenses:0}),p[A].expenses+=S.amount});const o=Object.keys(p).sort().slice(-6);let y=0,b=0,M=0;o.forEach(S=>{y+=p[S].income,b+=p[S].expenses,M++});const c=M>0?y/M:0,h=M>0?b/M:0;let m=0;if(o.length>=2){const S=o.slice(-3),E=o.slice(0,3),A=S.reduce((G,W)=>G+p[W].expenses,0)/S.length,T=E.reduce((G,W)=>G+p[W].expenses,0)/E.length;T>0&&(m=(A-T)/T)}let r=0;const x=["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"];o.slice(-4).forEach(S=>{const[E,A]=S.split("-").map(Number),T=p[S],G=T.income-T.expenses;r+=G,d.push({month:`${x[A-1]} ${E.toString().slice(-2)}`,income:T.income,expenses:T.expenses,net:G,cumulative:r,isForecast:!1})});for(let S=1;S<=a;S++){const E=new Date(f.getFullYear(),f.getMonth()+S,1),A=x[E.getMonth()],T=E.getFullYear().toString().slice(-2),G=1+m*.5*S,W=Math.max(0,h*Math.min(1.5,Math.max(.5,G))),_=c,Q=_-W;r+=Q,d.push({month:`${A} ${T}*`,income:Math.round(_),expenses:Math.round(W),net:Math.round(Q),cumulative:Math.round(r),isForecast:!0})}return d},[t,s,a]),i=l.useMemo(()=>{const f=g.filter(b=>b.isForecast),d=f.reduce((b,M)=>b+M.net,0),p=f.length>0?d/f.length:0,o=g.filter(b=>!b.isForecast).slice(-1)[0],y=f.slice(-1)[0];return{totalForecastNet:d,avgMonthlyNet:p,trend:p>=0?"positive":"negative",startCumulative:o?.cumulative||0,endCumulative:y?.cumulative||0}},[g]);return g.length===0?e.jsxs(K,{children:[e.jsx(ne,{children:e.jsxs(le,{className:"flex items-center gap-2 text-lg",children:[e.jsx(pe,{className:"h-5 w-5"}),"ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„Ù†Ù‚Ø¯ÙŠ"]})}),e.jsx(H,{children:e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Ø£Ø¶Ù Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© ðŸ“ˆ"})})]}):e.jsxs(K,{children:[e.jsx(ne,{children:e.jsxs(le,{className:"flex items-center gap-2 text-lg",children:[e.jsx(pe,{className:"h-5 w-5"}),"ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„Ù†Ù‚Ø¯ÙŠ"]})}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:R("p-3 rounded-lg border",i.trend==="positive"?"bg-green-500/10 border-green-500/20":"bg-red-500/10 border-red-500/20"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i.trend==="positive"?e.jsx(Ze,{className:"h-4 w-4 text-green-600"}):e.jsx($e,{className:"h-4 w-4 text-red-600"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ø§Ù„ØªÙˆÙ‚Ø¹ Ù„Ù„Ù€ ",a," Ø´Ù‡ÙˆØ±"]})]}),e.jsxs("p",{className:R("text-lg font-bold mt-1",i.trend==="positive"?"text-green-600":"text-red-600"),children:[i.totalForecastNet>=0?"+":"",n(i.totalForecastNet)]})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i.avgMonthlyNet>=0?e.jsx(pe,{className:"h-4 w-4 text-green-600"}):e.jsx(Qe,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Ø§Ù„Ù…ØªÙˆØ³Ø· Ø§Ù„Ø´Ù‡Ø±ÙŠ"})]}),e.jsxs("p",{className:R("text-lg font-bold mt-1",i.avgMonthlyNet>=0?"text-green-600":"text-red-600"),children:[i.avgMonthlyNet>=0?"+":"",n(i.avgMonthlyNet)]})]})]}),e.jsx("div",{className:"h-[200px] w-full",children:e.jsx(jt,{width:"100%",height:"100%",children:e.jsxs(Ls,{data:g,margin:{top:10,right:10,left:-20,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorIncome",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#22c55e",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#22c55e",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorExpenses",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:0})]})]}),e.jsx(qt,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(Wt,{dataKey:"month",fontSize:10,tickLine:!1,axisLine:!1,className:"fill-muted-foreground"}),e.jsx(Vt,{fontSize:10,tickLine:!1,axisLine:!1,tickFormatter:f=>`${(f/1e3).toFixed(0)}k`,className:"fill-muted-foreground"}),e.jsx(Nt,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",direction:"rtl"},formatter:(f,d)=>{const p={income:"Ø§Ù„Ø¯Ø®Ù„",expenses:"Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª",net:"Ø§Ù„ØµØ§ÙÙŠ"};return[n(f),p[d]||d]}}),e.jsx(Ys,{y:0,stroke:"hsl(var(--muted-foreground))",strokeDasharray:"3 3"}),e.jsx(Ct,{type:"monotone",dataKey:"income",stroke:"#22c55e",fill:"url(#colorIncome)",strokeWidth:2,dot:!1}),e.jsx(Ct,{type:"monotone",dataKey:"expenses",stroke:"#ef4444",fill:"url(#colorExpenses)",strokeWidth:2,dot:!1})]})})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„Ø¯Ø®Ù„"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª"})]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("span",{className:"text-muted-foreground",children:"* ØªÙˆÙ‚Ø¹Ø§Øª"})})]})]})]})}function ua({incomes:t,expenses:s,categories:n,formatCurrency:a}){const[g,i]=l.useState("daily"),f=(o,y,b,M)=>{const c=o.reduce((A,T)=>A+T.amount,0),h=y.reduce((A,T)=>A+T.amount,0),m=b.reduce((A,T)=>A+T.amount,0),r=M.reduce((A,T)=>A+T.amount,0),x={};o.forEach(A=>{x[A.categoryId]=(x[A.categoryId]||0)+A.amount});const S=Object.entries(x).sort(([,A],[,T])=>T-A)[0];let E=null;if(S){const A=n.find(T=>T.id===S[0]);E={name:A?.name||"Ø£Ø®Ø±Ù‰",amount:S[1],icon:A?.icon||"ðŸ“¦"}}return{income:h,expenses:c,net:h-c,topCategory:E,transactionCount:o.length+y.length,comparison:{expenses:m>0?(c-m)/m*100:0,income:r>0?(h-r)/r*100:0}}},d=l.useMemo(()=>{const o=new Date,y=new Date(o.getFullYear(),o.getMonth(),o.getDate()),b=new Date(y.getTime()-1440*60*1e3),M=o.getDay(),c=new Date(y.getTime()-M*24*60*60*1e3),h=new Date(c.getTime()-10080*60*1e3),m=new Date(o.getFullYear(),o.getMonth(),1),r=new Date(o.getFullYear(),o.getMonth()-1,1),x=new Date(o.getFullYear(),o.getMonth(),0),S=new Date(o.getFullYear(),0,1),E=new Date(o.getFullYear()-1,0,1),A=new Date(o.getFullYear()-1,11,31),T=(N,v,j)=>N.filter(k=>{const u=new Date("date"in k?k.date:k.actualDate||k.expectedDate||k.createdAt);return u>=v&&u<=j}),G=s.filter(N=>{const v=new Date(N.date);return v>=y&&v<new Date(y.getTime()+1440*60*1e3)}),W=t.filter(N=>{const v=new Date(N.actualDate||N.expectedDate||N.createdAt);return v>=y&&v<new Date(y.getTime()+1440*60*1e3)}),_=s.filter(N=>{const v=new Date(N.date);return v>=b&&v<y}),Q=t.filter(N=>{const v=new Date(N.actualDate||N.expectedDate||N.createdAt);return v>=b&&v<y}),X=T(s,c,o),D=T(t,c,o),I=T(s,h,c),w=T(t,h,c),B=T(s,m,o),V=T(t,m,o),re=T(s,r,x),ue=T(t,r,x),be=T(s,S,o),ce=T(t,S,o),he=T(s,E,A),ye=T(t,E,A);return{daily:f(G,W,_,Q),weekly:f(X,D,I,w),monthly:f(B,V,re,ue),yearly:f(be,ce,he,ye)}},[t,s,n]),p=(o,y,b)=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø§Ù„Ø¯Ø®Ù„"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:a(o.income)}),o.comparison.income!==0&&e.jsxs("div",{className:R("flex items-center gap-1 text-xs mt-1",o.comparison.income>0?"text-green-600":"text-red-600"),children:[o.comparison.income>0?e.jsx(Re,{className:"h-3 w-3"}):e.jsx(lt,{className:"h-3 w-3"}),e.jsxs("span",{children:[Math.abs(o.comparison.income).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª"}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:a(o.expenses)}),o.comparison.expenses!==0&&e.jsxs("div",{className:R("flex items-center gap-1 text-xs mt-1",o.comparison.expenses<0?"text-green-600":"text-red-600"),children:[o.comparison.expenses>0?e.jsx(Re,{className:"h-3 w-3"}):e.jsx(lt,{className:"h-3 w-3"}),e.jsxs("span",{children:[Math.abs(o.comparison.expenses).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:R("p-3 rounded-lg border",o.net>=0?"bg-blue-500/10 border-blue-500/20":"bg-orange-500/10 border-orange-500/20"),children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø§Ù„ØµØ§ÙÙŠ"}),e.jsxs("p",{className:R("text-lg font-bold",o.net>=0?"text-blue-600":"text-orange-600"),children:[o.net>=0?"+":"",a(o.net)]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.topCategory&&e.jsxs("div",{className:"p-3 rounded-lg bg-muted/30 border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø£ÙƒØªØ± ÙØ¦Ø© ØµØ±Ù"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-lg",children:o.topCategory.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:o.topCategory.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a(o.topCategory.amount)})]})]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-muted/30 border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:o.transactionCount}),e.jsx("p",{className:"text-xs text-muted-foreground",children:y})]})]}),(o.comparison.expenses!==0||o.comparison.income!==0)&&e.jsx("div",{className:"p-2 rounded-lg bg-muted/20 text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:o.comparison.expenses<0?e.jsxs("span",{className:"text-green-600",children:["ØµØ±ÙØª Ø£Ù‚Ù„ Ù…Ù† ",b," Ø¨Ù†Ø³Ø¨Ø©"," ",Math.abs(o.comparison.expenses).toFixed(0),"% ðŸŽ‰"]}):o.comparison.expenses>0?e.jsxs("span",{className:"text-orange-600",children:["ØµØ±ÙØª Ø£ÙƒØªØ± Ù…Ù† ",b," Ø¨Ù†Ø³Ø¨Ø©"," ",Math.abs(o.comparison.expenses).toFixed(0),"%"]}):e.jsxs("span",{className:"flex items-center justify-center gap-1",children:[e.jsx(ws,{className:"h-3 w-3"}),"Ù†ÙØ³ Ù…Ø¹Ø¯Ù„ Ø§Ù„ØµØ±Ù"]})})})]});return e.jsxs(K,{children:[e.jsx(ne,{children:e.jsxs(le,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Yt,{className:"h-5 w-5"}),"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±"]})}),e.jsx(H,{children:e.jsxs(Pt,{value:g,onValueChange:i,children:[e.jsxs(Bt,{className:"grid w-full grid-cols-4 mb-4",children:[e.jsxs(ve,{value:"daily",className:"text-xs",children:[e.jsx(Ve,{className:"h-3 w-3 ml-1"}),"ÙŠÙˆÙ…ÙŠ"]}),e.jsx(ve,{value:"weekly",className:"text-xs",children:"Ø£Ø³Ø¨ÙˆØ¹ÙŠ"}),e.jsx(ve,{value:"monthly",className:"text-xs",children:"Ø´Ù‡Ø±ÙŠ"}),e.jsx(ve,{value:"yearly",className:"text-xs",children:"Ø³Ù†ÙˆÙŠ"})]}),e.jsx(we,{value:"daily",children:p(d.daily,"Ø§Ù„ÙŠÙˆÙ…","Ø£Ù…Ø³")}),e.jsx(we,{value:"weekly",children:p(d.weekly,"Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹","Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¶ÙŠ")}),e.jsx(we,{value:"monthly",children:p(d.monthly,"Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±","Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠ")}),e.jsx(we,{value:"yearly",children:p(d.yearly,"Ù‡Ø°Ù‡ Ø§Ù„Ø³Ù†Ø©","Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù…Ø§Ø¶ÙŠØ©")})]})})]})}function xa({expenses:t,budgets:s,goals:n}){const a=l.useMemo(()=>{const g=new Date,i=new Date(g.getFullYear(),g.getMonth(),g.getDate()),f=[];let d=0;const p=[...s].sort((x,S)=>S.month.localeCompare(x.month));for(const x of p)if(x.totalActualExpenses<=x.totalPlannedExpenses)d++;else break;d>0&&f.push({type:"budget",days:d,icon:Cs,title:`${d} Ø´Ù‡Ø± Ù…Ù„ØªØ²Ù… Ø¨Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©`,color:"text-orange-500"});const o=new Map;t.forEach(x=>{const S=new Date(x.date).toISOString().split("T")[0];o.set(S,(o.get(S)||0)+x.amount)});let y=0;for(let x=0;x<30;x++){const E=new Date(i.getTime()-x*24*60*60*1e3).toISOString().split("T")[0];if((o.get(E)||0)===0)y++;else break}y>=1&&f.push({type:"saving",days:y,icon:Ss,title:`${y} ÙŠÙˆÙ… Ø¨Ø¯ÙˆÙ† ØµØ±Ù`,color:"text-yellow-500"});const b=n.filter(x=>x.status==="active"),M=b.filter(x=>x.currentAmount>0);M.length>0&&f.push({type:"goal",days:M.length,icon:ke,title:`${M.length} Ø£Ù‡Ø¯Ø§Ù Ù†Ø´Ø·Ø©`,color:"text-blue-500"});const c=[];t.length>=1&&c.push({id:"first-expense",icon:Ds,title:"Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©",description:"Ø³Ø¬Ù„Øª Ø£ÙˆÙ„ Ù†ÙÙ‚Ø©",color:"bg-yellow-500",earned:!0}),c.push({id:"ten-expenses",icon:As,title:"Ù…Ù†Ø¸Ù…",description:"Ø³Ø¬Ù„ 10 Ù†ÙÙ‚Ø§Øª",color:"bg-blue-500",earned:t.length>=10,progress:Math.min(100,t.length/10*100)}),c.push({id:"fifty-expenses",icon:Le,title:"Ø®Ø¨ÙŠØ± Ø§Ù„ØªØªØ¨Ø¹",description:"Ø³Ø¬Ù„ 50 Ù†ÙÙ‚Ø©",color:"bg-purple-500",earned:t.length>=50,progress:Math.min(100,t.length/50*100)});const h=n.filter(x=>x.status==="completed");c.push({id:"first-goal",icon:ks,title:"Ù…Ø­Ù‚Ù‚ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù",description:"Ø£ÙƒÙ…Ù„ Ù‡Ø¯Ù Ù…Ø§Ù„ÙŠ",color:"bg-red-500",earned:h.length>=1,progress:b.length>0?Math.max(...b.map(x=>x.currentAmount/x.targetAmount*100)):0});const m=s.filter(x=>x.totalActualExpenses<=x.totalPlannedExpenses);c.push({id:"budget-master",icon:Ke,title:"Ø³ÙŠØ¯ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©",description:"Ø§Ù„ØªØ²Ù… Ø¨Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø´Ù‡Ø± ÙƒØ§Ù…Ù„",color:"bg-green-500",earned:m.length>=1,progress:s.length>0?m.length/s.length*100:0});const r=[];return d>=3&&r.push("ðŸ”¥ Ø£Ø¯Ø§Ø¡ Ù…Ø°Ù‡Ù„! Ø§Ø³ØªÙ…Ø± Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¹Ø¯Ù„"),y>=3&&r.push("ðŸ’ª Ø¥Ø±Ø§Ø¯Ø© Ù‚ÙˆÙŠØ©! ÙƒÙ„ ÙŠÙˆÙ… Ø¨Ø¯ÙˆÙ† ØµØ±Ù ØºÙŠØ± Ø¶Ø±ÙˆØ±ÙŠ Ù‡Ùˆ Ø§Ù†ØªØµØ§Ø±"),h.length>0&&r.push(`ðŸ† Ø­Ù‚Ù‚Øª ${h.length} Ø£Ù‡Ø¯Ø§Ù! Ø£Ù†Øª Ù…Ù„Ù‡Ù…`),b.some(x=>x.currentAmount/x.targetAmount>=.9)&&r.push("ðŸŽ¯ Ù‚Ø±Ø¨Øª ØªØ­Ù‚Ù‚ Ù‡Ø¯ÙÙƒ! Ø´ÙˆÙŠØ© ÙƒÙ…Ø§Ù†"),r.length===0&&(t.length===0?r.push("ðŸš€ Ø§Ø¨Ø¯Ø£ Ø¨ØªØ³Ø¬ÙŠÙ„ Ø£ÙˆÙ„ Ù†ÙÙ‚Ø© Ø¹Ø´Ø§Ù† ØªØªØ§Ø¨Ø¹ ØµØ±ÙÙƒ"):n.length===0?r.push("ðŸ’¡ Ø­Ø¯Ø¯ Ù‡Ø¯Ù Ù…Ø§Ù„ÙŠ Ø¹Ø´Ø§Ù† ÙŠÙƒÙˆÙ† Ø¹Ù†Ø¯Ùƒ Ø¯Ø§ÙØ¹ Ù„Ù„ØªÙˆÙÙŠØ±"):r.push("ðŸ“Š Ø§Ø³ØªÙ…Ø± ÙÙŠ ØªØªØ¨Ø¹ Ù†ÙÙ‚Ø§ØªÙƒ Ø¹Ø´Ø§Ù† ØªÙÙ‡Ù… Ø¹Ø§Ø¯Ø§ØªÙƒ Ø§Ù„Ù…Ø§Ù„ÙŠØ©")),{streaks:f,achievements:c,motivationalMessage:r[Math.floor(Math.random()*r.length)]}},[t,s,n]);return a.streaks.length===0&&a.achievements.filter(g=>g.earned).length===0?null:e.jsxs(K,{children:[e.jsx(ne,{children:e.jsxs(le,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Le,{className:"h-5 w-5"}),"Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒ"]})}),e.jsxs(H,{className:"space-y-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-r from-purple-500/10 to-blue-500/10 border border-purple-500/20",children:e.jsx("p",{className:"text-sm text-center",children:a.motivationalMessage})}),a.streaks.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Ø§Ù„Ø³Ù„Ø§Ø³Ù„ Ø§Ù„Ù†Ø´Ø·Ø©"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.streaks.map((g,i)=>{const f=g.icon;return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-full bg-muted/50 border",children:[e.jsx(f,{className:R("h-4 w-4",g.color)}),e.jsx("span",{className:"text-sm font-medium",children:g.title})]},i)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.achievements.slice(0,4).map(g=>{const i=g.icon;return e.jsxs("div",{className:R("p-3 rounded-lg border transition-all",g.earned?"bg-muted/30":"bg-muted/10 opacity-50"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:R("p-2 rounded-full",g.earned?g.color:"bg-muted"),children:e.jsx(i,{className:R("h-4 w-4",g.earned?"text-white":"text-muted-foreground")})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:g.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:g.description})]})]}),!g.earned&&g.progress!==void 0&&e.jsx(_t,{value:g.progress,className:"h-1 mt-2"})]},g.id)})})]})]})]})}const It=["#22c55e","#3b82f6","#f59e0b","#ec4899","#8b5cf6","#14b8a6","#f43f5e","#eab308"],ha=({isActive:t,duration:s=3e3,particleCount:n=100,onComplete:a})=>{const[g,i]=l.useState([]),[f,d]=l.useState(!1),p=l.useCallback(()=>{const o=[];for(let y=0;y<n;y++)o.push({id:y,x:Math.random()*100,y:-10-Math.random()*20,color:It[Math.floor(Math.random()*It.length)],rotation:Math.random()*360,scale:.5+Math.random()*.5,speedX:(Math.random()-.5)*4,speedY:2+Math.random()*4,rotationSpeed:(Math.random()-.5)*10});return o},[n]);return l.useEffect(()=>{if(t){i(p()),d(!0);const o=setTimeout(()=>{d(!1),i([]),a?.()},s);return()=>clearTimeout(o)}},[t,s,p,a]),!f||g.length===0?null:e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[9999] overflow-hidden",children:[g.map(o=>e.jsx("div",{className:"absolute animate-confetti-fall",style:{left:`${o.x}%`,top:`${o.y}%`,transform:`rotate(${o.rotation}deg) scale(${o.scale})`,animation:`confetti-fall ${1.5+Math.random()}s ease-out forwards`,animationDelay:`${Math.random()*.5}s`},children:e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:o.color}})},o.id)),e.jsx("style",{children:`
        @keyframes confetti-fall {
          0% {
            transform: translateY(0) rotate(0deg) scale(var(--scale, 1));
            opacity: 1;
          }
          100% {
            transform: translateY(100vh) rotate(720deg) scale(var(--scale, 1));
            opacity: 0;
          }
        }
      `})]})},ga=({message:t,subMessage:s,emoji:n="ðŸŽ‰",isVisible:a,onClose:g})=>(l.useEffect(()=>{if(a&&g){const i=setTimeout(g,4e3);return()=>clearTimeout(i)}},[a,g]),a?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-[9998] pointer-events-none",children:[e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl \r
                   animate-bounce-in border-2 border-green-500/20\r
                   text-center max-w-sm mx-4`,children:[e.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:n}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:t}),s&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s})]}),e.jsx("style",{children:`
        @keyframes bounce-in {
          0% {
            transform: scale(0);
            opacity: 0;
          }
          50% {
            transform: scale(1.1);
          }
          100% {
            transform: scale(1);
            opacity: 1;
          }
        }
        .animate-bounce-in {
          animation: bounce-in 0.5s ease-out forwards;
        }
      `})]}):null),pa=()=>{const[t,s]=l.useState(!1),[n,a]=l.useState(null),g=l.useCallback((f,d,p)=>{s(!0),a({message:f,subMessage:d,emoji:p})},[]),i=l.useCallback(()=>{s(!1),a(null)},[]);return{showConfetti:t,celebrationMessage:n,celebrate:g,endCelebration:i,setShowConfetti:s,setCelebrationMessage:a}},Fe=l.forwardRef(({className:t,...s},n)=>e.jsx(Rt,{className:R("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:n,children:e.jsx(gs,{className:R("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Fe.displayName=Rt.displayName;const fa=[{value:"EGP",label:"Egyptian Pound",symbol:"Ø¬.Ù…"},{value:"USD",label:"US Dollar",symbol:"$"},{value:"EUR",label:"Euro",symbol:"â‚¬"},{value:"GBP",label:"British Pound",symbol:"Â£"},{value:"SAR",label:"Saudi Riyal",symbol:"Ø±.Ø³"},{value:"AED",label:"UAE Dirham",symbol:"Ø¯.Ø¥"},{value:"KWD",label:"Kuwaiti Dinar",symbol:"Ø¯.Ùƒ"}],ja=["#3b82f6","#22c55e","#ef4444","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#f97316","#14b8a6","#6366f1","#dc2626","#64748b","#10b981","#d946ef","#0ea5e9"],Na=["ðŸ ","âš¡","ðŸš—","ðŸ›’","ðŸ’Š","ðŸ›¡ï¸","ðŸ”","ðŸŽ®","ðŸ›ï¸","ðŸ‘”","ðŸ“š","ðŸŽ","âš½","âœˆï¸","ðŸ“±","ðŸ’‡","ðŸš¨","ðŸ“¦","ðŸ’°","ðŸŽµ","ðŸŽ¬","â˜•","ðŸ•","ðŸ‹ï¸","ðŸšŒ","ðŸ’»","ðŸŽ¨","ðŸŒ","ðŸ”§","ðŸ¥"],ba=({settings:t,categories:s,onUpdateSettings:n,onAddCategory:a,onUpdateCategory:g,onDeleteCategory:i})=>{const[f,d]=l.useState(!1),[p,o]=l.useState(null),[y,b]=l.useState({name:"",nameAr:"",icon:"ðŸ“¦",color:"#3b82f6",isEssential:!1}),M=()=>{y.name.trim()&&(p?g(p.id,{name:y.name,nameAr:y.nameAr,icon:y.icon,color:y.color,isEssential:y.isEssential}):a({name:y.name,nameAr:y.nameAr,icon:y.icon,color:y.color,isEssential:y.isEssential,isDefault:!1,order:s.length+1}),d(!1),o(null),b({name:"",nameAr:"",icon:"ðŸ“¦",color:"#3b82f6",isEssential:!1}))},c=r=>{o(r),b({name:r.name,nameAr:r.nameAr||"",icon:r.icon,color:r.color,isEssential:r.isEssential}),d(!0)},h=s.filter(r=>!r.isDefault),m=s.filter(r=>r.isDefault);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K,{className:"animate-fade-in-up",children:[e.jsxs(ne,{children:[e.jsxs(le,{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-5 w-5"}),"Currency Settings"]}),e.jsx(Ge,{children:"Configure your default currency and display options"})]}),e.jsx(H,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Default Currency"}),e.jsxs(Ce,{value:t.defaultCurrency,onValueChange:r=>n({defaultCurrency:r}),children:[e.jsx(De,{children:e.jsx(Se,{})}),e.jsx(Ae,{children:fa.map(r=>e.jsxs(se,{value:r.value,children:[r.symbol," ",r.label]},r.value))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(L,{children:"Show Cents"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Display decimal places in amounts"})]}),e.jsx(Fe,{checked:t.showCents,onCheckedChange:r=>n({showCents:r})})]})]})})]}),e.jsxs(K,{className:"animate-fade-in-up",children:[e.jsxs(ne,{children:[e.jsxs(le,{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5"}),"Date Settings"]}),e.jsx(Ge,{children:"Configure when your financial month starts"})]}),e.jsx(H,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Month Start Day"}),e.jsxs(Ce,{value:String(t.monthStartDay),onValueChange:r=>n({monthStartDay:parseInt(r)}),children:[e.jsx(De,{className:"w-full sm:w-48",children:e.jsx(Se,{})}),e.jsx(Ae,{children:Array.from({length:28},(r,x)=>x+1).map(r=>e.jsxs(se,{value:String(r),children:["Day ",r," of each month"]},r))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Set this to your salary day for more accurate monthly tracking"})]})})]}),e.jsxs(K,{className:"animate-fade-in-up",children:[e.jsxs(ne,{children:[e.jsxs(le,{className:"flex items-center gap-2",children:[e.jsx(zt,{className:"h-5 w-5"}),"Notification Settings"]}),e.jsx(Ge,{children:"Configure alerts and reminders"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(L,{children:"Budget Alerts"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get notified when approaching budget limits"})]}),e.jsx(Fe,{checked:t.enableBudgetAlerts,onCheckedChange:r=>n({enableBudgetAlerts:r})})]}),t.enableBudgetAlerts&&e.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-muted",children:[e.jsx(L,{children:"Warning Threshold"}),e.jsxs(Ce,{value:String(t.budgetWarningThreshold),onValueChange:r=>n({budgetWarningThreshold:parseInt(r)}),children:[e.jsx(De,{className:"w-full sm:w-48",children:e.jsx(Se,{})}),e.jsxs(Ae,{children:[e.jsx(se,{value:"50",children:"50% of budget"}),e.jsx(se,{value:"60",children:"60% of budget"}),e.jsx(se,{value:"70",children:"70% of budget"}),e.jsx(se,{value:"80",children:"80% of budget"}),e.jsx(se,{value:"90",children:"90% of budget"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(L,{children:"Installment Reminders"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get reminded before payment due dates"})]}),e.jsx(Fe,{checked:t.enableInstallmentReminders,onCheckedChange:r=>n({enableInstallmentReminders:r})})]}),t.enableInstallmentReminders&&e.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-muted",children:[e.jsx(L,{children:"Reminder Days Before"}),e.jsxs(Ce,{value:String(t.installmentReminderDays),onValueChange:r=>n({installmentReminderDays:parseInt(r)}),children:[e.jsx(De,{className:"w-full sm:w-48",children:e.jsx(Se,{})}),e.jsxs(Ae,{children:[e.jsx(se,{value:"1",children:"1 day before"}),e.jsx(se,{value:"2",children:"2 days before"}),e.jsx(se,{value:"3",children:"3 days before"}),e.jsx(se,{value:"5",children:"5 days before"}),e.jsx(se,{value:"7",children:"7 days before"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(L,{children:"Financial Insights"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Show smart spending analysis and tips"})]}),e.jsx(Fe,{checked:t.enableInsights,onCheckedChange:r=>n({enableInsights:r})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(L,{children:"Weekly Reports"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Show weekly spending summary"})]}),e.jsx(Fe,{checked:t.weeklyReportEnabled,onCheckedChange:r=>n({weeklyReportEnabled:r})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(L,{children:"Monthly Reports"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Show monthly spending summary"})]}),e.jsx(Fe,{checked:t.monthlyReportEnabled,onCheckedChange:r=>n({monthlyReportEnabled:r})})]})]})]}),e.jsxs(K,{className:"animate-fade-in-up",children:[e.jsxs(ne,{children:[e.jsxs(le,{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"h-5 w-5"}),"Expense Categories"]}),e.jsx(Ge,{children:"Manage your expense categories"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(L,{children:"Custom Categories"}),e.jsxs($,{size:"sm",onClick:()=>{o(null),b({name:"",nameAr:"",icon:"ðŸ“¦",color:"#3b82f6",isEssential:!1}),d(!0)},children:[e.jsx(Oe,{className:"h-4 w-4 mr-1"}),"Add Category"]})]}),h.length===0?e.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"No custom categories yet"}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:h.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{borderColor:r.color+"40"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-full flex items-center justify-center text-lg",style:{backgroundColor:r.color+"20"},children:r.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:r.name}),r.nameAr&&e.jsx("p",{className:"text-xs text-muted-foreground",children:r.nameAr})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>c(r),children:e.jsx(Es,{className:"h-4 w-4"})}),e.jsx($,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>i(r.id),children:e.jsx(me,{className:"h-4 w-4"})})]})]},r.id))})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[e.jsxs(L,{children:["Default Categories (",m.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:m.map(r=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-muted/50",children:[e.jsx("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-sm",style:{backgroundColor:r.color+"20"},children:r.icon}),e.jsx("span",{className:"text-xs font-medium truncate",children:r.name})]},r.id))})]})]})]}),e.jsx(Ie,{open:f,onOpenChange:d,children:e.jsxs(fe,{className:"sm:max-w-md",children:[e.jsx(je,{children:e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"h-5 w-5"}),p?"Edit Category":"Add Category"]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Name (English)"}),e.jsx(ae,{value:y.name,onChange:r=>b({...y,name:r.target.value}),placeholder:"e.g., Coffee"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Name (Arabic - Optional)"}),e.jsx(ae,{value:y.nameAr,onChange:r=>b({...y,nameAr:r.target.value}),placeholder:"e.g., Ù‚Ù‡ÙˆØ©",dir:"rtl"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Icon"}),e.jsx("div",{className:"grid grid-cols-10 gap-1",children:Na.map(r=>e.jsx("button",{type:"button",onClick:()=>b({...y,icon:r}),className:`w-8 h-8 rounded flex items-center justify-center text-lg hover:bg-muted transition-colors ${y.icon===r?"bg-primary/20 ring-2 ring-primary":""}`,children:r},r))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Color"}),e.jsx("div",{className:"grid grid-cols-8 gap-1",children:ja.map(r=>e.jsx("button",{type:"button",onClick:()=>b({...y,color:r}),className:`w-8 h-8 rounded-full transition-all ${y.color===r?"ring-2 ring-offset-2 ring-primary":""}`,style:{backgroundColor:r}},r))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(L,{children:"Essential Category"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Mark as essential/necessary expense"})]}),e.jsx(Fe,{checked:y.isEssential,onCheckedChange:r=>b({...y,isEssential:r})})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx(L,{className:"mb-2 block",children:"Preview"}),e.jsxs("div",{className:"inline-flex items-center gap-2 p-3 rounded-lg border",style:{borderColor:y.color+"40"},children:[e.jsx("span",{className:"w-10 h-10 rounded-full flex items-center justify-center text-xl",style:{backgroundColor:y.color+"20"},children:y.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:y.name||"Category Name"}),y.nameAr&&e.jsx("p",{className:"text-sm text-muted-foreground",children:y.nameAr})]})]})]})]}),e.jsxs(it,{children:[e.jsxs($,{variant:"outline",onClick:()=>d(!1),children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),"Cancel"]}),e.jsxs($,{onClick:M,disabled:!y.name.trim(),children:[e.jsx(qe,{className:"h-4 w-4 mr-1"}),p?"Save Changes":"Add Category"]})]})]})})]})},ya=({onImport:t,onExport:s,onReset:n})=>{const[a,g]=l.useState("idle"),[i,f]=l.useState(""),[d,p]=l.useState(!1),o=()=>{try{const c=s(),h=JSON.stringify(c,null,2),m=new Blob([h],{type:"application/json"}),r=URL.createObjectURL(m),x=document.createElement("a");x.href=r,x.download=`lifeos-finance-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(r)}catch{console.error("Export failed")}},y=()=>{try{const c=s(),h=[];c.expenses.forEach(A=>{const T=c.categories.find(G=>G.id===A.categoryId);h.push({type:"Expense",title:A.title,amount:-A.amount,category:T?.name||"Unknown",date:A.date,notes:A.notes||""})}),c.incomes.forEach(A=>{h.push({type:"Income",title:A.title,amount:A.amount,category:A.category||"Income",date:A.actualDate||A.expectedDate||A.createdAt,notes:A.notes||""})}),h.sort((A,T)=>new Date(T.date).getTime()-new Date(A.date).getTime());const r=[["Type","Title","Amount","Category","Date","Notes"].join(","),...h.map(A=>[A.type,`"${A.title.replace(/"/g,'""')}"`,A.amount,`"${A.category.replace(/"/g,'""')}"`,A.date,`"${A.notes.replace(/"/g,'""')}"`].join(","))].join(`
`),x=new Blob([r],{type:"text/csv;charset=utf-8;"}),S=URL.createObjectURL(x),E=document.createElement("a");E.href=S,E.download=`lifeos-finance-transactions-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(S)}catch{console.error("CSV export failed")}},b=c=>{const h=c.target.files?.[0];if(!h)return;const m=new FileReader;m.onload=r=>{try{const x=r.target?.result,S=JSON.parse(x);if(!S.incomes||!S.expenses||!S.categories)throw new Error("Invalid file structure");t(S),g("success"),f("Data imported successfully!"),setTimeout(()=>g("idle"),3e3)}catch{g("error"),f("Invalid file format. Please use a valid LifeOS Finance backup file."),setTimeout(()=>g("idle"),5e3)}},m.readAsText(h),c.target.value=""},M=()=>{n(),p(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(K,{className:"animate-fade-in-up",children:[e.jsxs(ne,{children:[e.jsxs(le,{className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"h-5 w-5"}),"Data Management"]}),e.jsx(Ge,{children:"Export, import, or reset your financial data"})]}),e.jsxs(H,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Export Data"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Download your financial data for backup or use in other applications."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:o,className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Export JSON"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:y,className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"h-4 w-4"}),"Export CSV"]})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsx("h3",{className:"font-medium text-sm text-foreground",children:"Import Data"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Restore from a previous backup (JSON format only). This will replace your current data."}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:".json",onChange:b,className:"hidden"}),e.jsx($,{variant:"outline",size:"sm",className:"flex items-center gap-2 w-full sm:w-auto",asChild:!0,children:e.jsxs("span",{children:[e.jsx($s,{className:"h-4 w-4"}),"Import from JSON"]})})]}),a==="success"&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm animate-fade-in",children:[e.jsx(Ze,{className:"h-4 w-4"}),i]}),a==="error"&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm animate-fade-in",children:[e.jsx(gt,{className:"h-4 w-4"}),i]})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsx("h3",{className:"font-medium text-sm text-foreground text-destructive",children:"Danger Zone"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Reset all financial data. This action cannot be undone."}),e.jsxs($,{variant:"destructive",size:"sm",onClick:()=>p(!0),className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),"Reset All Data"]})]})]})]}),e.jsx(Ie,{open:d,onOpenChange:p,children:e.jsxs(fe,{className:"sm:max-w-md",children:[e.jsx(je,{children:e.jsxs(Ne,{className:"flex items-center gap-2 text-destructive",children:[e.jsx(gt,{className:"h-5 w-5"}),"Confirm Reset"]})}),e.jsxs("div",{className:"py-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Are you sure you want to reset all financial data? This will permanently delete:"}),e.jsxs("ul",{className:"mt-3 text-sm space-y-1 text-muted-foreground list-disc list-inside",children:[e.jsx("li",{children:"All income records"}),e.jsx("li",{children:"All expense records"}),e.jsx("li",{children:"All installments"}),e.jsx("li",{children:"All budgets"}),e.jsx("li",{children:"All financial goals"}),e.jsx("li",{children:"Custom categories"})]}),e.jsx("p",{className:"mt-4 text-sm font-medium text-destructive",children:"This action cannot be undone."})]}),e.jsxs(it,{className:"gap-2 sm:gap-0",children:[e.jsx($,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx($,{variant:"destructive",onClick:M,children:"Yes, Reset Everything"})]})]})})]})},Ta=()=>{const{incomes:t,expenses:s,categories:n,installments:a,goals:g,alerts:i,settings:f,getMonthlyStats:d,getCategorySpending:p,getRecentTransactions:o,getOrCreateBudget:y,formatCurrency:b,quickAddExpense:M,addExpense:c,deleteExpense:h,addIncome:m,deleteIncome:r,addInstallment:x,updateInstallment:S,deleteInstallment:E,addInstallmentPayment:A,addGoal:T,updateGoal:G,deleteGoal:W,addGoalContribution:_,updateBudget:Q,dismissAlert:X,updateSettings:D,addCategory:I,updateCategory:w,deleteCategory:B,exportData:V,importData:re,resetData:ue}=Vs(),{showConfetti:be,celebrationMessage:ce,celebrate:he,endCelebration:ye,setShowConfetti:N,setCelebrationMessage:v}=pa(),[j,k]=l.useState(!1),[u,F]=l.useState(!1),[C,z]=l.useState(!1),[P,ee]=l.useState(!1),[J,O]=l.useState(!1),[q,de]=l.useState(!1),[Me,xe]=l.useState(null),[ie,oe]=l.useState(null),[Pe,Ee]=l.useState(null),[et,Te]=l.useState("overview"),[_e,tt]=l.useState(()=>{const te=localStorage.getItem("lifeos-celebrated-goals");return te?new Set(JSON.parse(te)):new Set}),ct=l.useMemo(()=>d(),[d]),st=l.useMemo(()=>p(),[p]),dt=l.useMemo(()=>o(5),[o]),Y=new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),Z=l.useMemo(()=>y(),[y]),Kt=l.useMemo(()=>a.filter(te=>te.status==="active"),[a]);l.useEffect(()=>{const We=g.filter(ge=>ge.currentAmount>=ge.targetAmount).find(ge=>!_e.has(ge.id));if(We){he("Goal Achieved! ðŸŽ¯",`You reached your "${We.title}" goal!`,"ðŸ†");const ge=new Set(_e);ge.add(We.id),tt(ge),localStorage.setItem("lifeos-celebrated-goals",JSON.stringify([...ge]))}},[g,_e,he]);const Ht=l.useMemo(()=>g.filter(te=>te.status==="active"),[g]),Qt=te=>{Me?S(Me.id,te):x(te),xe(null)},Xt=te=>{Pe?G(Pe.id,te):T(te),Ee(null)},Zt=te=>{Z&&Q(Z.id,{categoryBudgets:te})};return e.jsxs("div",{className:"space-y-4 sm:space-y-6 pb-20 lg:pb-6",children:[e.jsx(ha,{isActive:be,onComplete:ye}),e.jsx(ga,{isVisible:!!ce,message:ce?.message||"",subMessage:ce?.subMessage,emoji:ce?.emoji,onClose:()=>{N(!1),v(null)}}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between animate-fade-in-up",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(Ye,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary"}),"Finance"]}),e.jsxs("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:[Y," Overview"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:()=>z(!0),className:"flex-1 sm:flex-none",children:[e.jsx(Re,{className:"h-4 w-4 mr-1 text-green-500"}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})," Income"]}),e.jsxs($,{size:"sm",onClick:()=>F(!0),className:"flex-1 sm:flex-none",children:[e.jsx(Oe,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})," Expense"]})]})]}),i.length>0&&e.jsx(ta,{alerts:i,onDismiss:X}),e.jsx(Us,{stats:ct,formatCurrency:b}),e.jsxs(Pt,{value:et,onValueChange:Te,className:"w-full",children:[e.jsxs(Bt,{className:"w-full grid grid-cols-5 h-auto p-1",children:[e.jsxs(ve,{value:"overview",className:"text-xs sm:text-sm py-2 px-1 sm:px-3 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(Yt,{className:"h-4 w-4 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),e.jsxs(ve,{value:"transactions",className:"text-xs sm:text-sm py-2 px-1 sm:px-3 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(vt,{className:"h-4 w-4 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Transactions"})]}),e.jsxs(ve,{value:"installments",className:"text-xs sm:text-sm py-2 px-1 sm:px-3 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(He,{className:"h-4 w-4 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Installments"})]}),e.jsxs(ve,{value:"goals",className:"text-xs sm:text-sm py-2 px-1 sm:px-3 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(ke,{className:"h-4 w-4 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Goals"})]}),e.jsxs(ve,{value:"settings",className:"text-xs sm:text-sm py-2 px-1 sm:px-3 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[e.jsx(Lt,{className:"h-4 w-4 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]}),e.jsxs(we,{value:"overview",className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(sa,{incomes:t,expenses:s,formatCurrency:b}),e.jsx(aa,{expenses:s,categories:n,formatCurrency:b,period:"month"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(ca,{budget:Z,categories:n,formatCurrency:b,onSaveBudget:Zt}),e.jsxs(K,{children:[e.jsxs(ne,{className:"pb-2",children:[e.jsxs(le,{className:"text-base sm:text-lg flex items-center gap-2",children:[e.jsx(wt,{className:"h-4 w-4 text-primary"}),"Spending by Category"]}),e.jsx(Ge,{children:"Where your money goes"})]}),e.jsx(H,{children:e.jsx(Qs,{categorySpending:st,formatCurrency:b})})]})]}),e.jsxs(K,{children:[e.jsx(ne,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(le,{className:"text-base sm:text-lg flex items-center gap-2",children:[e.jsx(vt,{className:"h-4 w-4 text-primary"}),"Recent Transactions"]}),e.jsx(Ge,{children:"Your latest activity"})]}),e.jsxs($,{variant:"ghost",size:"sm",onClick:()=>Te("transactions"),className:"text-xs",children:["View All",e.jsx(nt,{className:"h-4 w-4 ml-1"})]})]})}),e.jsx(H,{children:e.jsx(St,{transactions:dt,formatCurrency:b,compact:!0})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(K,{className:"cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>Te("installments"),children:e.jsx(H,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-500/10",children:e.jsx(He,{className:"h-5 w-5 text-orange-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active Installments"}),e.jsx("p",{className:"text-lg font-bold",children:Kt.length})]}),e.jsx(nt,{className:"h-4 w-4 text-muted-foreground"})]})})}),e.jsx(K,{className:"cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>Te("goals"),children:e.jsx(H,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(ke,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active Goals"}),e.jsx("p",{className:"text-lg font-bold",children:Ht.length})]}),e.jsx(nt,{className:"h-4 w-4 text-muted-foreground"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(da,{incomes:t,expenses:s,categories:n,goals:g,budgets:Z?[Z]:[],formatCurrency:b}),e.jsx(ma,{incomes:t,expenses:s,formatCurrency:b})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(ua,{incomes:t,expenses:s,categories:n,formatCurrency:b}),e.jsx(xa,{expenses:s,budgets:Z?[Z]:[],goals:g})]})]}),e.jsx(we,{value:"transactions",className:"mt-4",children:e.jsxs(K,{children:[e.jsx(ne,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(le,{className:"text-base sm:text-lg",children:"All Transactions"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs($,{variant:"outline",size:"sm",children:[e.jsx(wt,{className:"h-4 w-4 mr-1"}),"Filter"]})})]})}),e.jsx(H,{children:e.jsx(St,{transactions:o(50),formatCurrency:b,onDeleteIncome:r,onDeleteExpense:h})})]})}),e.jsxs(we,{value:"installments",className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Installments"}),e.jsxs($,{size:"sm",onClick:()=>{xe(null),ee(!0)},children:[e.jsx(Oe,{className:"h-4 w-4 mr-1"}),"Add Installment"]})]}),e.jsx(ea,{installments:a,formatCurrency:b,onEdit:te=>{xe(te),ee(!0)},onDelete:E,onPayInstallment:te=>{const We=a.find(ge=>ge.id===te);We&&(oe(We),O(!0))}})]}),e.jsxs(we,{value:"goals",className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Financial Goals"}),e.jsxs($,{size:"sm",onClick:()=>{Ee(null),de(!0)},children:[e.jsx(Oe,{className:"h-4 w-4 mr-1"}),"Add Goal"]})]}),e.jsx(Zs,{goals:g,formatCurrency:b,onEdit:te=>{Ee(te),de(!0)},onDelete:W,onContribute:_})]}),e.jsxs(we,{value:"settings",className:"mt-4 space-y-4",children:[e.jsx(ba,{settings:f,categories:n,onUpdateSettings:D,onAddCategory:I,onUpdateCategory:w,onDeleteCategory:B}),e.jsx(ya,{onExport:V,onImport:re,onReset:ue})]})]}),e.jsx("button",{onClick:()=>k(!0),className:"lg:hidden fixed bottom-20 right-4 z-50 w-14 h-14 rounded-full bg-primary text-primary-foreground shadow-lg flex items-center justify-center hover:bg-primary/90 active:scale-95 transition-all","aria-label":"Quick add expense",children:e.jsx(Oe,{className:"h-6 w-6"})}),e.jsx(_s,{isOpen:j,onClose:()=>k(!1),categories:n,onAdd:M}),e.jsx(Js,{isOpen:u,onClose:()=>F(!1),categories:n,onSave:c,defaultCurrency:f.defaultCurrency}),e.jsx(Ks,{isOpen:C,onClose:()=>z(!1),onSave:m,defaultCurrency:f.defaultCurrency}),e.jsx(ra,{isOpen:P,onClose:()=>{ee(!1),xe(null)},onSave:Qt,installment:Me}),e.jsx(ia,{isOpen:J,onClose:()=>{O(!1),oe(null)},installment:ie,onPay:A,formatCurrency:b}),e.jsx(oa,{isOpen:q,onClose:()=>{de(!1),Ee(null)},onSave:Xt,goal:Pe})]})};export{Ta as Finance,Ta as default};
