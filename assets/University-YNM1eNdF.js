import{j as e}from"./radix-ui-q4KaMQ3n.js";import{r as v,u as we}from"./router-Ba52I8Mc.js";import{K as Te,a as ne,D as le,b as oe,c as de,d as V,e as ce}from"./KanbanCard-zyX2mgxG.js";import{L as Ce,a as Se}from"./ListCard-D_hxjvAQ.js";import{C as w,a as T,b as A,c as I,d as ke}from"./Card-BOBbUquv.js";import{u as re,M as ge,d as p,h as De,e as F,B as O,b as se,S as Me,i as te,f as ae,j as me}from"./index-FKt_UJHc.js";import{P as ue}from"./progress-CVcbiXNi.js";import{T as Ee,a as Ae,b as Y,c as W}from"./tabs-IDjwLZ54.js";import{S as Ie,T as $e}from"./TaskModal-C8RHGGxr.js";import{F as L,a as P}from"./TextArea-knNelttm.js";import{n as X,r as Le,s as _,P as $,t as B,G as Pe,o as xe,u as Oe,q as ze,C as He,m as J,v as Be,p as he,w as Fe,x as Re,E as je}from"./utils-BXZcBnh9.js";import"./react-vendor-pR2cKLDH.js";import"./dnd-kit-DHe5TpGb.js";import"./charts-CDhWM7dn.js";const Ue=({isOpen:j,onClose:t,exam:l})=>{const{data:f,updateData:y,showToast:a}=re(),[i,d]=v.useState({subjectId:"",title:"",date:new Date().toISOString().split("T")[0],duration:120,location:"",grade:void 0});v.useEffect(()=>{d(l?{subjectId:l.subjectId,title:l.title,date:l.date,duration:l.duration,location:l.location||"",grade:l.grade}:{subjectId:"",title:"",date:new Date().toISOString().split("T")[0],duration:120,location:"",grade:void 0})},[l,j]);const n=g=>{const{name:h,value:N}=g.target;d(C=>({...C,[h]:h==="duration"||h==="grade"?Number(N):N}))},x=g=>{if(g.preventDefault(),!i.title||!i.subjectId||!i.date){a("Please fill in required fields","error");return}if(l){const h=f.university.exams.map(N=>N.id===l.id?{...l,...i}:N);y({university:{...f.university,exams:h}}),a("Exam updated successfully!","success")}else{const h={...i,id:De()};y({university:{...f.university,exams:[...f.university.exams,h]}}),a("Exam added successfully!","success")}t()};return e.jsx(ge,{isOpen:j,onClose:t,title:l?"Edit Exam":"Add New Exam",footer:e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"secondary",onClick:t,children:"Cancel"}),e.jsxs(p,{variant:"default",onClick:x,children:[l?"Update":"Add"," Exam"]})]}),children:e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsx(L,{label:"Subject *",name:"subjectId",value:i.subjectId,onChange:n,options:[{value:"",label:"Select a subject"},...f.university.subjects.map(g=>({value:g.id,label:g.name}))],required:!0}),e.jsx(P,{label:"Exam Title *",name:"title",value:i.title,onChange:n,placeholder:"e.g., Midterm Exam",required:!0}),e.jsx(P,{label:"Date *",name:"date",type:"date",value:i.date,onChange:n,required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(P,{label:"Duration (minutes)",name:"duration",type:"number",min:"30",max:"300",value:i.duration,onChange:n}),e.jsx(P,{label:"Grade (optional)",name:"grade",type:"number",min:"0",max:"100",value:i.grade||"",onChange:n,placeholder:"e.g., 95"})]}),e.jsx(P,{label:"Location",name:"location",value:i.location,onChange:n,placeholder:"e.g., Room 301, Building A"})]})})},qe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],q=[{hour:8,display:"08:00 - 10:00"},{hour:10,display:"10:00 - 12:00"},{hour:12,display:"12:00 - 2:00"},{hour:14,display:"2:00 - 4:00"},{hour:16,display:"4:00 - 6:00"}],Q=j=>{const[t,l]=j.split(":").map(Number);return t+l/60},_e=({subjects:j,onEditSchedule:t})=>{const l=v.useMemo(()=>{const a={};return j.forEach(i=>{i.lectures?.forEach(d=>{a[d.day]||(a[d.day]=[]);const n=Q(d.startTime),x=Q(d.endTime),g=x-n;a[d.day].push({subject:i,entry:d,type:"lecture",startHour:n,endHour:x,duration:g})}),i.sections?.forEach(d=>{a[d.day]||(a[d.day]=[]);const n=Q(d.startTime),x=Q(d.endTime),g=x-n;a[d.day].push({subject:i,entry:d,type:"section",startHour:n,endHour:x,duration:g})})}),a},[j]),f=(a,i)=>{const d=q.findIndex(h=>h.hour===Math.floor(a));let n=q.findIndex(h=>h.hour>=Math.ceil(i));n===-1&&(n=q.length);const x=d+2,g=Math.max(1,n-d);return{start:x,span:g}},y=j.some(a=>a.lectures&&a.lectures.length>0||a.sections&&a.sections.length>0);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(w,{className:"p-0",dir:"ltr",children:y?e.jsx(w,{className:"h-ful p-0",children:e.jsx(T,{className:"p-0 m-0",children:e.jsx("div",{className:"overflow-x-auto overflow-y-hidden h-full",children:e.jsxs("div",{className:"min-w-[1000px]",children:[e.jsxs("div",{className:"grid grid-cols-[120px_repeat(5,1fr)] border-b",children:[e.jsx("div",{className:"p-3 font-semibold border-r bg-muted/50",children:"Day / Time"}),q.map(a=>e.jsx("div",{className:"p-2 text-center items-center justify-center pt-3 text-base font-medium border-r last:border-r-0 bg-muted/50",children:a.display},a.hour))]}),qe.map(a=>{const i=l[a]||[],d=i.length>0;return e.jsxs("div",{className:F("grid grid-cols-[120px_repeat(5,1fr)] border-b last:border-b-0 relative",d?"min-h-[120px]":"min-h-[20px]"),children:[e.jsx("div",{className:F("p-3 font-medium border-r bg-muted/30 flex items-center",d?"text-primary":"text-muted-foreground"),children:a}),q.map(n=>e.jsx("div",{className:"border-r last:border-r-0"},`${a}-${n.hour}-bg`)),i.map((n,x)=>{const{start:g,span:h}=f(n.startHour,n.endHour),N=n.type==="lecture",C=n.subject.color;return e.jsxs("div",{className:F("absolute rounded-lg p-3 text-base cursor-pointer transition-all hover:shadow-lg hover:z-10","border-2 flex flex-col justify-center"),style:{gridColumn:`${g} / span ${h}`,backgroundColor:N?`${C}80`:`${C}20`,borderColor:C,top:"8px",bottom:"8px",left:"4px",right:"4px"},onClick:()=>t(n.subject.id),children:[e.jsx("div",{className:"font-semibold truncate text-[14px]",children:n.subject.name}),e.jsx("div",{className:"text-[12px] font-[700] opacity-100 truncate mt-0.5",children:N?"Lecture":"Section"}),N&&n.subject.professor&&e.jsx("div",{className:"text-[10px] opacity-100 truncate my-0.5",children:n.subject.professor}),n.entry.location&&e.jsxs("div",{className:"flex items-center gap-1 mt-0.5 text-[12px] font-medium opacity-70",children:[e.jsx(Le,{className:"w-3 h-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:n.entry.location})]})]},`${n.subject.id}-${n.type}-${x}`)})]},a)})]})})})}):e.jsx(T,{className:"py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(X,{className:"w-12 h-12 mx-auto text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Schedule Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add lecture and section times to your subjects to see your timetable"}),e.jsx("p",{className:"text-sm text-primary",children:'Scroll down to "Manage Schedules" section and click "Add Schedule" on any subject'})]})]})})}),e.jsxs(w,{children:[e.jsx(A,{children:e.jsx(I,{className:"text-lg",children:"Manage Schedules"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3",children:[j.map(a=>{const i=a.lectures&&a.lectures.length>0,d=a.sections&&a.sections.length>0;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:a.color}}),e.jsx("span",{className:"font-medium",children:a.name})]}),e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-4 mt-1",children:[i&&e.jsx("span",{className:"flex items-center gap-1",children:e.jsxs(O,{variant:"outline",style:{borderColor:a.color,color:a.color},children:[a.lectures.length," ","Lecture",a.lectures.length!==1?"s":""]})}),d&&e.jsx("span",{className:"flex items-center gap-1",children:e.jsxs(O,{variant:"outline",style:{borderColor:a.color,color:a.color,opacity:.8},children:[a.sections.length," ","Section",a.sections.length!==1?"s":""]})}),!i&&!d&&e.jsx("span",{className:"text-muted-foreground",children:"No schedule set"})]})]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>t(a.id),children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),i||d?"Edit":"Add"," ","Schedule"]})]},a.id)}),j.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No subjects yet. Add a subject first to create a schedule."})]})})]})]})},pe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ge=()=>{const j=[];for(let t=8;t<=18;t++)for(let l=0;l<60;l+=30){const f=`${t.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`,y=t>12?t-12:t===0?12:t,a=t>=12?"PM":"AM",i=`${y}:${l.toString().padStart(2,"0")} ${a}`;j.push({value:f,label:i})}return j},Ke=({isOpen:j,onClose:t,subject:l})=>{const{data:f,updateData:y,showToast:a}=re(),[i,d]=v.useState([]),[n,x]=v.useState([]);v.useEffect(()=>{l&&j?(d(l.lectures||[]),x(l.sections||[])):l||(d([]),x([]))},[l,j]);const g=()=>{d([...i,{day:"Monday",startTime:"09:00",endTime:"10:30",location:""}])},h=()=>{x([...n,{day:"Monday",startTime:"14:00",endTime:"15:30",location:""}])},N=u=>{d(i.filter((c,o)=>o!==u))},C=u=>{x(n.filter((c,o)=>o!==u))},z=(u,c,o)=>{const S=[...i];S[u]={...S[u],[c]:o},d(S)},E=(u,c,o)=>{const S=[...n];S[u]={...S[u],[c]:o},x(S)},Z=()=>{const u=[...i,...n];for(const c of u){const[o,S]=c.startTime.split(":").map(Number),[U,M]=c.endTime.split(":").map(Number),ee=o*60+S,G=U*60+M;if(ee>=G)return a("End time must be after start time","error"),!1}return!0},R=u=>{if(u.preventDefault(),!l){a("No subject selected","error");return}if(!Z())return;const c={...l,lectures:i.length>0?i:void 0,sections:n.length>0?n:void 0};y({university:{...f.university,subjects:f.university.subjects.map(o=>o.id===l.id?c:o)}}),a("Schedule updated successfully!","success"),t()},H=Ge();return e.jsx(ge,{isOpen:j,onClose:t,title:`Edit Schedule - ${l?.name||""}`,footer:e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"secondary",onClick:t,children:"Cancel"}),e.jsx(p,{variant:"default",onClick:R,children:"Save Schedule"})]}),children:e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold flex items-center gap-2",children:e.jsx(O,{variant:"outline",className:"text-blue-500 border-blue-500",children:"Lectures"})}),e.jsxs(p,{type:"button",variant:"outline",size:"sm",onClick:g,children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Add Lecture"]})]}),i.length===0&&e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4 border rounded-lg",children:'No lectures scheduled. Click "Add Lecture" to add one.'}),i.map((u,c)=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-3 bg-blue-500/5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Lecture ",c+1]}),e.jsx(p,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(c),children:e.jsx(B,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(L,{label:"Day",name:`lecture-day-${c}`,value:u.day,onChange:o=>z(c,"day",o.target.value),options:pe.map(o=>({value:o,label:o}))}),e.jsx(P,{label:"Location",name:`lecture-location-${c}`,value:u.location,onChange:o=>z(c,"location",o.target.value),placeholder:"e.g., Room 101"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(L,{label:"Start Time",name:`lecture-start-${c}`,value:u.startTime,onChange:o=>z(c,"startTime",o.target.value),options:H}),e.jsx(L,{label:"End Time",name:`lecture-end-${c}`,value:u.endTime,onChange:o=>z(c,"endTime",o.target.value),options:H})]})]},`lecture-${c}`))]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold flex items-center gap-2",children:e.jsx(O,{variant:"outline",className:"text-green-500 border-green-500",children:"Sections"})}),e.jsxs(p,{type:"button",variant:"outline",size:"sm",onClick:h,children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Add Section"]})]}),n.length===0&&e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4 border rounded-lg",children:'No sections scheduled. Click "Add Section" to add one.'}),n.map((u,c)=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-3 bg-green-500/5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Section ",c+1]}),e.jsx(p,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(c),children:e.jsx(B,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(L,{label:"Day",name:`section-day-${c}`,value:u.day,onChange:o=>E(c,"day",o.target.value),options:pe.map(o=>({value:o,label:o}))}),e.jsx(P,{label:"Location",name:`section-location-${c}`,value:u.location,onChange:o=>E(c,"location",o.target.value),placeholder:"e.g., Lab 203"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(L,{label:"Start Time",name:`section-start-${c}`,value:u.startTime,onChange:o=>E(c,"startTime",o.target.value),options:H}),e.jsx(L,{label:"End Time",name:`section-end-${c}`,value:u.endTime,onChange:o=>E(c,"endTime",o.target.value),options:H})]})]},`section-${c}`))]})]})})},ls=()=>{const j=we(),{data:t,updateData:l,showToast:f}=re(),[y,a]=v.useState("tasks"),[i,d]=v.useState("kanban"),[n,x]=v.useState(!1),[g,h]=v.useState(!1),[N,C]=v.useState(!1),[z,E]=v.useState(!1),[Z,R]=v.useState(void 0),[H,u]=v.useState(void 0),[c,o]=v.useState(void 0),[S,U]=v.useState(void 0),M=v.useMemo(()=>{const s=t.university.tasks.length,r=t.university.tasks.filter(D=>D.status==="done").length,m=t.university.tasks.filter(D=>D.status==="in-progress").length,b=t.university.tasks.filter(D=>D.status==="todo").length,k=t.university.exams.filter(D=>se(D.date)>=0&&se(D.date)<=7).length;return{totalTasks:s,completedTasks:r,inProgressTasks:m,todoTasks:b,upcomingExams:k,completionRate:s>0?Math.round(r/s*100):0}},[t.university.tasks,t.university.exams]),ee=s=>{confirm("Delete this subject and all related tasks?")&&(l({university:{...t.university,subjects:t.university.subjects.filter(r=>r.id!==s),tasks:t.university.tasks.filter(r=>r.subjectId!==s),exams:t.university.exams.filter(r=>r.subjectId!==s)}}),f("Subject deleted successfully","success"))},G=s=>{confirm("Delete this task?")&&(l({university:{...t.university,tasks:t.university.tasks.filter(r=>r.id!==s)}}),f("Task deleted successfully","success"))},fe=s=>{confirm("Delete this exam?")&&(l({university:{...t.university,exams:t.university.exams.filter(r=>r.id!==s)}}),f("Exam deleted successfully","success"))},K=(s,r)=>{l({university:{...t.university,tasks:t.university.tasks.map(m=>m.id===s.id?{...m,status:r}:m)}}),f("Task status updated","success")},ve=s=>{switch(s){case"done":return"secondary";case"in-progress":return"default";default:return"outline"}},ie=s=>{const r=t.university.subjects.find(b=>b.id===s.subjectId),m=[];return m.push({label:`Priority ${s.priority}`,variant:me(s.priority)}),r&&m.push({label:r.name,variant:"outline"}),s.dueDate&&m.push({label:ae(new Date(s.dueDate)),variant:te(s.dueDate)?"destructive":"outline",icon:e.jsx(X,{className:"h-3 w-3"})}),m},be=s=>{const r=[{label:"Edit",icon:e.jsx(_,{className:"h-4 w-4"}),onClick:()=>{u(s),h(!0)}}];return s.status!=="todo"&&r.push({label:"Move to To Do",onClick:()=>K(s,"todo")}),s.status!=="in-progress"&&r.push({label:"Move to In Progress",onClick:()=>K(s,"in-progress")}),s.status!=="done"&&r.push({label:"Move to Done",onClick:()=>K(s,"done")}),r.push({label:"Delete",icon:e.jsx(B,{className:"h-4 w-4"}),onClick:()=>G(s.id),variant:"destructive",separator:!0}),r},ye=s=>{const r=t.university.subjects.find(b=>b.id===s.subjectId),m=[];return m.push({label:s.status,variant:ve(s.status)}),m.push({label:`Priority ${s.priority}`,variant:me(s.priority)}),r&&m.push({label:r.name,variant:"outline"}),s.dueDate&&m.push({label:`Due: ${ae(new Date(s.dueDate))}`,variant:te(s.dueDate)?"destructive":"outline",icon:e.jsx(X,{className:"h-3 w-3"})}),m},Ne=[{id:"todo",title:"To Do",tasks:t.university.tasks.filter(s=>s.status==="todo"),color:"from-blue-500 to-cyan-500"},{id:"in-progress",title:"In Progress",tasks:t.university.tasks.filter(s=>s.status==="in-progress"),color:"from-yellow-500 to-orange-500"},{id:"done",title:"Done",tasks:t.university.tasks.filter(s=>s.status==="done"),color:"from-green-500 to-emerald-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold tracking-tight flex items-center gap-3 text-foreground",children:[e.jsx(Pe,{className:"h-10 w-10"}),"University"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your courses, tasks, and exams"})]})}),e.jsx(Me,{}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[e.jsxs(w,{children:[e.jsxs(A,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Total Tasks"}),e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:M.totalTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all subjects"})]})]}),e.jsxs(w,{children:[e.jsxs(A,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Completed"}),e.jsx(Oe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:M.completedTasks}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[M.completionRate,"% completion"]}),e.jsx(ue,{value:M.completionRate,className:"mt-2"})]})]}),e.jsxs(w,{children:[e.jsxs(A,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"In Progress"}),e.jsx(ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:M.inProgressTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently working on"})]})]}),e.jsxs(w,{children:[e.jsxs(A,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"To Do"}),e.jsx(He,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:M.todoTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending tasks"})]})]}),e.jsxs(w,{children:[e.jsxs(A,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Upcoming Exams"}),e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:M.upcomingExams}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Next 7 days"})]})]})]}),e.jsxs(Ee,{value:y,onValueChange:s=>a(s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ae,{children:[e.jsxs(Y,{value:"tasks",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Tasks"]}),e.jsxs(Y,{value:"subjects",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Subjects"]}),e.jsxs(Y,{value:"exams",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Exams"]}),e.jsxs(Y,{value:"timetable",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Timetable"]})]}),y==="tasks"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{variant:i==="kanban"?"secondary":"ghost",size:"sm",onClick:()=>d("kanban"),"aria-label":"Kanban view",className:F("text-primary",i==="kanban"&&"bg-primary/10 text-primary hover:bg-primary/20"),children:e.jsx(Fe,{className:"h-4 w-4"})}),e.jsx(p,{variant:i==="list"?"secondary":"ghost",size:"sm",onClick:()=>d("list"),"aria-label":"List view",className:F("text-primary",i==="list"&&"bg-primary/10 hover:bg-primary/20"),children:e.jsx(Re,{className:"h-4 w-4"})}),e.jsxs(p,{onClick:()=>h(!0),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Add Task"]})]}),y==="subjects"&&e.jsxs(p,{onClick:()=>x(!0),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Add Subject"]}),y==="exams"&&e.jsxs(p,{onClick:()=>C(!0),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Add Exam"]})]}),e.jsx(W,{value:"tasks",className:"space-y-4",children:t.university.tasks.length===0?e.jsx(w,{children:e.jsxs(T,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(xe,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:"No tasks yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first task to get started"}),e.jsxs(p,{onClick:()=>h(!0),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Add Task"]})]})}):i==="kanban"?e.jsx(Te,{columns:Ne.map(s=>({id:s.id,title:s.title,items:s.tasks,color:s.color})),getItemId:s=>s.id,onDragEnd:(s,r)=>{const m=t.university.tasks.find(b=>b.id===s);m&&K(m,r)},renderItem:s=>e.jsx(ne,{id:s.id,title:s.title,description:s.description,badges:ie(s),actions:be(s)}),dragOverlay:s=>e.jsx(ne,{id:s.id,title:s.title,description:s.description,badges:ie(s),actions:[]})}):e.jsx(Ce,{items:t.university.tasks,getItemId:s=>s.id,emptyMessage:"No tasks yet. Create your first task to get started.",renderItem:s=>e.jsx(Se,{title:s.title,description:s.description,badges:ye(s),actions:[{icon:e.jsx(_,{className:"h-4 w-4"}),onClick:()=>{u(s),h(!0)},label:"Edit"},{icon:e.jsx(B,{className:"h-4 w-4"}),onClick:()=>G(s.id),variant:"destructive",label:"Delete"}]})})}),e.jsx(W,{value:"subjects",className:"space-y-4",children:t.university.subjects.length===0?e.jsx(w,{children:e.jsxs(T,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(he,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:"No subjects yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add your first subject to organize your courses"}),e.jsxs(p,{onClick:()=>x(!0),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Add Subject"]})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.university.subjects.map(s=>{const r=t.university.tasks.filter(k=>k.subjectId===s.id),m=r.filter(k=>k.status==="done").length,b=r.length>0?Math.round(m/r.length*100):0;return e.jsxs(w,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>j(`/university/subject/${s.id}`),children:[e.jsx(A,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("div",{children:e.jsx(I,{children:s.name})})]}),e.jsx("div",{onClick:k=>k.stopPropagation(),children:e.jsxs(le,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon-sm",children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsxs(de,{align:"end",children:[e.jsxs(V,{onClick:()=>{R(s),x(!0)},children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(ce,{}),e.jsxs(V,{onClick:()=>ee(s.id),className:"text-destructive",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]})}),e.jsxs(T,{children:[s.professor&&e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Prof. ",s.professor]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress"}),e.jsxs("span",{className:"font-medium",children:[b,"%"]})]}),e.jsx(ue,{value:b}),e.jsxs("div",{className:"flex items-center justify-between text-sm pt-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tasks"}),e.jsxs("span",{className:"font-medium",children:[m," /"," ",r.length]})]})]})]})]},s.id)})})}),e.jsx(W,{value:"exams",className:"space-y-4",children:t.university.exams.length===0?e.jsx(w,{children:e.jsxs(T,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(J,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:"No exams scheduled"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add your exam dates to stay prepared"}),e.jsxs(p,{onClick:()=>C(!0),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Add Exam"]})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:t.university.exams.sort((s,r)=>new Date(s.date).getTime()-new Date(r.date).getTime()).map(s=>{const r=t.university.subjects.find(D=>D.id===s.subjectId),m=se(s.date),b=te(s.date),k=m<0;return e.jsxs(w,{className:F("hover:shadow-lg transition-shadow",b&&"border-destructive border-2"),children:[e.jsx(A,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(I,{children:s.title}),r&&e.jsx(ke,{children:r.name})]}),e.jsxs(le,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon-sm",children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsxs(de,{align:"end",children:[e.jsxs(V,{onClick:()=>{o(s),C(!0)},children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(ce,{}),e.jsxs(V,{onClick:()=>fe(s.id),className:"text-destructive",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})}),e.jsxs(T,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(J,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:ae(new Date(s.date))})]}),s.location&&e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:e.jsxs("span",{children:["üìç ",s.location]})}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[b&&e.jsx(O,{variant:"destructive",children:"TODAY"}),!k&&!b&&m<=7&&e.jsxs(O,{variant:"default",children:["In ",m," ","day",m!==1?"s":""]}),k&&e.jsx(O,{variant:"secondary",children:"Past"})]})]})]},s.id)})})}),e.jsx(W,{value:"timetable",children:e.jsx(_e,{subjects:t.university.subjects,onAddSchedule:s=>{const r=t.university.subjects.find(m=>m.id===s);r&&(U(r),E(!0))},onEditSchedule:s=>{const r=t.university.subjects.find(m=>m.id===s);r&&(U(r),E(!0))}})})]}),e.jsx(Ie,{isOpen:n,onClose:()=>{x(!1),R(void 0)},subject:Z}),e.jsx($e,{isOpen:g,onClose:()=>{h(!1),u(void 0)},task:H}),e.jsx(Ue,{isOpen:N,onClose:()=>{C(!1),o(void 0)},exam:c}),e.jsx(Ke,{isOpen:z,onClose:()=>{E(!1),U(void 0)},subject:S})]})};export{ls as University};
