import{j as e}from"./radix-ui-CkGECzuE.js";import{r as l,f as Ie,u as Le}from"./router-CLckEVPx.js";import{C as p,b as w,c as C,a as f}from"./Card-C57Sxzcc.js";import{e as P,d as o,M as Be,h as Fe,u as Ue,B as D,f as I,j as Y,b as de}from"./index-q9RBGCVk.js";import{T as qe,a as Ke,b as G,c as z}from"./tabs-CiugobBU.js";import{E as Ye,G as Ve,T as _e,S as $e,a as He,M as Qe}from"./MarkExamModal-C4H1gChZ.js";import{O as W,X as We,Q as oe,R as he,V as je,t as L,W as Xe,E as B,y as V,Y as Je,n as _,q as Ze,G as ce,o as M,s as $,P as F,z as es,u as H,J as ss,K as ts,_ as as}from"./utils-Cuc1pixd.js";import{F as is,a as Q}from"./TextArea-Cm2GWiBy.js";import{R as rs,B as ns,C as ls,X as ds,Y as cs,T as os,a as ms,b as xs}from"./charts-usVtCYFM.js";import{K as us,f as pe}from"./KanbanCard-B3i5pvZQ.js";import"./react-vendor-pR2cKLDH.js";import"./progress-BsV9ULqq.js";import"./dnd-kit-Dna8SdiU.js";const hs=({isOpen:x,onClose:y,onSave:n,resource:c})=>{const[r,t]=l.useState(""),[h,b]=l.useState(""),[S,E]=l.useState(""),[j,g]=l.useState({});l.useEffect(()=>{c?(t(c.title),b(c.url),E(c.description||"")):(t(""),b(""),E("")),g({})},[c,x]);const v=u=>{try{return new URL(u),!0}catch{return!1}},k=()=>{const u={};if(r.trim()||(u.title="Title is required"),h.trim()?v(h)||(u.url="Please enter a valid URL (e.g., https://example.com)"):u.url="URL is required",Object.keys(u).length>0){g(u);return}n({title:r.trim(),url:h.trim(),description:S.trim()||void 0}),t(""),b(""),E(""),g({})};return x?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:y}),e.jsxs("div",{className:"relative bg-background rounded-lg shadow-lg w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5"}),c?"Edit Resource":"Add Resource"]}),e.jsx("button",{onClick:y,className:"text-muted-foreground hover:text-foreground transition-colors","aria-label":"Close",children:e.jsx(We,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:P("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",j.title&&"border-red-500"),placeholder:"e.g., Course Textbook, Lecture Slides, etc.",value:r,onChange:u=>{t(u.target.value),j.title&&g({...j,title:void 0})}}),j.title&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:j.title})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["URL ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"url",className:P("w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",j.url&&"border-red-500"),placeholder:"https://example.com",value:h,onChange:u=>{b(u.target.value),j.url&&g({...j,url:void 0})}}),j.url&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:j.url})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium mb-2",children:[e.jsx(oe,{className:"w-4 h-4"}),"Description (Optional)"]}),e.jsx("textarea",{className:"w-full px-4 py-2.5 bg-background border border-input rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent transition-all duration-200 resize-none",placeholder:"Add a brief description about this resource...",rows:3,value:S,onChange:u=>E(u.target.value)})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t bg-muted/30",children:[e.jsx(o,{variant:"secondary",onClick:y,children:"Cancel"}),e.jsx(o,{onClick:k,children:c?"Save Changes":"Add Resource"})]})]})]}):null},js=[{value:"assignment",label:"ðŸ“ Assignment"},{value:"quiz",label:"ðŸ“‹ Quiz"},{value:"sheet",label:"ðŸ“„ Sheet/Homework"},{value:"attendance",label:"âœ… Attendance"},{value:"participation",label:"ðŸ™‹ Participation"},{value:"bonus",label:"â­ Bonus Points"},{value:"deduction",label:"âž– Deduction"},{value:"other",label:"ðŸ“Œ Other"}],ps=({isOpen:x,onClose:y,onSave:n,subjectId:c,entry:r})=>{const[t,h]=l.useState({type:"assignment",title:"",description:"",pointsEarned:0,maxPoints:10,hasMaxPoints:!0,date:new Date().toISOString().split("T")[0]});l.useEffect(()=>{h(r?{type:r.type,title:r.title,description:r.description||"",pointsEarned:r.pointsEarned,maxPoints:r.maxPoints||10,hasMaxPoints:r.maxPoints!==void 0,date:r.date}:{type:"assignment",title:"",description:"",pointsEarned:0,maxPoints:10,hasMaxPoints:!0,date:new Date().toISOString().split("T")[0]})},[r,x]);const b=g=>{const{name:v,value:k,type:u}=g.target;if(u==="checkbox"){const T=g.target.checked;h(O=>({...O,[v]:T}))}else h(v==="pointsEarned"||v==="maxPoints"?T=>({...T,[v]:parseFloat(k)||0}):T=>({...T,[v]:k}))},S=g=>{const v=g.target.value;h(k=>({...k,type:v,hasMaxPoints:v!=="bonus"&&v!=="deduction"}))},E=g=>{if(g.preventDefault(),!t.title.trim())return;const v={id:r?.id||Fe(),subjectId:c,type:t.type,title:t.title.trim(),description:t.description.trim()||void 0,pointsEarned:t.pointsEarned,maxPoints:t.hasMaxPoints?t.maxPoints:void 0,date:t.date,createdAt:r?.createdAt||new Date().toISOString()};n(v),y()},j=t.type==="bonus"||t.type==="deduction";return e.jsx(Be,{isOpen:x,onClose:y,title:r?"Edit Grade Entry":"Add Grade Entry",footer:e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"secondary",onClick:y,children:"Cancel"}),e.jsxs(o,{variant:"default",onClick:E,children:[r?"Update":"Add"," Entry"]})]}),children:e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsx(is,{label:"Type",name:"type",value:t.type,onChange:S,options:js.map(g=>({value:g.value,label:g.label}))}),e.jsx(Q,{label:"Title *",name:"title",value:t.title,onChange:b,placeholder:t.type==="sheet"?"e.g., Sheet 3 Submission":t.type==="quiz"?"e.g., Pop Quiz Week 5":t.type==="bonus"?"e.g., Extra Credit Assignment":t.type==="deduction"?"e.g., Late Submission Penalty":"e.g., Homework Assignment 1",required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Q,{label:j?t.type==="deduction"?"Points Deducted":"Bonus Points":"Points Earned",name:"pointsEarned",type:"number",step:"0.5",value:t.pointsEarned,onChange:b,min:t.type==="deduction"?void 0:0}),!j&&e.jsx(Q,{label:"Max Points",name:"maxPoints",type:"number",step:"0.5",min:"0",value:t.maxPoints,onChange:b})]}),e.jsx(Q,{label:"Date",name:"date",type:"date",value:t.date,onChange:b}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description (Optional)"}),e.jsx("textarea",{name:"description",value:t.description,onChange:b,placeholder:"Add any notes or details...",className:"w-full min-h-[80px] p-3 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary bg-background"})]})]})})},fs=({exams:x,gradeEntries:y})=>{const n=l.useMemo(()=>{const r=[];return x.filter(t=>t.taken&&t.grade!==void 0&&t.grade!==null).forEach(t=>{r.push({name:t.title.length>15?t.title.substring(0,15)+"...":t.title,earned:t.grade||0,max:t.maxGrade||100,percentage:(t.grade||0)/(t.maxGrade||100)*100,type:"exam"})}),y.filter(t=>t.type!=="bonus"&&t.type!=="deduction"&&t.maxPoints).forEach(t=>{r.push({name:t.title.length>15?t.title.substring(0,15)+"...":t.title,earned:t.pointsEarned,max:t.maxPoints||10,percentage:t.pointsEarned/(t.maxPoints||10)*100,type:"entry"})}),r},[x,y]),c=r=>r>=90?"#22c55e":r>=80?"#10b981":r>=70?"#3b82f6":r>=60?"#eab308":r>=50?"#f97316":"#ef4444";return n.length===0?e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5"}),"Performance Chart"]})}),e.jsx(f,{children:e.jsx("div",{className:"h-[200px] flex items-center justify-center text-muted-foreground",children:"No graded items yet. Add grades to see your performance chart."})})]}):e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5"}),"Performance Chart"]})}),e.jsxs(f,{children:[e.jsx("div",{className:"h-[300px]",children:e.jsx(rs,{width:"100%",height:"100%",children:e.jsxs(ns,{data:n,margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(ls,{strokeDasharray:"3 3",opacity:.3}),e.jsx(ds,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),e.jsx(cs,{domain:[0,100],tickFormatter:r=>`${r}%`,tick:{fontSize:12}}),e.jsx(os,{content:({active:r,payload:t})=>{if(r&&t&&t.length){const h=t[0].payload;return e.jsxs("div",{className:"bg-background border rounded-lg p-3 shadow-lg",children:[e.jsx("p",{className:"font-medium",children:h.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Score: ",h.earned," /"," ",h.max]}),e.jsxs("p",{className:"text-sm font-medium",children:["Percentage:"," ",h.percentage.toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground capitalize",children:["Type: ",h.type]})]})}return null}}),e.jsx(ms,{dataKey:"percentage",radius:[4,4,0,0],children:n.map((r,t)=>e.jsx(xs,{fill:c(r.percentage)},`cell-${t}`))})]})})}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{children:"90%+ Excellent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{children:"70-89% Good"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),e.jsx("span",{children:"60-69% Pass"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{children:"<60% Needs Work"})]})]})]})]})},Ps=()=>{const{subjectId:x}=Ie(),y=Le(),{data:n,updateData:c,showToast:r}=Ue(),[t,h]=l.useState("overview"),[b,S]=l.useState("kanban"),[E,j]=l.useState(!1),[g,v]=l.useState(!1),[k,u]=l.useState(!1),[T,O]=l.useState(!1),[fe,X]=l.useState(!1),[ge,J]=l.useState(!1),[ve,Z]=l.useState(void 0),[U,q]=l.useState(void 0),[Ne,ee]=l.useState(void 0),[be,se]=l.useState(null),[ye,me]=l.useState("mark"),[we,te]=l.useState(void 0),[K,xe]=l.useState(""),[ae,ie]=l.useState(!1),a=l.useMemo(()=>n.university.subjects.find(s=>s.id===x),[n.university.subjects,x]);l.useEffect(()=>{a?.description&&xe(a.description)},[a]);const N=l.useMemo(()=>n.university.tasks.filter(s=>s.subjectId===x),[n.university.tasks,x]),A=l.useMemo(()=>n.university.exams.filter(s=>s.subjectId===x),[n.university.exams,x]),R=l.useMemo(()=>(n.university.gradeEntries||[]).filter(s=>s.subjectId===x),[n.university.gradeEntries,x]),re=l.useMemo(()=>{const s=N.filter(Re=>Re.status==="done").length,i=N.length,d=i-s,m=i>0?s/i*100:0;return{completed:s,total:i,pending:d,completionRate:m}},[N]),ne=l.useMemo(()=>({todo:N.filter(s=>s.status==="todo"),"in-progress":N.filter(s=>s.status==="in-progress"),done:N.filter(s=>s.status==="done")}),[N]);if(!a)return e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Subject Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The subject you're looking for doesn't exist."}),e.jsxs(o,{onClick:()=>y("/university"),children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Back to University"]})]})});const le=s=>{const i=n.university.tasks.map(d=>d.id===s?{...d,status:d.status==="done"?"todo":"done"}:d);c({university:{...n.university,tasks:i}})},ue=s=>{const i=n.university.tasks.filter(d=>d.id!==s);c({university:{...n.university,tasks:i}}),r("Task deleted successfully!","success")},Ce=(s,i)=>{const d=n.university.tasks.map(m=>m.id===s?{...m,status:i}:m);c({university:{...n.university,tasks:d}})},Ee=()=>{const s=n.university.subjects.map(i=>i.id===x?{...i,description:K.trim()||void 0}:i);c({university:{...n.university,subjects:s}}),ie(!1),r("Description saved!","success")},ke=s=>{const i={id:Date.now().toString(),...s},d=n.university.subjects.map(m=>m.id===x?{...m,resources:[...m.resources||[],i]}:m);c({university:{...n.university,subjects:d}}),u(!1),r("Resource added successfully!","success")},Se=s=>{if(!U)return;const i=n.university.subjects.map(d=>d.id===x?{...d,resources:(d.resources||[]).map(m=>m.id===U.id?{...m,...s}:m)}:d);c({university:{...n.university,subjects:i}}),u(!1),q(void 0),r("Resource updated successfully!","success")},Te=s=>{const i=n.university.subjects.map(d=>d.id===x?{...d,resources:(d.resources||[]).filter(m=>m.id!==s)}:d);c({university:{...n.university,subjects:i}}),r("Resource deleted successfully!","success")},De=s=>{se(s),me("mark"),X(!0)},Me=s=>{se(s),me("grade"),X(!0)},Pe=s=>{ee(s),O(!0)},Ae=s=>{confirm("Are you sure you want to delete this exam?")&&(c({university:{...n.university,exams:n.university.exams.filter(i=>i.id!==s.id)}}),r("Exam deleted successfully!","success"))},Ge=(s,i)=>{c({university:{...n.university,exams:n.university.exams.map(d=>d.id===s?{...d,...i}:d)}}),r(i.grade!==void 0?"Grade saved successfully!":"Exam marked as taken!","success")},ze=s=>{const i=n.university.gradeEntries||[];i.findIndex(m=>m.id===s.id)>=0?(c({university:{...n.university,gradeEntries:i.map(m=>m.id===s.id?s:m)}}),r("Grade entry updated!","success")):(c({university:{...n.university,gradeEntries:[...i,s]}}),r("Grade entry added!","success"))},Oe=s=>{confirm("Are you sure you want to delete this grade entry?")&&(c({university:{...n.university,gradeEntries:(n.university.gradeEntries||[]).filter(i=>i.id!==s)}}),r("Grade entry deleted!","success"))};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{variant:"ghost",size:"sm",onClick:()=>y("/university"),children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Back to University"]}),e.jsxs(o,{onClick:()=>v(!0),variant:"outline",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Edit Subject"]})]}),e.jsx(p,{className:"border-l-4",style:{borderLeftColor:a.color},children:e.jsx(f,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-white text-2xl font-bold shadow-md",style:{backgroundColor:a.color},children:a.name.split(" ").slice(0,2).map(s=>s.charAt(0).toUpperCase()).join("")}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:a.name}),a.professor&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-lg",children:a.professor})]})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(p,{children:e.jsx(f,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(B,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),e.jsx("div",{className:"text-2xl font-bold",children:re.total}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tasks"})]})})}),e.jsx(p,{children:e.jsx(f,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(V,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("div",{className:"text-2xl font-bold",children:re.completed}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completed"})]})})}),e.jsx(p,{children:e.jsx(f,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Je,{className:"w-8 h-8 mx-auto mb-2 text-orange-500"}),e.jsx("div",{className:"text-2xl font-bold",children:re.pending}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pending"})]})})}),e.jsx(p,{children:e.jsx(f,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx("div",{className:"text-2xl font-bold",children:A.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Exams"})]})})})]}),e.jsxs(qe,{value:t,onValueChange:h,children:[e.jsxs(Ke,{className:"flex-wrap h-auto gap-1",children:[e.jsxs(G,{value:"overview",children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Overview"]}),e.jsxs(G,{value:"exams",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Exams & Grades"]}),e.jsxs(G,{value:"tasks",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Tasks (",N.length,")"]}),e.jsxs(G,{value:"schedule",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Schedule"]}),e.jsxs(G,{value:"notes",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Notes"]}),e.jsxs(G,{value:"resources",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Resources"]})]}),e.jsx(z,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5"}),"Schedule"]})}),e.jsxs(f,{className:"space-y-3",children:[a.lectures&&a.lectures.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:e.jsx(D,{variant:"outline",style:{borderColor:a.color,color:a.color},children:"Lectures"})}),a.lectures.map((s,i)=>e.jsxs("div",{className:"pl-4 py-2 border-l-2",style:{borderColor:a.color},children:[e.jsx("div",{className:"font-medium",children:s.day}),e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(M,{className:"w-3 h-3"}),s.startTime," ","- ",s.endTime]}),s.location&&e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx($,{className:"w-3 h-3"}),s.location]})]},i))]}),a.sections&&a.sections.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:e.jsx(D,{variant:"outline",style:{borderColor:a.color,color:a.color,opacity:.8},children:"Sections"})}),a.sections.map((s,i)=>e.jsxs("div",{className:"pl-4 py-2 border-l-2",style:{borderColor:a.color,opacity:.8},children:[e.jsx("div",{className:"font-medium",children:s.day}),e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(M,{className:"w-3 h-3"}),s.startTime," ","- ",s.endTime]}),s.location&&e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx($,{className:"w-3 h-3"}),s.location]})]},i))]}),(!a.lectures||a.lectures.length===0)&&(!a.sections||a.sections.length===0)&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No schedule set"})]})]}),e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"Recent Tasks"]}),e.jsxs(o,{size:"sm",onClick:()=>j(!0),children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Add Task"]})]})}),e.jsx(f,{children:e.jsxs("div",{className:"space-y-2",children:[N.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("button",{onClick:()=>le(s.id),className:P("w-5 h-5 rounded border-2 flex items-center justify-center transition-colors",s.status==="done"?"bg-primary border-primary":"border-muted-foreground"),children:s.status==="done"&&e.jsx(V,{className:"w-3 h-3 text-primary-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:P("font-medium",s.status==="done"&&"line-through text-muted-foreground"),children:s.title}),s.dueDate&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Due:"," ",I(s.dueDate)]})]})]}),e.jsx(D,{variant:"outline",style:{borderColor:Y(s.priority),color:Y(s.priority)},children:s.priority})]},s.id)),N.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No tasks yet"}),N.length>5&&e.jsxs(o,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>h("tasks"),children:["View all ",N.length," tasks"]})]})})]})]})}),e.jsx(z,{value:"exams",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5"}),"Exams (",A.length,")"]}),e.jsxs(o,{size:"sm",onClick:()=>{ee(void 0),O(!0)},children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Add Exam"]})]})}),e.jsx(f,{className:"space-y-3",children:A.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ce,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No exams yet"}),e.jsx("p",{className:"text-sm mt-2",children:"Add exams to track your grades"})]}):A.sort((s,i)=>new Date(s.date).getTime()-new Date(i.date).getTime()).map(s=>e.jsx(Ye,{exam:s,subjectColor:a.color,onMarkAsTaken:De,onAddGrade:Me,onEdit:Pe,onDelete:Ae},s.id))})]}),e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"w-5 h-5"}),"Other Grades (",R.length,")"]}),e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>{te(void 0),J(!0)},children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Add Grade"]})]})}),e.jsx(f,{children:R.length===0?e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:e.jsx("p",{className:"text-sm",children:"Add assignments, quizzes, attendance, and other grades"})}):e.jsx("div",{className:"space-y-2",children:R.sort((s,i)=>new Date(i.date).getTime()-new Date(s.date).getTime()).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.title}),e.jsx(D,{variant:"outline",className:"text-xs capitalize",children:s.type})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[I(s.date),s.description&&` â€¢ ${s.description}`]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:P("font-bold text-lg",s.type==="bonus"&&"text-green-600 dark:text-green-400",s.type==="deduction"&&"text-red-600 dark:text-red-400"),children:[s.type==="bonus"&&"+",s.type==="deduction"&&"-",s.pointsEarned,s.maxPoints&&`/${s.maxPoints}`]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>{te(s),J(!0)},children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>Oe(s.id),children:e.jsx(H,{className:"w-4 h-4 text-red-500"})})]})]})]},s.id))})})]}),e.jsx(fs,{exams:A,gradeEntries:R,subjectColor:a.color})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(Ve,{subject:a,exams:A,gradeEntries:R})})]})}),e.jsx(z,{value:"tasks",children:e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{children:"All Tasks"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center border rounded-md",children:[e.jsx(o,{variant:b==="kanban"?"default":"ghost",size:"sm",onClick:()=>S("kanban"),className:"rounded-r-none",children:e.jsx(ss,{className:"w-4 h-4"})}),e.jsx(o,{variant:b==="list"?"default":"ghost",size:"sm",onClick:()=>S("list"),className:"rounded-l-none",children:e.jsx(ts,{className:"w-4 h-4"})})]}),e.jsxs(o,{onClick:()=>j(!0),children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Add Task"]})]})]})}),e.jsx(f,{children:b==="kanban"?N.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(B,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No tasks yet"}),e.jsx("p",{className:"text-sm mt-2",children:'Click "Add Task" to create your first task'})]}):e.jsx(us,{columns:[{id:"todo",title:"To Do",items:ne.todo,color:"from-blue-500 to-blue-600"},{id:"in-progress",title:"In Progress",items:ne["in-progress"],color:"from-yellow-500 to-yellow-600"},{id:"done",title:"Done",items:ne.done,color:"from-green-500 to-green-600"}],onDragEnd:(s,i)=>{Ce(s,i)},getItemId:s=>s.id,renderItem:s=>{const i=[];if(i.push({label:s.priority.toString(),variant:"outline",icon:void 0}),s.dueDate){const m=de(s.dueDate);i.push({label:I(s.dueDate),variant:s.status!=="done"&&m<=3?"destructive":"secondary",icon:e.jsx(_,{className:"w-3 h-3"})})}const d=[{label:"Edit",icon:e.jsx(L,{className:"w-4 h-4"}),onClick:()=>{Z(s),j(!0)}},{label:s.status==="done"?"Mark as Todo":"Mark as Done",icon:e.jsx(V,{className:"w-4 h-4"}),onClick:()=>le(s.id),separator:!0},{label:"Delete",icon:e.jsx(H,{className:"w-4 h-4"}),onClick:()=>ue(s.id),variant:"destructive"}];return e.jsx(pe,{id:s.id,title:s.title,description:s.description,badges:i,actions:d})},dragOverlay:s=>e.jsx(pe,{id:s.id,title:s.title,description:s.description,badges:[{label:s.priority.toString(),variant:"outline"},...s.dueDate?[{label:I(s.dueDate),variant:"secondary",icon:e.jsx(_,{className:"w-3 h-3"})}]:[]],actions:[]})}):e.jsxs("div",{className:"space-y-2",children:[N.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("button",{onClick:()=>le(s.id),className:P("w-5 h-5 rounded border-2 flex items-center justify-center transition-colors",s.status==="done"?"bg-primary border-primary":"border-muted-foreground"),children:s.status==="done"&&e.jsx(V,{className:"w-3 h-3 text-primary-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:P("font-medium",s.status==="done"&&"line-through text-muted-foreground"),children:s.title}),s.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[s.dueDate&&e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"}),I(s.dueDate),s.status!=="done"&&de(s.dueDate)<=3&&e.jsxs("span",{className:"text-red-500 font-medium",children:["(",de(s.dueDate)," ","days left)"]})]}),e.jsx(D,{variant:"outline",style:{borderColor:Y(s.priority),color:Y(s.priority)},children:s.priority})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>{Z(s),j(!0)},children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>ue(s.id),children:e.jsx(H,{className:"w-4 h-4 text-red-500"})})]})]},s.id)),N.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(B,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No tasks yet"}),e.jsx("p",{className:"text-sm mt-2",children:'Click "Add Task" to create your first task'})]})]})})]})}),e.jsx(z,{value:"schedule",children:e.jsxs(p,{children:[e.jsx(w,{children:e.jsx(C,{children:"Class Schedule"})}),e.jsxs(f,{className:"space-y-6 w-full ",children:[a.lectures&&a.lectures.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:e.jsx(D,{variant:"outline",style:{borderColor:a.color,color:a.color},children:"Lectures"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.lectures.map((s,i)=>e.jsx(p,{children:e.jsx(f,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold text-lg",children:s.day}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(M,{className:"w-4 h-4"}),s.startTime," ","-"," ",s.endTime]}),s.location&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx($,{className:"w-4 h-4"}),s.location]}),a.professor&&e.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["Professor:"," ",a.professor]})]})})},i))})]}),a.sections&&a.sections.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:e.jsx(D,{variant:"outline",style:{borderColor:a.color,color:a.color,opacity:.8},children:"Sections"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.sections.map((s,i)=>e.jsx(p,{children:e.jsx(f,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-semibold text-lg",children:s.day}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(M,{className:"w-4 h-4"}),s.startTime," ","-"," ",s.endTime]}),s.location&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx($,{className:"w-4 h-4"}),s.location]})]})})},i))})]}),(!a.lectures||a.lectures.length===0)&&(!a.sections||a.sections.length===0)&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(M,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No schedule set"}),e.jsx("p",{className:"text-sm mt-2",children:"Edit the subject to add lectures and sections"})]})]})]})}),e.jsx(z,{value:"notes",children:e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{children:"Notes & Description"}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>ie(!ae),children:ae?"Cancel":"Edit"})]})}),e.jsx(f,{children:ae?e.jsxs("div",{className:"space-y-4",children:[e.jsx("textarea",{className:"w-full min-h-[300px] p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Add notes, important information, or description for this subject...",value:K,onChange:s=>xe(s.target.value)}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(o,{variant:"secondary",onClick:()=>ie(!1),children:"Cancel"}),e.jsx(o,{onClick:Ee,children:"Save Notes"})]})]}):e.jsx("div",{children:K?e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("p",{className:"whitespace-pre-wrap",children:K})}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(oe,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No notes yet"}),e.jsx("p",{className:"text-sm mt-2",children:'Click "Edit" to add notes and description'})]})})})]})}),e.jsx(z,{value:"resources",children:e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{children:"Links & Resources"}),e.jsxs(o,{size:"sm",onClick:()=>{q(void 0),u(!0)},children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Add Resource"]})]})}),e.jsx(f,{children:a.resources&&a.resources.length>0?e.jsx("div",{className:"space-y-3",children:a.resources.map(s=>e.jsx(p,{className:"hover:shadow-md transition-shadow",children:e.jsx(f,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(W,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold mb-1 flex items-center gap-2",children:s.title}),e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline flex items-center gap-1 mb-2 break-all",children:[e.jsx(as,{className:"w-3 h-3 flex-shrink-0"}),s.url]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>{q(s),u(!0)},children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>Te(s.id),children:e.jsx(H,{className:"w-4 h-4 text-red-500"})})]})]})})},s.id))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(W,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No resources yet"}),e.jsx("p",{className:"text-sm mt-2",children:"Add useful links, documents, and resources for this subject"})]})})]})})]}),e.jsx(_e,{isOpen:E,onClose:()=>{j(!1),Z(void 0)},task:ve}),e.jsx($e,{isOpen:g,onClose:()=>v(!1),subject:a}),e.jsx(hs,{isOpen:k,onClose:()=>{u(!1),q(void 0)},onSave:U?Se:ke,resource:U}),e.jsx(He,{isOpen:T,onClose:()=>{O(!1),ee(void 0)},exam:Ne}),e.jsx(Qe,{isOpen:fe,onClose:()=>{X(!1),se(null)},onSave:Ge,exam:be,mode:ye}),e.jsx(ps,{isOpen:ge,onClose:()=>{J(!1),te(void 0)},onSave:ze,subjectId:x||"",entry:we})]})};export{Ps as SubjectDetails};
