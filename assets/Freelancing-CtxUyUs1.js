import{j as e}from"./radix-ui-C3V2uSY1.js";import{r as b,u as me}from"./router-BQf8R6iK.js";import{C as $,b as I,c as A,a as F}from"./Card-COpkhGGM.js";import{y as V,B as T,s as xe,x as he,g as J,z as N,M as ge}from"./index-Dn5yG4Az.js";import{P as B}from"./progress-C1RbQUJh.js";import{T as fe,a as je,b as W,c as Y}from"./tabs-BW2NOjDq.js";import{F as U}from"./TextArea-C7vAED9K.js";import{g as O,c as Q,a as pe,f as be,i as R,b as ve,u as ye,d as Pe,e as Ne,P as we,S as Te}from"./TaskModals-DHZJ7DFK.js";import{K as ee,a as K}from"./KanbanCard-BSpEv_h4.js";import{Y as G,C as Ce,z as q,_ as se,g as te,P as ae,Q as oe,$ as ke,T as _,a0 as X,h as Z,s as Se,r as De,o as Me,a1 as Le,J as Ee,O as $e}from"./utils-MsfPC-Eo.js";import"./dnd-kit-VvYmaRfD.js";import{L as ne,a as le}from"./ListCard-CoOqD34c.js";import"./react-vendor-pR2cKLDH.js";import"./charts-5ZM4_dsB.js";import"./FormSelect-BwTQkGvn.js";const Ie=({projects:h,onProjectClick:d,onProjectUpdate:v,onProjectDone:g})=>{const f=h.filter(t=>t.status==="todo"),a=h.filter(t=>t.status==="inProgress"),r=h.filter(t=>t.status==="done"),m=[{id:"todo",title:"To Do",items:f,color:"from-blue-500 to-cyan-500"},{id:"inProgress",title:"In Progress",items:a,color:"from-yellow-500 to-orange-500"},{id:"done",title:"Done",items:r,color:"from-green-500 to-emerald-500"}],x=t=>{const l=O(t.id),c=l.filter(y=>y.completed).length,j=[{label:`$${t.expectedProfit.toLocaleString()}`,variant:"outline",icon:e.jsx(G,{className:"h-3 w-3"})}];return l.length>0&&j.push({label:`${c}/${l.length} tasks`,variant:"secondary"}),t.status==="done"&&t.actualProfit!==void 0&&j.push({label:`Profit: $${t.actualProfit.toLocaleString()}`,variant:"default",icon:e.jsx(Ce,{className:"h-3 w-3"})}),j},i=t=>{const l=[{label:"View Details",icon:e.jsx(q,{className:"h-4 w-4"}),onClick:()=>d(t.id)}];return t.status!=="todo"&&l.push({label:"Move to To Do",onClick:()=>v(t.id,{status:"todo"})}),t.status!=="inProgress"&&l.push({label:"Move to In Progress",onClick:()=>v(t.id,{status:"inProgress"})}),t.status!=="done"&&l.push({label:"Mark as Done",onClick:()=>g(t.id)}),l},w=(t,l)=>{const c=l,j=h.find(y=>y.id===t);!j||j.status===c||(c==="done"?g(t):v(t,{status:c}))};return e.jsx(ee,{columns:m,getItemId:t=>t.id,onDragEnd:w,renderItem:t=>{const l=O(t.id),c=Q(t.id);return e.jsx("div",{onClick:()=>d(t.id),className:"cursor-pointer",children:e.jsx(K,{id:t.id,title:t.name,description:t.description,badges:x(t),actions:i(t),children:l.length>0&&e.jsx("div",{className:"mt-3",children:e.jsx(B,{value:c,className:"h-2"})})})})},dragOverlay:t=>{const l=O(t.id),c=Q(t.id);return e.jsx(K,{id:t.id,title:t.name,description:t.description,badges:x(t),actions:[],children:l.length>0&&e.jsx("div",{className:"mt-3",children:e.jsx(B,{value:c,className:"h-2"})})})}})},Ae=({projects:h,onProjectClick:d})=>{const v=a=>a==="todo"?"secondary":a==="inProgress"?"default":"outline",g=a=>a==="todo"?"To Do":a==="inProgress"?"In Progress":"Done",f=a=>{const r=[{label:g(a.status),variant:v(a.status),className:a.status==="done"?"bg-green-500/10 text-green-500":void 0}];a.priority&&r.push({label:pe(a.priority),variant:V(a.priority)});const m=a.status==="done"&&a.actualProfit?a.actualProfit:a.expectedProfit;r.push({label:be(m,a.currency),variant:"outline",icon:e.jsx(G,{className:"h-3 w-3 text-green-500"})}),a.tags.slice(0,2).forEach(t=>{r.push({label:t,variant:"outline"})}),a.tags.length>2&&r.push({label:`+${a.tags.length-2}`,variant:"outline"});const x=R(a.deadline),i=ve(a.deadline),w=x?"Overdue":i>0?`${i} days left`:i===0?"Due today":"Overdue";return r.push({label:w,variant:x?"destructive":"outline",icon:x?e.jsx(se,{className:"h-3 w-3"}):e.jsx(te,{className:"h-3 w-3"})}),r};return e.jsx(ne,{items:h,getItemId:a=>a.id,emptyMessage:"No projects yet. Create your first project!",renderItem:a=>{const r=O(a.id),m=Q(a.id),x=r.filter(i=>i.completed).length;return e.jsx(le,{title:a.name,description:a.clientName,badges:f(a),onClick:()=>d(a.id),children:r.length>0&&e.jsxs("div",{className:"space-y-1 mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[x,"/",r.length," tasks"]}),e.jsxs("span",{children:[m,"%"]})]}),e.jsx(B,{value:m,className:"h-1.5"})]})})}})},Fe=({tasks:h,onAddTask:d,onEditTask:v,onDeleteTask:g,onUpdateTaskStatus:f})=>{const[a,r]=b.useState("list"),[m,x]=b.useState("all"),[i,w]=b.useState(""),t=h.filter(s=>{if(i){const n=i.toLowerCase();if(!s.title.toLowerCase().includes(n)&&!s.description?.toLowerCase().includes(n))return!1}return!(m==="high-priority"&&s.priority<7||m==="overdue"&&(!s.dueDate||!R(s.dueDate)))}),l=s=>{const n=[];if(n.push({label:`Priority ${s.priority}`,variant:V(s.priority)}),s.timeEstimate&&n.push({label:`${s.timeEstimate}h`,variant:"outline",icon:e.jsx(Z,{className:"h-3 w-3"})}),s.dueDate){const P=R(s.dueDate);n.push({label:X(new Date(s.dueDate),"MMM dd, yyyy"),variant:P||xe(s.dueDate)?"destructive":"outline",icon:e.jsx(Z,{className:"h-3 w-3"})})}return s.tags.forEach(P=>{n.push({label:P,variant:"outline"})}),n},c=s=>{const n=[{label:"Edit",icon:e.jsx(q,{className:"h-4 w-4"}),onClick:()=>v(s)}];return s.status!=="todo"&&n.push({label:"Move to To Do",onClick:()=>f(s.id,"todo")}),s.status!=="inProgress"&&n.push({label:"Move to In Progress",onClick:()=>f(s.id,"inProgress")}),s.status!=="completed"&&n.push({label:"Move to Done",onClick:()=>f(s.id,"completed")}),n.push({label:"Delete",icon:e.jsx(_,{className:"h-4 w-4"}),onClick:()=>g(s.id),variant:"destructive",separator:!0}),n},j=s=>{const n=[];return n.push({label:`Priority ${s.priority}`,variant:V(s.priority)}),s.dueDate&&n.push({label:X(new Date(s.dueDate),"MMM dd, yyyy"),icon:e.jsx(te,{className:"h-4 w-4 text-muted-foreground"}),variant:"outline"}),n.push({label:s.status==="inProgress"?"In Progress":s.status==="completed"?"Completed":"To Do",variant:"outline"}),s.tags.forEach(P=>{n.push({label:P,variant:"secondary"})}),n},y=s=>[{icon:e.jsx(q,{className:"h-4 w-4"}),onClick:()=>v(s),label:"Edit"},{icon:e.jsx(_,{className:"h-4 w-4"}),onClick:()=>g(s.id),variant:"destructive",label:"Delete"}],k=[{id:"todo",title:"To Do",items:t.filter(s=>s.status==="todo"),color:"from-blue-500 to-cyan-500"},{id:"inProgress",title:"In Progress",items:t.filter(s=>s.status==="inProgress"),color:"from-yellow-500 to-orange-500"},{id:"completed",title:"Completed",items:t.filter(s=>s.status==="completed"),color:"from-green-500 to-emerald-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Standalone Tasks"}),e.jsxs(T,{onClick:d,className:"gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),"Add Task"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(U,{value:i,onChange:s=>w(s.target.value),placeholder:"Search tasks...",className:"flex-1"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:m,onChange:s=>x(s.target.value),"aria-label":"Filter tasks",className:"px-4 py-2 rounded-md border border-input bg-background text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"all",children:"All Tasks"}),e.jsx("option",{value:"high-priority",children:"High Priority"}),e.jsx("option",{value:"overdue",children:"Overdue"})]}),e.jsxs("div",{className:"flex border border-input rounded-md text-primary",children:[e.jsxs(T,{variant:a==="list"?"default":"ghost",size:"sm",onClick:()=>r("list"),className:"gap-2 rounded-r-none h-full",children:[e.jsx(oe,{className:"h-4 w-4"}),"List"]}),e.jsxs(T,{variant:a==="kanban"?"default":"ghost",size:"sm",onClick:()=>r("kanban"),className:"gap-2 rounded-l-none h-full ",children:[e.jsx(ke,{className:"h-4 w-4"}),"Kanban"]})]})]})]}),a==="list"?e.jsx(ne,{items:t,getItemId:s=>s.id,emptyMessage:i||m!=="all"?"No tasks match your filters":"No tasks yet. Click 'Add Task' to get started.",renderItem:s=>{const n=s.status==="completed";return e.jsx(le,{title:s.title,description:s.description,badges:j(s),actions:y(s),className:n?"opacity-60":""})}}):e.jsx(ee,{columns:k,getItemId:s=>s.id,onDragEnd:(s,n)=>{f(s,n)},renderItem:s=>e.jsx(K,{id:s.id,title:s.title,description:s.description,badges:l(s),actions:c(s)}),dragOverlay:s=>e.jsx(K,{id:s.id,title:s.title,description:s.description,badges:l(s),actions:[]})})]})},Ze=()=>{const h=me(),{projects:d,addProject:v,updateProject:g,getProjectById:f}=ye(),{tasks:a,addTask:r,updateTask:m,deleteTask:x,toggleTaskStatus:i}=Pe(),[w,t]=b.useState(!1),[l,c]=b.useState(!1),[j,y]=b.useState(!1),[k,s]=b.useState(null),[n,P]=b.useState(""),[M,L]=b.useState(null),[S,H]=b.useState("kanban"),z=Ne(d),re=o=>{const u=f(o);u&&(u.actualProfit?(g(o,{status:"done"}),N.success(`${u.name} marked as done! ðŸŽ‰`)):(s(o),P(u.expectedProfit.toString()),y(!0)))},ie=()=>{if(!k)return;const o=parseFloat(n)||0;g(k,{status:"done",actualProfit:o});const u=f(k);N.success(`${u?.name} completed! ðŸŽ‰`),y(!1),s(null),P("")},ce=(o,u)=>{const E=a.find(D=>D.id===o);if(u)i(o,"completed"),N.success("Task completed! âœ“");else{const D=E?.status==="completed"?"todo":E?.status||"todo";i(o,D)}},p=b.useMemo(()=>{const o=d.length,u=d.filter(C=>C.status==="todo").length,E=d.filter(C=>C.status==="inProgress").length,D=d.filter(C=>C.status==="done").length,de=a.length,ue=a.filter(C=>C.status==="completed").length;return{totalProjects:o,todoProjects:u,inProgressProjects:E,doneProjects:D,totalEarned:z.totalEarned,totalExpected:z.totalExpected,totalTasks:de,completedTasks:ue}},[d,a,z]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold tracking-tight flex items-center gap-3 text-foreground",children:[e.jsx(Se,{className:"h-10 w-10"}),"Freelancing"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your projects, clients, and tasks"})]})}),e.jsx(he,{}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs($,{children:[e.jsxs(I,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(F,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",p.totalEarned.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"From completed projects"})]})]}),e.jsxs($,{children:[e.jsxs(I,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"Active Projects"}),e.jsx(De,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(F,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.inProgressProjects}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently in progress"})]})]}),e.jsxs($,{children:[e.jsxs(I,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"Pending Projects"}),e.jsx(se,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(F,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.todoProjects}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Waiting to start"})]})]}),e.jsxs($,{children:[e.jsxs(I,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"Tasks Progress"}),e.jsx(Me,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(F,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[p.completedTasks,"/",p.totalTasks]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.totalTasks>0?Math.round(p.completedTasks/p.totalTasks*100):0,"% completion"]}),e.jsx(B,{value:p.totalTasks>0?p.completedTasks/p.totalTasks*100:0,className:"mt-2"})]})]})]}),e.jsxs(fe,{defaultValue:"projects",className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(je,{children:[e.jsxs(W,{value:"projects",children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Projects"]}),e.jsxs(W,{value:"tasks",children:[e.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Standalone Tasks"]})]})}),e.jsxs(Y,{value:"projects",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Projects"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{variant:S==="kanban"?"secondary":"ghost",size:"sm",onClick:()=>H("kanban"),"aria-label":"Kanban view",className:J("text-primary",S==="kanban"&&"bg-primary/10 text-primary hover:bg-primary/20"),children:e.jsx($e,{className:"h-4 w-4"})}),e.jsx(T,{variant:S==="list"?"secondary":"ghost",size:"sm",onClick:()=>H("list"),"aria-label":"List view",className:J("text-primary",S==="list"&&"bg-primary/10 hover:bg-primary/20"),children:e.jsx(oe,{className:"h-4 w-4"})}),e.jsxs(T,{onClick:()=>t(!0),children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Add Project"]})]})]}),S==="kanban"?e.jsx(Ie,{projects:d,onProjectClick:o=>h(`/freelancing/project/${o}`),onProjectUpdate:(o,u)=>{g(o,u),N.success("Project updated")},onProjectDone:re}):e.jsx(Ae,{projects:d,onProjectClick:o=>h(`/freelancing/project/${o}`)})]}),e.jsx(Y,{value:"tasks",className:"space-y-4",children:e.jsx(Fe,{tasks:a,onAddTask:()=>{L(null),c(!0)},onEditTask:o=>{L(o),c(!0)},onDeleteTask:o=>{x(o),N.success("Task deleted")},onToggleStatus:ce,onUpdateTaskStatus:(o,u)=>{i(o,u),N.success("Task moved!")}})})]}),w&&e.jsx(we,{isOpen:w,onClose:()=>t(!1),onSave:o=>{v(o),t(!1),N.success("Project created successfully!")},mode:"create"}),l&&e.jsx(Te,{isOpen:l,onClose:()=>{c(!1),L(null)},onSave:o=>{M?(m(M.id,o),N.success("Task updated")):(r(o),N.success("Task added!")),c(!1),L(null)},task:M||void 0,mode:M?"edit":"create"}),j&&e.jsx(ge,{isOpen:j,onClose:()=>{y(!1),s(null)},title:"ðŸŽ‰ Project Completed!",footer:e.jsxs(e.Fragment,{children:[e.jsx(T,{variant:"secondary",onClick:()=>{y(!1),s(null)},children:"Cancel"}),e.jsx(T,{variant:"default",onClick:ie,children:"Mark as Done"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Congratulations! Please enter the actual profit you earned from this project."}),e.jsx(U,{label:"Actual Profit *",type:"number",value:n,onChange:o=>P(o.target.value),placeholder:"5000"})]})})]})};export{Ze as Freelancing};
