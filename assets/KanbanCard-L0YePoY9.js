import{j as s}from"./radix-ui-C3V2uSY1.js";import{r as w}from"./router-BQf8R6iK.js";import{D as S,c as y,S as k,v as M,a as E,u as B,b as I,C as K}from"./dnd-kit-VvYmaRfD.js";import{C as b,b as R,c as T,a as z}from"./Card-Bf7Y9406.js";import{j as g,a as C,D as A,k as H,B as L,l as V,m as q,n as F}from"./index-OeeYqBZp.js";import{E as G}from"./utils-MsfPC-Eo.js";const J=({id:t,children:d})=>{const{setNodeRef:m}=B({id:t});return s.jsx("div",{ref:m,className:"space-y-3",children:d})};function Y({columns:t,onDragEnd:d,renderItem:m,getItemId:r,dragOverlay:p}){const[h,j]=w.useState(null),f=e=>{const{active:i}=e,l=t.flatMap(n=>n.items).find(n=>r(n)===i.id);l&&j(l)},u=e=>{const{active:i,over:c}=e;if(j(null),!c)return;const l=i.id;let n;if(t.some(o=>o.id===c.id))n=c.id;else{const v=t.flatMap(x=>x.items).find(x=>r(x)===c.id);if(!v)return;const N=t.find(x=>x.items.some(D=>r(D)===r(v)));if(!N)return;n=N.id}d(l,n)};return s.jsxs(S,{collisionDetection:y,onDragStart:f,onDragEnd:u,children:[s.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-3",children:t.map(e=>s.jsxs(b,{className:"flex flex-col transition-all w-full",children:[s.jsxs(R,{className:"pb-3",children:[s.jsx("div",{className:g("h-1 -mx-6 -mt-6 mb-4 rounded-t-lg bg-gradient-to-r",e.color)}),s.jsxs(T,{className:"flex items-center justify-between text-base sm:text-lg",children:[s.jsx("span",{className:"truncate",children:e.title}),s.jsx(C,{variant:"secondary",className:"ml-2 shrink-0",children:e.items.length})]})]}),s.jsx(z,{className:"flex-1 min-h-[150px] sm:min-h-[200px]",children:s.jsx(J,{id:e.id,children:e.items.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No items"}):s.jsx(k,{items:e.items.map(r),strategy:M,children:e.items.map(i=>s.jsx("div",{children:m(i)},r(i)))})})})]},e.id))}),s.jsx(E,{children:h&&p?p(h):null})]})}const Z=({id:t,title:d,description:m,badges:r,actions:p,children:h,className:j})=>{const{attributes:f,listeners:u,setNodeRef:e,transform:i,transition:c,isDragging:l}=I({id:t}),n=K.Transform.toString(i);return s.jsx("div",{ref:e,style:{transform:n,transition:c},className:l?"opacity-50 scale-95":"",children:s.jsx(b,{className:g("p-3 sm:p-4 hover:shadow-md transition-all",j),children:s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("div",{className:g("flex-1 cursor-grab active:cursor-grabbing min-w-0",l&&"cursor-grabbing"),...f,...u,children:s.jsx("h4",{className:"font-medium text-foreground text-sm sm:text-base break-words",children:d})}),s.jsxs(A,{children:[s.jsx(H,{asChild:!0,children:s.jsx(L,{variant:"ghost",size:"icon-sm",className:"shrink-0",children:s.jsx(G,{className:"h-4 w-4"})})}),s.jsx(V,{align:"end",children:p.map((a,o)=>s.jsxs("div",{children:[a.separator&&o>0&&s.jsx(q,{}),s.jsxs(F,{onClick:a.onClick,className:a.variant==="destructive"?"text-destructive":"",children:[a.icon&&s.jsx("span",{className:"mr-2",children:a.icon}),a.label]})]},o))})]})]}),s.jsxs("div",{className:g("cursor-grab active:cursor-grabbing",l&&"cursor-grabbing"),...f,...u,children:[m&&s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground line-clamp-2 mb-2 sm:mb-3 break-words",children:m}),r&&r.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:r.map((a,o)=>s.jsxs(C,{variant:a.variant||"outline",className:"text-xs",children:[a.icon&&s.jsx("span",{className:"mr-1",children:a.icon}),s.jsx("span",{className:"truncate max-w-[150px]",children:a.label})]},o))}),h]})]})})})};export{Y as K,Z as a};
