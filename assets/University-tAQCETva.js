import{j as e}from"./radix-ui-CkGECzuE.js";import{r as f,u as us}from"./router-CLckEVPx.js";import{D as Te,a as Ee,b as Me,c as Ie,d as me,e as _,K as hs,f as Le}from"./KanbanCard-CyI7mrgi.js";import{L as js,a as fs}from"./ListCard-Dne-f6ls.js";import{e as P,B as G,d as j,u as Je,M as Xe,h as Oe,b as Ge,S as ze,j as Fe,f as Be,i as He}from"./index-C1qMWjzx.js";import{C as E,a as M,b as K,c as V}from"./Card-4FVo8xr3.js";import{P as Ce}from"./progress-iMixBTgX.js";import{T as gs,a as ps,b as de,c as ce}from"./tabs-JhXcEEFa.js";import{c as ke,g as ge,E as vs,S as Ns,T as bs,a as ys,M as ws}from"./MarkExamModal-CUzeKinY.js";import{o as Ne,s as Cs,t as ae,P as H,u as ee,n as xe,m as Ae,v as ks,w as Re,j as Ss,x as Se,X as Ue,G as Ts,p as We,y as Es,r as Ke,C as Ms,z as pe,E as As,q as Ve,J as Ds,K as $s,N as Ps}from"./utils-Cuc1pixd.js";import{F as te,a as _e}from"./TextArea-XtBVAueP.js";import"./react-vendor-pR2cKLDH.js";import"./dnd-kit-Dna8SdiU.js";import"./charts-usVtCYFM.js";const Ys=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],oe=[{hour:8,display:"08:00 - 10:00"},{hour:10,display:"10:00 - 12:00"},{hour:12,display:"12:00 - 2:00"},{hour:14,display:"2:00 - 4:00"},{hour:16,display:"4:00 - 6:00"}],ve=b=>{const[t,l]=b.split(":").map(Number);return t+l/60},Is=({subjects:b,onEditSchedule:t})=>{const l=f.useMemo(()=>{const a={};return b.forEach(u=>{u.lectures?.forEach(c=>{a[c.day]||(a[c.day]=[]);const o=ve(c.startTime),g=ve(c.endTime),S=g-o;a[c.day].push({subject:u,entry:c,type:"lecture",startHour:o,endHour:g,duration:S})}),u.sections?.forEach(c=>{a[c.day]||(a[c.day]=[]);const o=ve(c.startTime),g=ve(c.endTime),S=g-o;a[c.day].push({subject:u,entry:c,type:"section",startHour:o,endHour:g,duration:S})})}),a},[b]),v=(a,u)=>{const c=oe.findIndex(k=>k.hour===Math.floor(a));let o=oe.findIndex(k=>k.hour>=Math.ceil(u));o===-1&&(o=oe.length);const g=c+2,S=Math.max(1,o-c);return{start:g,span:S}},Y=b.some(a=>a.lectures&&a.lectures.length>0||a.sections&&a.sections.length>0);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{className:"p-0",dir:"ltr",children:Y?e.jsx(E,{className:"h-ful p-0",children:e.jsx(M,{className:"p-0 m-0",children:e.jsx("div",{className:"overflow-x-auto overflow-y-hidden h-full",children:e.jsxs("div",{className:"min-w-[1000px]",children:[e.jsxs("div",{className:"grid grid-cols-[120px_repeat(5,1fr)] border-b",children:[e.jsx("div",{className:"p-3 font-semibold border-r bg-muted/50",children:"Day / Time"}),oe.map(a=>e.jsx("div",{className:"p-2 text-center items-center justify-center pt-3 text-base font-medium border-r last:border-r-0 bg-muted/50",children:a.display},a.hour))]}),Ys.map(a=>{const u=l[a]||[],c=u.length>0;return e.jsxs("div",{className:P("grid grid-cols-[120px_repeat(5,1fr)] border-b last:border-b-0 relative",c?"min-h-[120px]":"min-h-[20px]"),children:[e.jsx("div",{className:P("p-3 font-medium border-r bg-muted/30 flex items-center",c?"text-primary":"text-muted-foreground"),children:a}),oe.map(o=>e.jsx("div",{className:"border-r last:border-r-0"},`${a}-${o.hour}-bg`)),u.map((o,g)=>{const{start:S,span:k}=v(o.startHour,o.endHour),m=o.type==="lecture",T=o.subject.color;return e.jsxs("div",{className:P("absolute rounded-lg p-3 text-base cursor-pointer transition-all hover:shadow-lg hover:z-10","border-2 flex flex-col justify-center"),style:{gridColumn:`${S} / span ${k}`,backgroundColor:m?`${T}80`:`${T}20`,borderColor:T,top:"8px",bottom:"8px",left:"4px",right:"4px"},onClick:()=>t(o.subject.id),children:[e.jsx("div",{className:"font-semibold truncate text-[14px]",children:o.subject.name}),e.jsx("div",{className:"text-[12px] font-[700] opacity-100 truncate mt-0.5",children:m?"Lecture":"Section"}),m&&o.subject.professor&&e.jsx("div",{className:"text-[10px] opacity-100 truncate my-0.5",children:o.subject.professor}),o.entry.location&&e.jsxs("div",{className:"flex items-center gap-1 mt-0.5 text-[12px] font-medium opacity-70",children:[e.jsx(Cs,{className:"w-3 h-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:o.entry.location})]})]},`${o.subject.id}-${o.type}-${g}`)})]},a)})]})})})}):e.jsx(M,{className:"py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Ne,{className:"w-12 h-12 mx-auto text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Schedule Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Add lecture and section times to your subjects to see your timetable"}),e.jsx("p",{className:"text-sm text-primary",children:'Scroll down to "Manage Schedules" section and click "Add Schedule" on any subject'})]})]})})}),e.jsxs(E,{children:[e.jsx(K,{children:e.jsx(V,{className:"text-lg",children:"Manage Schedules"})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-3",children:[b.map(a=>{const u=a.lectures&&a.lectures.length>0,c=a.sections&&a.sections.length>0;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:a.color}}),e.jsx("span",{className:"font-medium",children:a.name})]}),e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-4 mt-1",children:[u&&e.jsx("span",{className:"flex items-center gap-1",children:e.jsxs(G,{variant:"outline",style:{borderColor:a.color,color:a.color},children:[a.lectures.length," ","Lecture",a.lectures.length!==1?"s":""]})}),c&&e.jsx("span",{className:"flex items-center gap-1",children:e.jsxs(G,{variant:"outline",style:{borderColor:a.color,color:a.color,opacity:.8},children:[a.sections.length," ","Section",a.sections.length!==1?"s":""]})}),!u&&!c&&e.jsx("span",{className:"text-muted-foreground",children:"No schedule set"})]})]}),e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>t(a.id),children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),u||c?"Edit":"Add"," ","Schedule"]})]},a.id)}),b.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No subjects yet. Add a subject first to create a schedule."})]})})]})]})},qe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ls=()=>{const b=[];for(let t=8;t<=18;t++)for(let l=0;l<60;l+=30){const v=`${t.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`,Y=t>12?t-12:t===0?12:t,a=t>=12?"PM":"AM",u=`${Y}:${l.toString().padStart(2,"0")} ${a}`;b.push({value:v,label:u})}return b},Os=({isOpen:b,onClose:t,subject:l})=>{const{data:v,updateData:Y,showToast:a}=Je(),[u,c]=f.useState([]),[o,g]=f.useState([]);f.useEffect(()=>{l&&b?(c(l.lectures||[]),g(l.sections||[])):l||(c([]),g([]))},[l,b]);const S=()=>{c([...u,{day:"Monday",startTime:"09:00",endTime:"10:30",location:""}])},k=()=>{g([...o,{day:"Monday",startTime:"14:00",endTime:"15:30",location:""}])},m=p=>{c(u.filter((h,x)=>x!==p))},T=p=>{g(o.filter((h,x)=>x!==p))},D=(p,h,x)=>{const L=[...u];L[p]={...L[p],[h]:x},c(L)},$=(p,h,x)=>{const L=[...o];L[p]={...L[p],[h]:x},g(L)},z=()=>{const p=[...u,...o];for(const h of p){const[x,L]=h.startTime.split(":").map(Number),[Q,ne]=h.endTime.split(":").map(Number),q=x*60+L,re=Q*60+ne;if(q>=re)return a("End time must be after start time","error"),!1}return!0},X=p=>{if(p.preventDefault(),!l){a("No subject selected","error");return}if(!z())return;const h={...l,lectures:u.length>0?u:void 0,sections:o.length>0?o:void 0};Y({university:{...v.university,subjects:v.university.subjects.map(x=>x.id===l.id?h:x)}}),a("Schedule updated successfully!","success"),t()},U=Ls();return e.jsx(Xe,{isOpen:b,onClose:t,title:`Edit Schedule - ${l?.name||""}`,footer:e.jsxs(e.Fragment,{children:[e.jsx(j,{variant:"secondary",onClick:t,children:"Cancel"}),e.jsx(j,{variant:"default",onClick:X,children:"Save Schedule"})]}),children:e.jsxs("form",{onSubmit:X,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold flex items-center gap-2",children:e.jsx(G,{variant:"outline",className:"text-blue-500 border-blue-500",children:"Lectures"})}),e.jsxs(j,{type:"button",variant:"outline",size:"sm",onClick:S,children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Add Lecture"]})]}),u.length===0&&e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4 border rounded-lg",children:'No lectures scheduled. Click "Add Lecture" to add one.'}),u.map((p,h)=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-3 bg-blue-500/5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Lecture ",h+1]}),e.jsx(j,{type:"button",variant:"ghost",size:"sm",onClick:()=>m(h),children:e.jsx(ee,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(te,{label:"Day",name:`lecture-day-${h}`,value:p.day,onChange:x=>D(h,"day",x.target.value),options:qe.map(x=>({value:x,label:x}))}),e.jsx(_e,{label:"Location",name:`lecture-location-${h}`,value:p.location,onChange:x=>D(h,"location",x.target.value),placeholder:"e.g., Room 101"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(te,{label:"Start Time",name:`lecture-start-${h}`,value:p.startTime,onChange:x=>D(h,"startTime",x.target.value),options:U}),e.jsx(te,{label:"End Time",name:`lecture-end-${h}`,value:p.endTime,onChange:x=>D(h,"endTime",x.target.value),options:U})]})]},`lecture-${h}`))]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold flex items-center gap-2",children:e.jsx(G,{variant:"outline",className:"text-green-500 border-green-500",children:"Sections"})}),e.jsxs(j,{type:"button",variant:"outline",size:"sm",onClick:k,children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Add Section"]})]}),o.length===0&&e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4 border rounded-lg",children:'No sections scheduled. Click "Add Section" to add one.'}),o.map((p,h)=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-3 bg-green-500/5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Section ",h+1]}),e.jsx(j,{type:"button",variant:"ghost",size:"sm",onClick:()=>T(h),children:e.jsx(ee,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(te,{label:"Day",name:`section-day-${h}`,value:p.day,onChange:x=>$(h,"day",x.target.value),options:qe.map(x=>({value:x,label:x}))}),e.jsx(_e,{label:"Location",name:`section-location-${h}`,value:p.location,onChange:x=>$(h,"location",x.target.value),placeholder:"e.g., Lab 203"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(te,{label:"Start Time",name:`section-start-${h}`,value:p.startTime,onChange:x=>$(h,"startTime",x.target.value),options:U}),e.jsx(te,{label:"End Time",name:`section-end-${h}`,value:p.endTime,onChange:x=>$(h,"endTime",x.target.value),options:U})]})]},`section-${h}`))]})]})})},Gs=({years:b,terms:t,currentYearId:l,currentTermId:v,onYearChange:Y,onTermChange:a,onManageClick:u})=>{const c=[...b].sort((m,T)=>m.order-T.order),o=b.find(m=>m.id===l),g=t.find(m=>m.id===v),S=l?t.filter(m=>m.yearId===l).sort((m,T)=>m.order-T.order):[],k=m=>{Y(m),m&&v&&(t.some(D=>D.id===v&&D.yearId===m)||a(void 0))};return e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(Te,{children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(j,{variant:"outline",className:"gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),l==="unassigned"?"Unassigned":o?o.name:"All Years",e.jsx(Ae,{className:"h-4 w-4 opacity-50"})]})}),e.jsxs(Me,{align:"start",className:"w-48",children:[e.jsx(Ie,{children:"Academic Year"}),e.jsx(me,{}),e.jsxs(_,{onClick:()=>k(void 0),className:P(!l&&"bg-accent"),children:[e.jsx("span",{className:"flex-1",children:"All Years"}),!l&&e.jsx(G,{variant:"secondary",className:"ml-2 text-xs",children:"Selected"})]}),e.jsxs(_,{onClick:()=>k("unassigned"),className:P(l==="unassigned"&&"bg-accent"),children:[e.jsx("span",{className:"flex-1",children:"Unassigned"}),l==="unassigned"&&e.jsx(G,{variant:"secondary",className:"ml-2 text-xs",children:"Selected"})]}),c.length>0&&e.jsx(me,{}),c.map(m=>e.jsxs(_,{onClick:()=>k(m.id),className:P(l===m.id&&"bg-accent"),children:[e.jsx("span",{className:"flex-1",children:m.name}),m.isActive&&e.jsx(G,{variant:"default",className:"ml-2 text-xs",children:"Active"}),l===m.id&&!m.isActive&&e.jsx(G,{variant:"secondary",className:"ml-2 text-xs",children:"Selected"})]},m.id)),c.length===0&&e.jsx(_,{disabled:!0,className:"text-muted-foreground",children:"No years added yet"})]})]}),l&&l!=="unassigned"&&e.jsxs(Te,{children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(j,{variant:"outline",className:"gap-2",children:[g?g.name:"All Terms",e.jsx(Ae,{className:"h-4 w-4 opacity-50"})]})}),e.jsxs(Me,{align:"start",className:"w-48",children:[e.jsx(Ie,{children:"Term / Semester"}),e.jsx(me,{}),e.jsxs(_,{onClick:()=>a(void 0),className:P(!v&&"bg-accent"),children:[e.jsx("span",{className:"flex-1",children:"All Terms"}),!v&&e.jsx(G,{variant:"secondary",className:"ml-2 text-xs",children:"Selected"})]}),S.length>0&&e.jsx(me,{}),S.map(m=>e.jsxs(_,{onClick:()=>a(m.id),className:P(v===m.id&&"bg-accent"),children:[e.jsx("span",{className:"flex-1",children:m.name}),v===m.id&&e.jsx(G,{variant:"secondary",className:"ml-2 text-xs",children:"Selected"})]},m.id)),S.length===0&&e.jsx(_,{disabled:!0,className:"text-muted-foreground",children:"No terms for this year"})]})]}),e.jsx(j,{variant:"ghost",size:"icon",onClick:u,title:"Manage Years & Terms",children:e.jsx(ks,{className:"h-4 w-4"})}),(l||v)&&e.jsx(G,{variant:"outline",className:"text-xs",children:"Filtered"})]})},zs=({isOpen:b,onClose:t,years:l,terms:v,onSave:Y})=>{const[a,u]=f.useState([]),[c,o]=f.useState([]),[g,S]=f.useState(new Set),[k,m]=f.useState(null),[T,D]=f.useState(null),[$,z]=f.useState("");f.useEffect(()=>{b&&(u([...l].sort((r,i)=>r.order-i.order)),o([...v]),S(new Set(l.map(r=>r.id))),m(null),D(null))},[b,l,v]);const X=r=>{const i=new Set(g);i.has(r)?i.delete(r):i.add(r),S(i)},U=()=>{const r=a.length>0?Math.max(...a.map(y=>y.order))+1:1,i={id:Oe(),name:`Year ${r}`,order:r,isActive:a.length===0,createdAt:new Date().toISOString()};u([...a,i]),S(new Set([...g,i.id])),m(i.id),z(i.name)},p=r=>{confirm("Delete this year and all its terms? Subjects will become unassigned.")&&(u(a.filter(i=>i.id!==r)),o(c.filter(i=>i.yearId!==r)))},h=(r,i)=>{u(a.map(y=>y.id===r?{...y,...i}:y))},x=r=>{u(a.map(i=>({...i,isActive:i.id===r})))},L=r=>{const i=c.filter(N=>N.yearId===r),y=i.length>0?Math.max(...i.map(N=>N.order))+1:1,C={id:Oe(),yearId:r,name:`Term ${y}`,order:y,createdAt:new Date().toISOString()};o([...c,C]),D(C.id),z(C.name)},Q=r=>{confirm("Delete this term? Subjects will become unassigned.")&&o(c.filter(i=>i.id!==r))},ne=(r,i)=>{o(c.map(y=>y.id===r?{...y,...i}:y))},q=r=>{m(r.id),z(r.name),D(null)},re=r=>{D(r.id),z(r.name),m(null)},W=()=>{k&&$.trim()&&h(k,{name:$.trim()}),T&&$.trim()&&ne(T,{name:$.trim()}),m(null),D(null),z("")},se=()=>{m(null),D(null),z("")},ue=()=>{Y(a,c),t()},he=r=>c.filter(i=>i.yearId===r).sort((i,y)=>i.order-y.order);return e.jsx(Xe,{isOpen:b,onClose:t,title:"Manage Academic Years & Terms",footer:e.jsxs(e.Fragment,{children:[e.jsx(j,{variant:"secondary",onClick:t,children:"Cancel"}),e.jsx(j,{onClick:ue,children:"Save Changes"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Organize your subjects by academic year and term/semester."}),e.jsxs(j,{onClick:U,size:"sm",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Year"]})]}),a.length===0?e.jsx(E,{children:e.jsxs(M,{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(xe,{className:"h-12 w-12 text-muted-foreground mb-3 opacity-50"}),e.jsx("h3",{className:"font-semibold mb-1",children:"No Academic Years"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Add your first academic year to get started"}),e.jsxs(j,{onClick:U,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Year"]})]})}):e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:a.map(r=>e.jsxs(E,{className:"overflow-hidden",children:[e.jsxs("div",{className:P("flex items-center gap-2 p-3 bg-muted/30 cursor-pointer hover:bg-muted/50 transition-colors",r.isActive&&"border-l-4 border-l-primary"),onClick:()=>X(r.id),children:[e.jsx(Re,{className:"h-4 w-4 text-muted-foreground cursor-grab"}),g.has(r.id)?e.jsx(Ae,{className:"h-4 w-4"}):e.jsx(Ss,{className:"h-4 w-4"}),k===r.id?e.jsxs("div",{className:"flex items-center gap-2 flex-1",onClick:i=>i.stopPropagation(),children:[e.jsx("input",{type:"text",value:$,onChange:i=>z(i.target.value),className:"flex-1 px-2 py-1 text-sm border rounded bg-background",autoFocus:!0,onKeyDown:i=>{i.key==="Enter"&&W(),i.key==="Escape"&&se()}}),e.jsx(j,{size:"icon-sm",variant:"ghost",onClick:W,children:e.jsx(Se,{className:"h-4 w-4 text-green-500"})}),e.jsx(j,{size:"icon-sm",variant:"ghost",onClick:se,children:e.jsx(Ue,{className:"h-4 w-4 text-red-500"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium flex-1",children:r.name}),r.isActive&&e.jsx(G,{variant:"default",className:"text-xs",children:"Active"}),e.jsxs(G,{variant:"outline",className:"text-xs",children:[he(r.id).length," ","terms"]})]}),e.jsxs("div",{className:"flex items-center gap-1",onClick:i=>i.stopPropagation(),children:[!r.isActive&&e.jsx(j,{size:"icon-sm",variant:"ghost",onClick:()=>x(r.id),title:"Set as active year",children:e.jsx(Se,{className:"h-4 w-4"})}),e.jsx(j,{size:"icon-sm",variant:"ghost",onClick:()=>q(r),title:"Edit year name",children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(j,{size:"icon-sm",variant:"ghost",onClick:()=>p(r.id),className:"text-destructive hover:text-destructive",title:"Delete year",children:e.jsx(ee,{className:"h-4 w-4"})})]})]}),g.has(r.id)&&e.jsxs(M,{className:"pt-3 pb-3 space-y-2",children:[he(r.id).map(i=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-muted/20 hover:bg-muted/40 transition-colors",children:[e.jsx(Re,{className:"h-3 w-3 text-muted-foreground cursor-grab"}),T===i.id?e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("input",{type:"text",value:$,onChange:y=>z(y.target.value),className:"flex-1 px-2 py-1 text-sm border rounded bg-background",autoFocus:!0,onKeyDown:y=>{y.key==="Enter"&&W(),y.key==="Escape"&&se()}}),e.jsx(j,{size:"icon-sm",variant:"ghost",onClick:W,children:e.jsx(Se,{className:"h-3 w-3 text-green-500"})}),e.jsx(j,{size:"icon-sm",variant:"ghost",onClick:se,children:e.jsx(Ue,{className:"h-3 w-3 text-red-500"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm flex-1",children:i.name}),e.jsx(j,{size:"icon-sm",variant:"ghost",onClick:()=>re(i),title:"Edit term name",children:e.jsx(ae,{className:"h-3 w-3"})}),e.jsx(j,{size:"icon-sm",variant:"ghost",onClick:()=>Q(i.id),className:"text-destructive hover:text-destructive",title:"Delete term",children:e.jsx(ee,{className:"h-3 w-3"})})]})]},i.id)),e.jsxs(j,{variant:"ghost",size:"sm",className:"w-full mt-2 border border-dashed",onClick:()=>L(r.id),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Term"]})]})]},r.id))}),e.jsxs("div",{className:"text-xs text-muted-foreground border-t pt-3 mt-3",children:[e.jsx("p",{children:"ðŸ’¡ Tips:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 mt-1",children:[e.jsx("li",{children:"Click a year to expand/collapse its terms"}),e.jsx("li",{children:'Set one year as "Active" for quick filtering'}),e.jsx("li",{children:'Subjects without year/term will appear in "Unassigned"'})]})]})]})})},et=()=>{const b=us(),{data:t,updateData:l,showToast:v}=Je(),[Y,a]=f.useState("tasks"),[u,c]=f.useState("kanban"),[o,g]=f.useState(!1),[S,k]=f.useState(!1),[m,T]=f.useState(!1),[D,$]=f.useState(!1),[z,X]=f.useState(void 0),[U,p]=f.useState(void 0),[h,x]=f.useState(void 0),[L,Q]=f.useState(void 0),[ne,q]=f.useState(!1),[re,W]=f.useState(void 0),[se,ue]=f.useState("mark"),[he,r]=f.useState(!1),i=t.university.academicYears||[],y=t.university.terms||[],C=t.university.currentYearId,N=t.university.currentTermId,I=f.useMemo(()=>!C&&!N?t.university.subjects:C==="unassigned"?t.university.subjects.filter(s=>!s.yearId&&!s.termId):t.university.subjects.filter(s=>!(!s.yearId&&!s.termId||C&&s.yearId!==C||N&&s.termId!==N)),[t.university.subjects,C,N]),je=f.useMemo(()=>new Set(I.map(s=>s.id)),[I]),J=f.useMemo(()=>!C&&!N?t.university.tasks:t.university.tasks.filter(s=>je.has(s.subjectId)),[t.university.tasks,je,C,N]),Z=f.useMemo(()=>!C&&!N?t.university.exams:t.university.exams.filter(s=>je.has(s.subjectId)),[t.university.exams,je,C,N]),Qe=f.useCallback(s=>{l({university:{...t.university,currentYearId:s,currentTermId:s&&N&&y.find(n=>n.id===N&&n.yearId===s)?N:void 0}})},[t.university,N,y,l]),Ze=f.useCallback(s=>{l({university:{...t.university,currentTermId:s}})},[t.university,l]),es=f.useCallback((s,n)=>{l({university:{...t.university,academicYears:s,terms:n}}),v("Academic years and terms updated","success")},[t.university,l,v]),O=f.useMemo(()=>{const s=J,n=Z,d=I,w=s.length,A=s.filter(B=>B.status==="done").length,F=s.filter(B=>B.status==="in-progress").length,ie=s.filter(B=>B.status==="todo").length,R=n.filter(B=>!B.taken&&Ge(B.date)>=0&&Ge(B.date)<=7).length,le=t.university.gradeEntries||[];let Pe=0,be=0,Ye=0;d.forEach(B=>{const ms=n.filter(we=>we.subjectId===B.id),xs=le.filter(we=>we.subjectId===B.id),ye=ke(ms,xs);ye.totalPossible>0&&(Pe+=ye.totalEarned,be+=ye.totalPossible,Ye++)});const os=be>0?Pe/be*100:0;return{totalTasks:w,completedTasks:A,inProgressTasks:F,todoTasks:ie,upcomingExams:R,completionRate:w>0?Math.round(A/w*100):0,overallGrade:Math.round(os*10)/10,subjectsWithGrades:Ye}},[J,Z,I,t.university.gradeEntries]),ss=s=>{confirm("Delete this subject and all related tasks?")&&(l({university:{...t.university,subjects:t.university.subjects.filter(n=>n.id!==s),tasks:t.university.tasks.filter(n=>n.subjectId!==s),exams:t.university.exams.filter(n=>n.subjectId!==s)}}),v("Subject deleted successfully","success"))},De=s=>{confirm("Delete this task?")&&(l({university:{...t.university,tasks:t.university.tasks.filter(n=>n.id!==s)}}),v("Task deleted successfully","success"))},ts=s=>{confirm("Delete this exam?")&&(l({university:{...t.university,exams:t.university.exams.filter(n=>n.id!==s)}}),v("Exam deleted successfully","success"))},as=s=>{W(s),ue("mark"),q(!0)},ns=s=>{W(s),ue("grade"),q(!0)},rs=(s,n)=>{l({university:{...t.university,exams:t.university.exams.map(d=>d.id===s?{...d,...n}:d)}}),v(n.grade!==void 0?"Grade saved successfully":"Exam marked as taken","success"),q(!1),W(void 0)},fe=(s,n)=>{l({university:{...t.university,tasks:t.university.tasks.map(d=>d.id===s.id?{...d,status:n}:d)}}),v("Task status updated","success")},is=s=>{switch(s){case"done":return"secondary";case"in-progress":return"default";default:return"outline"}},$e=s=>{const n=t.university.subjects.find(w=>w.id===s.subjectId),d=[];return d.push({label:`Priority ${s.priority}`,variant:Fe(s.priority)}),n&&d.push({label:n.name,variant:"outline"}),s.dueDate&&d.push({label:Be(new Date(s.dueDate)),variant:He(s.dueDate)?"destructive":"outline",icon:e.jsx(Ne,{className:"h-3 w-3"})}),d},ls=s=>{const n=[{label:"Edit",icon:e.jsx(ae,{className:"h-4 w-4"}),onClick:()=>{p(s),k(!0)}}];return s.status!=="todo"&&n.push({label:"Move to To Do",onClick:()=>fe(s,"todo")}),s.status!=="in-progress"&&n.push({label:"Move to In Progress",onClick:()=>fe(s,"in-progress")}),s.status!=="done"&&n.push({label:"Move to Done",onClick:()=>fe(s,"done")}),n.push({label:"Delete",icon:e.jsx(ee,{className:"h-4 w-4"}),onClick:()=>De(s.id),variant:"destructive",separator:!0}),n},ds=s=>{const n=t.university.subjects.find(w=>w.id===s.subjectId),d=[];return d.push({label:s.status,variant:is(s.status)}),d.push({label:`Priority ${s.priority}`,variant:Fe(s.priority)}),n&&d.push({label:n.name,variant:"outline"}),s.dueDate&&d.push({label:`Due: ${Be(new Date(s.dueDate))}`,variant:He(s.dueDate)?"destructive":"outline",icon:e.jsx(Ne,{className:"h-3 w-3"})}),d},cs=[{id:"todo",title:"To Do",tasks:J.filter(s=>s.status==="todo"),color:"from-blue-500 to-cyan-500"},{id:"in-progress",title:"In Progress",tasks:J.filter(s=>s.status==="in-progress"),color:"from-yellow-500 to-orange-500"},{id:"done",title:"Done",tasks:J.filter(s=>s.status==="done"),color:"from-green-500 to-emerald-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold tracking-tight flex items-center gap-3 text-foreground",children:[e.jsx(Ts,{className:"h-10 w-10"}),"University"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your courses, tasks, and exams"})]}),e.jsx(Gs,{years:i,terms:y,currentYearId:C,currentTermId:N,onYearChange:Qe,onTermChange:Ze,onManageClick:()=>r(!0)})]}),e.jsx(ze,{}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:[e.jsxs(E,{children:[e.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Total Tasks"}),e.jsx(We,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O.totalTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all subjects"})]})]}),e.jsxs(E,{children:[e.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Completed"}),e.jsx(Es,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O.completedTasks}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[O.completionRate,"% completion"]}),e.jsx(Ce,{value:O.completionRate,className:"mt-2"})]})]}),e.jsxs(E,{children:[e.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"In Progress"}),e.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O.inProgressTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently working on"})]})]}),e.jsxs(E,{children:[e.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"To Do"}),e.jsx(Ms,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O.todoTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending tasks"})]})]}),e.jsxs(E,{children:[e.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Upcoming Exams"}),e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O.upcomingExams}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Next 7 days"})]})]}),e.jsxs(E,{children:[e.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Overall Grade"}),e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(M,{children:[e.jsx("div",{className:P("text-2xl font-bold",ge(O.overallGrade)),children:O.subjectsWithGrades>0?`${O.overallGrade}%`:"â€”"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:O.subjectsWithGrades>0?`${O.subjectsWithGrades} subject${O.subjectsWithGrades!==1?"s":""}`:"No grades yet"})]})]})]}),e.jsxs(gs,{value:Y,onValueChange:s=>a(s),children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs(ps,{className:"flex-wrap h-auto w-full sm:w-auto",children:[e.jsxs(de,{value:"tasks",className:"flex-1 sm:flex-none",children:[e.jsx(As,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Tasks"}),e.jsx("span",{className:"sm:hidden",children:"Tasks"})]}),e.jsxs(de,{value:"grades",className:"flex-1 sm:flex-none",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Grades"}),e.jsx("span",{className:"sm:hidden",children:"Grades"})]}),e.jsxs(de,{value:"subjects",className:"flex-1 sm:flex-none",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Subjects"}),e.jsx("span",{className:"sm:hidden",children:"Subjects"})]}),e.jsxs(de,{value:"exams",className:"flex-1 sm:flex-none",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Exams"}),e.jsx("span",{className:"sm:hidden",children:"Exams"})]}),e.jsxs(de,{value:"timetable",className:"flex-1 sm:flex-none",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Timetable"}),e.jsx("span",{className:"sm:hidden",children:"Timetable"})]})]}),Y==="tasks"&&e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{variant:u==="kanban"?"secondary":"ghost",size:"sm",onClick:()=>c("kanban"),"aria-label":"Kanban view",className:P("text-primary",u==="kanban"&&"bg-primary/10 text-primary hover:bg-primary/20"),children:e.jsx(Ds,{className:"h-4 w-4"})}),e.jsx(j,{variant:u==="list"?"secondary":"ghost",size:"sm",onClick:()=>c("list"),"aria-label":"List view",className:P("text-primary",u==="list"&&"bg-primary/10 hover:bg-primary/20"),children:e.jsx($s,{className:"h-4 w-4"})})]}),e.jsxs(j,{onClick:()=>k(!0),className:"flex-1 sm:flex-none",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Task"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),Y==="subjects"&&e.jsxs(j,{onClick:()=>g(!0),className:"w-full sm:w-auto",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Subject"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]}),Y==="exams"&&e.jsxs(j,{onClick:()=>T(!0),className:"w-full sm:w-auto",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Exam"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),e.jsx(ce,{value:"tasks",className:"space-y-4",children:J.length===0?e.jsx(E,{children:e.jsxs(M,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(We,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:C||N?"No tasks in this term":"No tasks yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:C||N?"Add subjects to this term or change your filter":"Create your first task to get started"}),e.jsxs(j,{onClick:()=>k(!0),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Task"]})]})}):u==="kanban"?e.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",children:e.jsx(hs,{columns:cs.map(s=>({id:s.id,title:s.title,items:s.tasks,color:s.color})),getItemId:s=>s.id,onDragEnd:(s,n)=>{const d=t.university.tasks.find(w=>w.id===s);d&&fe(d,n)},renderItem:s=>e.jsx(Le,{id:s.id,title:s.title,description:s.description,badges:$e(s),actions:ls(s)}),dragOverlay:s=>e.jsx(Le,{id:s.id,title:s.title,description:s.description,badges:$e(s),actions:[]})})}):e.jsx(js,{items:J,getItemId:s=>s.id,emptyMessage:"No tasks yet. Create your first task to get started.",renderItem:s=>e.jsx(fs,{title:s.title,description:s.description,badges:ds(s),actions:[{icon:e.jsx(ae,{className:"h-4 w-4"}),onClick:()=>{p(s),k(!0)},label:"Edit"},{icon:e.jsx(ee,{className:"h-4 w-4"}),onClick:()=>De(s.id),variant:"destructive",label:"Delete"}]})})}),e.jsx(ce,{value:"grades",className:"space-y-6",children:I.length===0?e.jsx(E,{children:e.jsxs(M,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(pe,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:C||N?"No subjects in this term":"No subjects yet"}),e.jsx("p",{className:"text-muted-foreground mb-4 text-center",children:C||N?"Add subjects to this term or change your filter":"Add subjects to start tracking your grades"}),e.jsxs(j,{onClick:()=>g(!0),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Subject"]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(E,{children:[e.jsx(K,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"}),"Overall Performance"]})}),e.jsx(M,{children:(()=>{const s=t.university.gradeEntries||[];let n=0,d=0;I.forEach(A=>{const F=Z.filter(le=>le.subjectId===A.id),ie=s.filter(le=>le.subjectId===A.id),R=ke(F,ie);n+=R.totalEarned,d+=R.totalPossible});const w=d>0?n/d*100:0;return e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[e.jsxs("div",{className:"text-center p-6 bg-muted/30 rounded-xl flex-1",children:[e.jsx(pe,{className:P("w-12 h-12 mx-auto mb-2",ge(w))}),e.jsxs("div",{className:P("text-4xl font-bold",ge(w)),children:[w.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Overall Grade"})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Total Points Earned"}),e.jsx("span",{className:"font-medium",children:n.toFixed(1)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Total Possible Points"}),e.jsx("span",{className:"font-medium",children:d.toFixed(1)})]}),e.jsx(ze,{className:"my-2"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Subjects with Grades"}),e.jsxs("span",{className:"font-medium",children:[I.filter(A=>{const F=Z.filter(R=>R.subjectId===A.id&&R.taken&&R.grade!==void 0),ie=(t.university.gradeEntries||[]).filter(R=>R.subjectId===A.id);return F.length>0||ie.length>0}).length," ","/"," ",I.length]})]})]})]})})()})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(s=>{const n=Z.filter(F=>F.subjectId===s.id),d=(t.university.gradeEntries||[]).filter(F=>F.subjectId===s.id),w=ke(n,d),A=n.filter(F=>F.taken&&F.grade!==void 0).length;return e.jsx(E,{className:"cursor-pointer hover:shadow-md transition-all",style:{borderLeftWidth:"4px",borderLeftColor:s.color},onClick:()=>b(`/university/subject/${s.id}`),children:e.jsxs(M,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[A," ","exam",A!==1&&"s"," ","graded",d.length>0&&` â€¢ ${d.length} other grade${d.length!==1?"s":""}`]})]}),e.jsx("div",{className:P("text-2xl font-bold",ge(w.percentage)),children:w.totalPossible>0?`${w.percentage.toFixed(1)}%`:"â€”"})]}),w.totalPossible>0?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{value:Math.min(w.percentage,100),className:"h-2 mb-2"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[w.totalEarned.toFixed(1)," ","/"," ",w.totalPossible.toFixed(1)," ","points"]})]}):e.jsx("div",{className:"text-sm text-muted-foreground italic",children:"No grades recorded yet"})]})},s.id)})})]})}),e.jsx(ce,{value:"subjects",className:"space-y-4",children:I.length===0?e.jsx(E,{children:e.jsxs(M,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(Ve,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:C||N?"No subjects in this term":"No subjects yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:C||N?"Add subjects to this term or change your filter":"Add your first subject to organize your courses"}),e.jsxs(j,{onClick:()=>g(!0),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Subject"]})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:I.map(s=>{const n=J.filter(A=>A.subjectId===s.id),d=n.filter(A=>A.status==="done").length,w=n.length>0?Math.round(d/n.length*100):0;return e.jsxs(E,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>b(`/university/subject/${s.id}`),children:[e.jsx(K,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("div",{children:e.jsx(V,{children:s.name})})]}),e.jsx("div",{onClick:A=>A.stopPropagation(),children:e.jsxs(Te,{children:[e.jsx(Ee,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"icon-sm",children:e.jsx(Ps,{className:"h-4 w-4"})})}),e.jsxs(Me,{align:"end",children:[e.jsxs(_,{onClick:()=>{X(s),g(!0)},children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(me,{}),e.jsxs(_,{onClick:()=>ss(s.id),className:"text-destructive",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]})}),e.jsxs(M,{children:[s.professor&&e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Prof. ",s.professor]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress"}),e.jsxs("span",{className:"font-medium",children:[w,"%"]})]}),e.jsx(Ce,{value:w}),e.jsxs("div",{className:"flex items-center justify-between text-sm pt-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tasks"}),e.jsxs("span",{className:"font-medium",children:[d," /"," ",n.length]})]})]})]})]},s.id)})})}),e.jsx(ce,{value:"exams",className:"space-y-4",children:Z.length===0?e.jsx(E,{children:e.jsxs(M,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(xe,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:C||N?"No exams in this term":"No exams scheduled"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:C||N?"Add exams to subjects in this term or change your filter":"Add your exam dates to stay prepared"}),e.jsxs(j,{onClick:()=>T(!0),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Exam"]})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Z.sort((s,n)=>new Date(s.date).getTime()-new Date(n.date).getTime()).map(s=>{const n=t.university.subjects.find(d=>d.id===s.subjectId);return e.jsx(vs,{exam:s,subjectName:n?.name,subjectColor:n?.color,onMarkAsTaken:as,onAddGrade:ns,onEdit:d=>{x(d),T(!0)},onDelete:d=>ts(d.id)},s.id)})})}),e.jsx(ce,{value:"timetable",children:e.jsx(Is,{subjects:I,onAddSchedule:s=>{const n=I.find(d=>d.id===s);n&&(Q(n),$(!0))},onEditSchedule:s=>{const n=I.find(d=>d.id===s);n&&(Q(n),$(!0))}})})]}),e.jsx(Ns,{isOpen:o,onClose:()=>{g(!1),X(void 0)},subject:z}),e.jsx(bs,{isOpen:S,onClose:()=>{k(!1),p(void 0)},task:U}),e.jsx(ys,{isOpen:m,onClose:()=>{T(!1),x(void 0)},exam:h}),e.jsx(ws,{isOpen:ne,onClose:()=>{q(!1),W(void 0)},exam:re||null,mode:se,onSave:rs}),e.jsx(Os,{isOpen:D,onClose:()=>{$(!1),Q(void 0)},subject:L}),e.jsx(zs,{isOpen:he,onClose:()=>r(!1),years:i,terms:y,onSave:es})]})};export{et as University};
