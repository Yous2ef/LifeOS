import{j as e,d as D,T as y,P as S,e as k,I as M,f as z,L as E}from"./radix-ui-U22BTGbQ.js";import{r as I}from"./router-CLckEVPx.js";import{D as T,c as B,S as L,v as R,a as _,u as K,b as P,C as A}from"./dnd-kit-Dna8SdiU.js";import{C as N,b as H,c as Q,a as V}from"./Card-B5BV7vXC.js";import{c,e as w,B as q}from"./index-DOOjm7Ao.js";import{Q as F}from"./utils-DdC2hUi5.js";const G=({id:t,children:a})=>{const{setNodeRef:r}=K({id:t});return e.jsx("div",{ref:r,className:"space-y-3",children:a})};function ae({columns:t,onDragEnd:a,renderItem:r,getItemId:n,dragOverlay:p}){const[f,h]=I.useState(null),g=s=>{const{active:d}=s,l=t.flatMap(o=>o.items).find(o=>n(o)===d.id);l&&h(l)},v=s=>{const{active:d,over:m}=s;if(h(null),!m)return;const l=d.id;let o;if(t.some(x=>x.id===m.id))o=m.id;else{const j=t.flatMap(u=>u.items).find(u=>n(u)===m.id);if(!j)return;const b=t.find(u=>u.items.some(C=>n(C)===n(j)));if(!b)return;o=b.id}a(l,o)};return e.jsxs(T,{collisionDetection:B,onDragStart:g,onDragEnd:v,children:[e.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-3",children:t.map(s=>e.jsxs(N,{className:"flex flex-col transition-all w-full",children:[e.jsxs(H,{className:"pb-3",children:[e.jsx("div",{className:c("h-1 -mx-6 -mt-6 mb-4 rounded-t-lg bg-gradient-to-r",s.color)}),e.jsxs(Q,{className:"flex items-center justify-between text-base sm:text-lg",children:[e.jsx("span",{className:"truncate",children:s.title}),e.jsx(w,{variant:"secondary",className:"ml-2 shrink-0",children:s.items.length})]})]}),e.jsx(V,{className:"flex-1 min-h-[150px] sm:min-h-[200px]",children:e.jsx(G,{id:s.id,children:s.items.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No items"}):e.jsx(L,{items:s.items.map(n),strategy:R,children:s.items.map(d=>e.jsx("div",{children:r(d)},n(d)))})})})]},s.id))}),e.jsx(_,{children:f&&p?p(f):null})]})}function J({...t}){return e.jsx(D,{"data-slot":"dropdown-menu",...t})}function O({...t}){return e.jsx(y,{"data-slot":"dropdown-menu-trigger",...t})}function U({className:t,sideOffset:a=4,...r}){return e.jsx(S,{children:e.jsx(k,{"data-slot":"dropdown-menu-content",sideOffset:a,className:c("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function W({className:t,inset:a,variant:r="default",...n}){return e.jsx(M,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":r,className:c("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function re({className:t,inset:a,...r}){return e.jsx(E,{"data-slot":"dropdown-menu-label","data-inset":a,className:c("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...r})}function X({className:t,...a}){return e.jsx(z,{"data-slot":"dropdown-menu-separator",className:c("bg-border -mx-1 my-1 h-px",t),...a})}const ne=({id:t,title:a,description:r,badges:n,actions:p,children:f,className:h})=>{const{attributes:g,listeners:v,setNodeRef:s,transform:d,transition:m,isDragging:l}=P({id:t}),o=A.Transform.toString(d);return e.jsx("div",{ref:s,style:{transform:o,transition:m},className:l?"opacity-50 scale-95":"",children:e.jsx(N,{className:c("p-3 sm:p-4 hover:shadow-md transition-all",h),children:e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("div",{className:c("flex-1 cursor-grab active:cursor-grabbing min-w-0",l&&"cursor-grabbing"),...g,...v,children:e.jsx("h4",{className:"font-medium text-foreground text-sm sm:text-base break-words",children:a})}),e.jsxs(J,{children:[e.jsx(O,{asChild:!0,children:e.jsx(q,{variant:"ghost",size:"icon-sm",className:"shrink-0",children:e.jsx(F,{className:"h-4 w-4"})})}),e.jsx(U,{align:"end",children:p.map((i,x)=>e.jsxs("div",{children:[i.separator&&x>0&&e.jsx(X,{}),e.jsxs(W,{onClick:i.onClick,className:i.variant==="destructive"?"text-destructive":"",children:[i.icon&&e.jsx("span",{className:"mr-2",children:i.icon}),i.label]})]},x))})]})]}),e.jsxs("div",{className:c("cursor-grab active:cursor-grabbing",l&&"cursor-grabbing"),...g,...v,children:[r&&e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground line-clamp-2 mb-2 sm:mb-3 break-words",children:r}),n&&n.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:n.map((i,x)=>e.jsxs(w,{variant:i.variant||"outline",className:"text-xs",children:[i.icon&&e.jsx("span",{className:"mr-1",children:i.icon}),e.jsx("span",{className:"truncate max-w-[150px]",children:i.label})]},x))}),f]})]})})})};export{J as D,ae as K,O as a,U as b,re as c,X as d,W as e,ne as f};
