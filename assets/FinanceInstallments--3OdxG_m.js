import{j as e}from"./radix-ui-CneFSYrq.js";import{r as n,L as G}from"./router-CJK1Z2Io.js";import{u as z,m as V,G as c}from"./GlassCard-HXv5_UBv.js";import{I as A,a as Y,P as H,b as J,c as K}from"./PaymentModal-DOaOMOgq.js";import{S as b}from"./SkeletonCard-Bl2HcFYU.js";import{A as Q,P as U,C,a as W}from"./utils-C1zQmt0N.js";import"./react-vendor-pR2cKLDH.js";import"./index-CO4gCy-A.js";import"./charts-CDpzOIQv.js";import"./dnd-kit-Cy9T72DN.js";import"./Label-yKW-Cje-.js";import"./TextArea-CHJ4Ga5k.js";function me(){const{accounts:r,categories:S,installments:d,settings:v,formatCurrency:l,addInstallment:P,updateInstallment:M,addInstallmentPayment:k,addInstallmentRefund:D,calculateAccountBalance:R}=z(),[E,i]=n.useState(!1),[L,o]=n.useState(!1),[O,p]=n.useState(!1),[B,u]=n.useState(!1),[g,m]=n.useState(null),[a,j]=n.useState(null),[x,I]=n.useState(null),[w,f]=n.useState(null),[F]=n.useState(!1),h=d.filter(t=>t.status==="active"),y=d.filter(t=>t.status==="completed"),T=h.reduce((t,s)=>t+(s.totalAmount-s.paidAmount),0),q=d.reduce((t,s)=>t+s.paidAmount,0);return e.jsxs("div",{className:"min-h-screen bg-background text-primary pb-24",children:[e.jsx(V.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"sticky top-0 z-40 backdrop-blur-xl bg-background/80 border-b border-white/10",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(G,{to:"/finance",className:"p-2 rounded-full bg-white/5 hover:bg-white/10 transition-colors",children:e.jsx(Q,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Installments"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your payment plans"})]}),e.jsx("button",{onClick:()=>{m(null),i(!0)},className:"p-2.5 rounded-full bg-emerald-500 hover:bg-emerald-600 text-white transition-colors",children:e.jsx(U,{className:"w-5 h-5"})})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs(c,{intensity:"light",padding:"md",className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:d.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Plans"})]}),e.jsxs(c,{intensity:"light",padding:"md",className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:h.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Active"})]}),e.jsxs(c,{intensity:"light",padding:"md",className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-red-400",children:l(T)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Remaining"})]}),e.jsxs(c,{intensity:"light",padding:"md",className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-400",children:l(q)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Paid"})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-blue-400"}),"Active Installments"]}),F?e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{}),e.jsx(b,{}),e.jsx(b,{})]}):h.length===0?e.jsxs(c,{intensity:"light",padding:"lg",className:"text-center",children:[e.jsx(C,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground/50"}),e.jsx("p",{className:"text-muted-foreground",children:"No active installments"}),e.jsx("button",{onClick:()=>{m(null),i(!0)},className:"mt-4 px-4 py-2 rounded-lg bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30 transition-colors",children:"Add Your First Installment"})]}):e.jsx(A,{installments:h,formatCurrency:l,onInstallmentClick:t=>{j(t),o(!0)},onPay:t=>{const s=d.find(N=>N.id===t);s&&(f(s),u(!0))},onAddInstallment:()=>{m(null),i(!0)}})]}),y.length>0&&e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-green-400"}),"Completed (",y.length,")"]}),e.jsx(A,{installments:y,formatCurrency:l,onInstallmentClick:t=>{j(t),o(!0)},onPay:()=>{},onAddInstallment:()=>{}})]})]}),e.jsx(Y,{isOpen:E,onClose:()=>{i(!1),m(null)},onSubmit:t=>{const s={title:t.title,totalAmount:t.totalAmount,paidAmount:t.paidAmount,installmentAmount:t.installmentAmount,totalInstallments:t.totalInstallments,paidInstallments:t.paidInstallments,frequency:t.frequency,linkedAccountId:t.linkedAccountId||r[0]?.id||"",startDate:t.startDate,nextPaymentDate:t.nextDueDate,description:t.notes,categoryId:S[0]?.id||"",endDate:t.startDate,status:"active",autoPayment:!1,remindDaysBefore:3,payments:[]};g?M(g.id,s):P(s),i(!1),m(null)},accounts:r,defaultCurrency:v.defaultCurrency,installment:g}),e.jsx(H,{isOpen:B,onClose:()=>{u(!1),f(null)},onSubmit:t=>{w&&(k(t.installmentId,{amount:t.amount,date:t.date,status:"paid",notes:t.notes},{accountId:t.accountId,paymentMethod:t.paymentMethod}),u(!1),f(null))},installment:w,accounts:r,defaultCurrency:v.defaultCurrency,formatCurrency:l,calculateBalance:R}),e.jsx(J,{isOpen:L,onClose:()=>{o(!1),j(null)},installment:a,formatCurrency:l,onEdit:()=>{a&&(m(a),o(!1),i(!0))},onPay:()=>{a&&(f(a),o(!1),u(!0))},onRefund:()=>{a&&(I(a),o(!1),p(!0))}}),e.jsx(K,{isOpen:O,onClose:()=>{p(!1),I(null)},onSubmit:t=>{if(x){const s=x.linkedAccountId||r.find(N=>N.isActive)?.id;D(x.id,t.amount,t.reason,s?{accountId:s}:void 0),p(!1),I(null)}},installment:x,formatCurrency:l})]})}export{me as default};
